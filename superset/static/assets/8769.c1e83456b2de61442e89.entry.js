(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8769],{74680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ADD_QUERY_EDITOR:()=>I,CHANGE_DATA_PREVIEW_ID:()=>fe,CLEAR_DESTROYED_QUERY_EDITOR:()=>Re,CLEAR_INACTIVE_QUERIES:()=>me,CLEAR_QUERY_RESULTS:()=>he,CLONE_QUERY_TO_NEW_TAB:()=>D,COLLAPSE_TABLE:()=>P,COST_ESTIMATE_FAILED:()=>ge,COST_ESTIMATE_RETURNED:()=>ye,COST_ESTIMATE_STARTED:()=>Ee,CREATE_DATASOURCE_FAILED:()=>be,CREATE_DATASOURCE_STARTED:()=>ve,CREATE_DATASOURCE_SUCCESS:()=>Te,CtasEnum:()=>we,END_QUERY:()=>q,EXPAND_TABLE:()=>U,LOAD_QUERY_EDITOR:()=>re,MERGE_TABLE:()=>N,MIGRATE_QUERY:()=>J,MIGRATE_QUERY_EDITOR:()=>K,MIGRATE_TABLE:()=>Z,MIGRATE_TAB_HISTORY:()=>X,QUERY_EDITOR_PERSIST_HEIGHT:()=>W,QUERY_EDITOR_SAVED:()=>O,QUERY_EDITOR_SETDB:()=>F,QUERY_EDITOR_SET_AUTORUN:()=>Q,QUERY_EDITOR_SET_CATALOG:()=>M,QUERY_EDITOR_SET_CURSOR_POSITION:()=>B,QUERY_EDITOR_SET_FUNCTION_NAMES:()=>V,QUERY_EDITOR_SET_QUERY_LIMIT:()=>H,QUERY_EDITOR_SET_SCHEMA:()=>k,QUERY_EDITOR_SET_SELECTED_TEXT:()=>G,QUERY_EDITOR_SET_SQL:()=>j,QUERY_EDITOR_SET_TEMPLATE_PARAMS:()=>$,QUERY_EDITOR_SET_TITLE:()=>Y,QUERY_EDITOR_TOGGLE_LEFT_BAR:()=>z,QUERY_FAILED:()=>pe,QUERY_SUCCESS:()=>ue,REFRESH_QUERIES:()=>oe,REMOVE_DATA_PREVIEW:()=>_e,REMOVE_QUERY:()=>x,REMOVE_QUERY_EDITOR:()=>w,REMOVE_TABLES:()=>L,REQUEST_QUERY_RESULTS:()=>de,RESET_STATE:()=>R,RUN_QUERY:()=>ie,SET_ACTIVE_QUERY_EDITOR:()=>te,SET_ACTIVE_SOUTHPANE_TAB:()=>ae,SET_DATABASES:()=>ee,SET_EDITOR_TAB_LAST_UPDATE:()=>Ae,SET_LAST_UPDATED_ACTIVE_TAB:()=>Se,SET_TABLES:()=>ne,SET_USER_OFFLINE:()=>se,START_QUERY:()=>le,STOP_QUERY:()=>ce,UPDATE_QUERY_EDITOR:()=>C,addDangerToast:()=>Oe,addInfoToast:()=>Ie,addNewQueryEditor:()=>at,addQueryEditor:()=>nt,addSavedQueryToTabState:()=>St,addSuccessToast:()=>Ce,addTable:()=>xt,addWarningToast:()=>De,changeDataPreviewId:()=>Ft,clearDestoryedQueryEditor:()=>ht,clearInactiveQueries:()=>je,clearQueryResults:()=>Ve,cloneQueryToNewTab:()=>ot,collapseTable:()=>Yt,convertQueryToClient:()=>Ue,convertQueryToServer:()=>xe,createCtasDatasource:()=>Jt,createDatasource:()=>Zt,createDatasourceFailed:()=>Xt,createDatasourceStarted:()=>zt,createDatasourceSuccess:()=>Kt,estimateQueryCost:()=>Qe,expandTable:()=>kt,fetchQueryEditor:()=>ut,fetchQueryResults:()=>Ke,formatQuery:()=>Dt,getUpToDateQuery:()=>Pe,loadQueryEditor:()=>ct,mergeTable:()=>qt,persistEditorHeight:()=>Ht,popDatasourceQuery:()=>Wt,popQuery:()=>Vt,popSavedQuery:()=>Gt,popStoredQuery:()=>$t,postStopQuery:()=>et,queryEditorSetAndSaveSql:()=>Ot,queryEditorSetAutorun:()=>Tt,queryEditorSetCatalog:()=>gt,queryEditorSetCursorPosition:()=>Ct,queryEditorSetDb:()=>yt,queryEditorSetQueryLimit:()=>wt,queryEditorSetSchema:()=>vt,queryEditorSetSelectedText:()=>Lt,queryEditorSetSql:()=>It,queryEditorSetTemplateParams:()=>Nt,queryEditorSetTitle:()=>bt,queryFailed:()=>$e,querySuccess:()=>He,reFetchQueryResults:()=>Mt,reRunQuery:()=>Je,refreshQueries:()=>jt,removeAllOtherQueryEditors:()=>ft,removeDataPreview:()=>We,removeQuery:()=>Et,removeQueryEditor:()=>_t,removeTables:()=>Qt,requestQueryResults:()=>ze,resetState:()=>Fe,runQuery:()=>Xe,runQueryFromSqlEditor:()=>Ze,runTablePreviewQuery:()=>Ut,saveQuery:()=>At,scheduleQuery:()=>Ye,setActiveQueryEditor:()=>it,setActiveSouthPaneTab:()=>pt,setDatabases:()=>tt,setEditorTabLastUpdate:()=>ke,setLastUpdatedActiveTab:()=>st,setTables:()=>dt,setUserOffline:()=>Bt,startQuery:()=>Be,stopQuery:()=>Ge,switchQueryEditor:()=>lt,syncQueryEditor:()=>rt,syncTable:()=>Pt,toggleLeftBar:()=>mt,updateQueryEditor:()=>Me,updateSavedQuery:()=>Rt});var n=r(79674),a=r.n(n),o=r(40866),s=r.n(o),i=r(43561),l=r(58561),c=r.n(l),d=r(95579),u=r(35742),p=r(51436),m=r(1639),h=r(27366),_=r(49501),f=r(95272),E=r(35700),y=r(38708),g=r(7735);const v=/^Untitled Query (\d+)$/,T="Untitled Query ",b=(e,t=`${T}1`)=>{const r=(0,d.t)(t);if(e.length>0){const t=e.filter((e=>{var t;return null==(t=e.name)?void 0:t.match(v)})).map((e=>+e.name.replace(T,"")));if(t.length>0){const e=Math.max(...t);return(0,d.t)("%s%s",T,e+1)}return r}return r};var A=r(55045),S=r(85278);const R="RESET_STATE",I="ADD_QUERY_EDITOR",C="UPDATE_QUERY_EDITOR",O="QUERY_EDITOR_SAVED",D="CLONE_QUERY_TO_NEW_TAB",w="REMOVE_QUERY_EDITOR",N="MERGE_TABLE",L="REMOVE_TABLES",q="END_QUERY",x="REMOVE_QUERY",U="EXPAND_TABLE",P="COLLAPSE_TABLE",F="QUERY_EDITOR_SETDB",M="QUERY_EDITOR_SET_CATALOG",k="QUERY_EDITOR_SET_SCHEMA",Y="QUERY_EDITOR_SET_TITLE",Q="QUERY_EDITOR_SET_AUTORUN",j="QUERY_EDITOR_SET_SQL",B="QUERY_EDITOR_SET_CURSOR_POSITION",H="QUERY_EDITOR_SET_QUERY_LIMIT",$="QUERY_EDITOR_SET_TEMPLATE_PARAMS",G="QUERY_EDITOR_SET_SELECTED_TEXT",V="QUERY_EDITOR_SET_FUNCTION_NAMES",W="QUERY_EDITOR_PERSIST_HEIGHT",z="QUERY_EDITOR_TOGGLE_LEFT_BAR",K="MIGRATE_QUERY_EDITOR",X="MIGRATE_TAB_HISTORY",Z="MIGRATE_TABLE",J="MIGRATE_QUERY",ee="SET_DATABASES",te="SET_ACTIVE_QUERY_EDITOR",re="LOAD_QUERY_EDITOR",ne="SET_TABLES",ae="SET_ACTIVE_SOUTHPANE_TAB",oe="REFRESH_QUERIES",se="SET_USER_OFFLINE",ie="RUN_QUERY",le="START_QUERY",ce="STOP_QUERY",de="REQUEST_QUERY_RESULTS",ue="QUERY_SUCCESS",pe="QUERY_FAILED",me="CLEAR_INACTIVE_QUERIES",he="CLEAR_QUERY_RESULTS",_e="REMOVE_DATA_PREVIEW",fe="CHANGE_DATA_PREVIEW_ID",Ee="COST_ESTIMATE_STARTED",ye="COST_ESTIMATE_RETURNED",ge="COST_ESTIMATE_FAILED",ve="CREATE_DATASOURCE_STARTED",Te="CREATE_DATASOURCE_SUCCESS",be="CREATE_DATASOURCE_FAILED",Ae="SET_EDITOR_TAB_LAST_UPDATE",Se="SET_LAST_UPDATED_ACTIVE_TAB",Re="CLEAR_DESTROYED_QUERY_EDITOR",Ie=f.Zt,Ce=f.WR,Oe=f.iB,De=f.Zd,we={Table:"TABLE",View:"VIEW"},Ne=(0,d.t)("The query couldn't be loaded"),Le={id:"remoteId",db_id:"dbId",label:"name",template_parameters:"templateParams"},qe=e=>t=>a()(t,((t,r)=>r in e?e[r]:r)),xe=qe(s()(Le)),Ue=qe(Le);function Pe(e,t,r){const{sqlLab:{unsavedQueryEditor:n,queryEditors:a}}=e,o=null!=r?r:t.id;return{id:o,...a.find((e=>e.id===o)),...o===n.id&&n}}function Fe(e){return(t,r)=>{const{common:n}=r(),a=(0,A.A)({...(0,y.A)(),common:n,...e});t({type:R,sqlLabInitialState:a.sqlLab}),(0,S.Rm)(t,a)}}function Me(e){return{type:C,alterations:e}}function ke(e){return{type:Ae,timestamp:e}}function Ye(e){return t=>u.A.post({endpoint:"/api/v1/saved_query/",jsonPayload:e,stringify:!1}).then((()=>t(Ce((0,d.t)("Your query has been scheduled. To see details of your query, navigate to Saved queries"))))).catch((()=>t(Oe((0,d.t)("Your query could not be scheduled")))))}function Qe(e){return(t,r)=>{const{dbId:n,catalog:a,schema:o,sql:s,selectedText:i,templateParams:l}=Pe(r(),e),c={database_id:n,catalog:a,schema:o,sql:i||s,template_params:JSON.parse(l||"{}")};return Promise.all([t({type:Ee,query:e}),u.A.post({endpoint:"/api/v1/sqllab/estimate/",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((({json:r})=>t({type:ye,query:e,json:r}))).catch((r=>(0,p.h4)(r).then((r=>{const n=r.error||r.statusText||(0,d.t)("Failed at retrieving results");return t({type:ge,query:e,error:n})}))))])}}function je(e){return{type:me,interval:e}}function Be(e){return Object.assign(e,{id:e.id?e.id:(0,i.Ak)(11),progress:0,startDttm:(0,_.tB)(),state:e.runAsync?"pending":"running",cached:!1}),{type:le,query:e}}function He(e,t){return{type:ue,query:e,results:t}}function $e(e,t,r,n){return function(a){const o={has_err:!0,start_offset:e.startDttm,ts:(new Date).getTime()};null==n||n.forEach((({error_type:e,extra:t})=>{var r;((null==t||null==(r=t.issue_codes)?void 0:r.map((({message:e})=>e)))||[e]).forEach((t=>{a((0,g.logEvent)(E.pi,{...o,error_type:e,error_details:t}))}))})),a({type:pe,query:e,msg:t,link:r,errors:n})}}function Ge(e){return{type:ce,query:e}}function Ve(e){return{type:he,query:e}}function We(e){return{type:_e,table:e}}function ze(e){return{type:de,query:e}}function Ke(e,t,r){return function(n,a){var o,s;const{SQLLAB_QUERY_RESULT_TIMEOUT:i}=null!=(o=null==(s=a().common)?void 0:s.conf)?o:{};n(ze(e));const l=c().encode({key:e.resultsKey,rows:t||null}),m=null!=r?r:i,h=new AbortController;return u.A.get({endpoint:`/api/v1/sqllab/results/?q=${l}`,parseMethod:"json-bigint",...m&&{timeout:m,signal:h.signal}}).then((({json:t})=>n(He(e,t)))).catch((t=>{h.abort(),(0,p.h4)(t).then((t=>{const r=t.error||t.statusText||(0,d.t)("Failed at retrieving results");return n($e(e,r,t.link,t.errors))}))}))}}function Xe(e){return function(t){t(Be(e));const r={client_id:e.id,database_id:e.dbId,json:!0,runAsync:e.runAsync,catalog:e.catalog,schema:e.schema,sql:e.sql,sql_editor_id:e.sqlEditorId,tab:e.tab,tmp_table_name:e.tempTable,select_as_cta:e.ctas,ctas_method:e.ctas_method,templateParams:e.templateParams,queryLimit:e.queryLimit,expand_data:!0},n=window.location.search||"";return u.A.post({endpoint:`/api/v1/sqllab/execute/${n}`,body:JSON.stringify(r),headers:{"Content-Type":"application/json"},parseMethod:"json-bigint"}).then((({json:r})=>{e.runAsync||t(He(e,r))})).catch((r=>(0,p.h4)(r).then((r=>{let n=r.error||r.message||r.statusText||(0,d.t)("Unknown error");n.includes("CSRF token")&&(n=(0,d.t)(m.HL.SESSION_TIMED_OUT)),t($e(e,n,r.link,r.errors))}))))}}function Ze(e,t,r,n,a,o){return function(s,i){const l=Pe(i(),t,t.id);s(Xe({dbId:l.dbId,sql:l.selectedText||l.sql,sqlEditorId:l.id,tab:l.name,catalog:l.catalog,schema:l.schema,tempTable:n,templateParams:l.templateParams,queryLimit:l.queryLimit||r,runAsync:!!e&&e.allow_run_async,ctas:a,ctas_method:o,updateTabState:!l.selectedText}))}}function Je(e){return function(t){t(Xe({...e,id:(0,i.Ak)(11)}))}}function et(e){return function(t){return u.A.post({endpoint:"/api/v1/query/stop",body:JSON.stringify({client_id:e.id}),headers:{"Content-Type":"application/json"}}).then((()=>t(Ge(e)))).then((()=>t(Ce((0,d.t)("Query was stopped."))))).catch((()=>t(Oe((0,d.t)("Failed at stopping query. %s",e.id)))))}}function tt(e){return{type:ee,databases:e}}function rt(e){return function(t,r){const{tables:n,queries:a}=r().sqlLab,o=n.filter((t=>t.inLocalStorage&&t.queryEditorId===e.id)),s=Object.values(a).filter((t=>t.inLocalStorage&&t.sqlEditorId===e.id));return u.A.post({endpoint:"/tabstateview/",postPayload:{queryEditor:e}}).then((({json:r})=>{const n={...e,id:r.id.toString(),inLocalStorage:!1,loaded:!0};return t({type:K,oldQueryEditor:e,newQueryEditor:n}),t({type:X,oldId:e.id,newId:n.id}),Promise.all([...o.map((e=>function(e,t,r){return u.A.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...e,queryEditorId:t}}}).then((({json:n})=>{const a={...e,id:n.id,queryEditorId:t};return r({type:Z,oldTable:e,newTable:a})})).catch((()=>r(De((0,d.t)("Unable to migrate table schema state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e,n.id,t))),...s.map((e=>function(e,t,r){return u.A.post({endpoint:encodeURI(`/tabstateview/${t}/migrate_query`),postPayload:{queryId:e}}).then((()=>r({type:J,queryId:e,queryEditorId:t}))).catch((()=>r(De((0,d.t)("Unable to migrate query state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}(e.id,n.id,t)))])})).catch((()=>t(De((0,d.t)("Unable to migrate query editor state to backend. Superset will retry later. Please contact your administrator if this problem persists.")))))}}function nt(e){const t={...e,id:(0,i.Ak)(11),loaded:!0,inLocalStorage:!0};return{type:I,queryEditor:t}}function at(){return function(e,t){const{sqlLab:{queryEditors:r,tabHistory:n,unsavedQueryEditor:a,databases:o},common:s}=t(),i=s.conf.SQLLAB_DEFAULT_DBID,l=r.find((e=>e.id===n[n.length-1])),c=Object.values(o).map((e=>e.id)),u=c.length>0?Math.min(...c):void 0,{dbId:p,catalog:m,schema:_,queryLimit:f,autorun:E}={...r[0],...l,...a.id===(null==l?void 0:l.id)&&a},y=(0,h.G7)(h.TO.SqllabBackendPersistence)?"":(0,d.t)("-- Note: Unless you save your query, these tabs will NOT persist if you clear your cookies or change browsers.\n\n"),g=b((null==r?void 0:r.map((e=>({...e,...e.id===a.id&&a}))))||[]);return e(nt({dbId:p||i||u,catalog:null!=m?m:null,schema:null!=_?_:null,autorun:null!=E&&E,sql:`${y}SELECT ...`,queryLimit:f||s.conf.DEFAULT_SQLLAB_LIMIT,name:g}))}}function ot(e,t){return function(r,n){const a=n(),{queryEditors:o,unsavedQueryEditor:s,tabHistory:i}=a.sqlLab,l={...o.find((e=>e.id===i[i.length-1])),...i[i.length-1]===s.id&&s};return r(nt({name:(0,d.t)("Copy of %s",l.name),dbId:e.dbId?e.dbId:null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:t,sql:e.sql,queryLimit:l.queryLimit,maxRow:l.maxRow,templateParams:l.templateParams}))}}function st(e){return{type:Se,queryEditorId:e}}function it(e){return{type:te,queryEditor:e}}function lt(e=!1){return function(t,r){const{sqlLab:n}=r(),{queryEditors:a,tabHistory:o}=n,s=o[o.length-1],i=a.findIndex((e=>e.id===s));t(it(a[(e?i-1+a.length:i+1)%a.length]))}}function ct(e){return{type:re,queryEditor:e}}function dt(e){const t=e.filter((e=>null!==e.description)).map((e=>{const{columns:t,selectStar:r,primaryKey:n,foreignKeys:a,indexes:o,dataPreviewQueryId:s}=e.description;return{dbId:e.database_id,queryEditorId:e.tab_state_id.toString(),catalog:e.catalog,schema:e.schema,name:e.table,expanded:e.expanded,id:e.id,dataPreviewQueryId:s,columns:t,selectStar:r,primaryKey:n,foreignKeys:a,indexes:o,isMetadataLoading:!1,isExtraMetadataLoading:!1}}));return{type:ne,tables:t}}function ut(e,t){return function(r){u.A.get({endpoint:encodeURI(`/tabstateview/${e.id}`)}).then((({json:e})=>{var n,a;const o={id:e.id.toString(),loaded:!0,name:e.label,sql:e.sql,selectedText:null,latestQueryId:null==(n=e.latest_query)?void 0:n.id,autorun:e.autorun,dbId:e.database_id,templateParams:e.template_params,catalog:e.catalog,schema:e.schema,queryLimit:e.query_limit,remoteId:null==(a=e.saved_query)?void 0:a.id,hideLeftBar:e.hide_left_bar};r(ct(o)),r(dt(e.table_schemas||[])),e.latest_query&&e.latest_query.resultsKey&&r(Ke(e.latest_query,t))})).catch((t=>404!==t.status?r(Oe((0,d.t)("An error occurred while fetching tab state"))):r({type:w,queryEditor:e})))}}function pt(e){return{type:ae,tabId:e}}function mt(e){const t=!e.hideLeftBar;return{type:z,queryEditor:e,hideLeftBar:t}}function ht(e){return{type:Re,queryEditorId:e}}function _t(e){return{type:w,queryEditor:e}}function ft(e){return function(t,r){var n;const{sqlLab:a}=r();null==(n=a.queryEditors)||n.forEach((r=>{r.id!==e.id&&t(_t(r))}))}}function Et(e){return function(t){return((0,h.G7)(h.TO.SqllabBackendPersistence)?u.A.delete({endpoint:encodeURI(`/tabstateview/${e.sqlEditorId}/query/${e.id}`)}):Promise.resolve()).then((()=>t({type:x,query:e}))).catch((()=>t(Oe((0,d.t)("An error occurred while removing query. Please contact your administrator.")))))}}function yt(e,t){return{type:F,queryEditor:e,dbId:t}}function gt(e,t){return{type:M,queryEditor:e||{},catalog:t}}function vt(e,t){return{type:k,queryEditor:e||{},schema:t}}function Tt(e,t){return{type:Q,queryEditor:e,autorun:t}}function bt(e,t,r){return{type:Y,queryEditor:{...e,id:r},name:t}}function At(e,t){const{id:r,...n}=xe(e);return r=>u.A.post({endpoint:"/api/v1/saved_query/",jsonPayload:xe(n)}).then((n=>{const a=Ue({id:n.json.id,...n.json.result});return r({type:O,query:e,clientId:t,result:a}),r(bt(e,e.name,t)),a})).catch((()=>r(Oe((0,d.t)("Your query could not be saved")))))}const St=(e,t)=>r=>((0,h.G7)(h.TO.SqllabBackendPersistence)?u.A.put({endpoint:`/tabstateview/${e.id}`,postPayload:{saved_query_id:t.remoteId}}):Promise.resolve()).catch((()=>{r(Oe((0,d.t)("Your query was not properly saved")))})).then((()=>{r(Ce((0,d.t)("Your query was saved")))}));function Rt(e,t){const{id:r,...n}=xe(e);return r=>u.A.put({endpoint:`/api/v1/saved_query/${e.remoteId}`,jsonPayload:xe(n)}).then((()=>{r(Ce((0,d.t)("Your query was updated"))),r(bt(e,e.name,t))})).catch((e=>{const t=(0,d.t)("Your query could not be updated");console.error(t,e),r(Oe(t))})).then((()=>r(Me(e))))}function It(e,t,r){return{type:j,queryEditor:e,sql:t,queryId:r}}function Ct(e,t){return{type:B,queryEditor:e,position:t}}function Ot(e,t,r){return function(n,a){const o=Pe(a(),e);return n(It(o,t,r)),(0,h.G7)(h.TO.SqllabBackendPersistence)?u.A.put({endpoint:encodeURI(`/tabstateview/${o.id}`),postPayload:{sql:t,latest_query_id:r}}).catch((()=>n(Oe((0,d.t)('An error occurred while storing your query in the backend. To avoid losing your changes, please save your query using the "Save Query" button.'))))):Promise.resolve()}}function Dt(e){return function(t,r){const{sql:n}=Pe(r(),e);return u.A.post({endpoint:"/api/v1/sqllab/format_sql/",body:JSON.stringify({sql:n}),headers:{"Content-Type":"application/json"}}).then((({json:r})=>{t(It(e,r.result))}))}}function wt(e,t){return{type:H,queryEditor:e,queryLimit:t}}function Nt(e,t){return{type:$,queryEditor:e,templateParams:t}}function Lt(e,t){return{type:G,queryEditor:e,sql:t}}function qt(e,t,r){return{type:N,table:e,query:t,prepend:r}}function xt(e,t,r,n){return function(a,o){const s=Pe(o(),e,e.id);a(qt({dbId:s.dbId,queryEditorId:s.id,catalog:r,schema:n,name:t,id:(0,i.Ak)(11),expanded:!0},null,!0))}}function Ut(e){return function(t,r){const{sqlLab:{databases:n}}=r(),a=n[e.dbId],{dbId:o,catalog:s,schema:l}=e;if(a&&!a.disable_data_preview){const r={id:(0,i.Ak)(11),dbId:o,catalog:s,schema:l,sql:e.selectStar,tableName:e.name,sqlEditorId:null,tab:"",runAsync:a.allow_run_async,ctas:!1,isDataPreview:!0};return Promise.all([t(qt({id:e.id,dbId:e.dbId,catalog:e.catalog,schema:e.schema,name:e.name,queryEditorId:e.queryEditorId,dataPreviewQueryId:r.id},r)),t(Xe(r))])}return Promise.resolve()}}function Pt(e,t){return function(r){return((0,h.G7)(h.TO.SqllabBackendPersistence)?u.A.post({endpoint:encodeURI("/tableschemaview/"),postPayload:{table:{...t,...e}}}):Promise.resolve({json:{id:e.id}})).then((({json:n})=>{const a={...e,id:n.id};r(qt({...a,expanded:!0,initialized:!0})),e.dataPreviewQueryId||r(Ut({...t,...a}))})).catch((()=>r(Oe((0,d.t)("An error occurred while fetching table metadata. Please contact your administrator.")))))}}function Ft(e,t){return{type:fe,oldQueryId:e,newQuery:t}}function Mt(e){return function(t){const r={id:(0,i.Ak)(),dbId:e.dbId,sql:e.sql,tableName:e.tableName,sqlEditorId:null,tab:"",runAsync:!1,ctas:!1,queryLimit:e.queryLimit,isDataPreview:e.isDataPreview};t(Xe(r)),t(Ft(e.id,r))}}function kt(e){return function(t){return((0,h.G7)(h.TO.SqllabBackendPersistence)?u.A.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!0}}):Promise.resolve()).then((()=>t({type:U,table:e}))).catch((()=>t(Oe((0,d.t)("An error occurred while expanding the table schema. Please contact your administrator.")))))}}function Yt(e){return function(t){return((0,h.G7)(h.TO.SqllabBackendPersistence)?u.A.post({endpoint:encodeURI(`/tableschemaview/${e.id}/expanded`),postPayload:{expanded:!1}}):Promise.resolve()).then((()=>t({type:P,table:e}))).catch((()=>t(Oe((0,d.t)("An error occurred while collapsing the table schema. Please contact your administrator.")))))}}function Qt(e){return function(t){var r;const n=null!=(r=null==e?void 0:e.filter(Boolean))?r:[];return((0,h.G7)(h.TO.SqllabBackendPersistence)?Promise.all(n.map((e=>e.initialized?u.A.delete({endpoint:encodeURI(`/tableschemaview/${e.id}`)}):Promise.resolve()))):Promise.resolve()).then((()=>t({type:L,tables:n}))).catch((()=>t(Oe((0,d.t)("An error occurred while removing the table schema. Please contact your administrator.")))))}}function jt(e){return{type:oe,alteredQueries:e}}function Bt(e){return{type:se,offline:e}}function Ht(e,t,r){return{type:W,queryEditor:e,northPercent:t,southPercent:r}}function $t(e){return function(t){return u.A.get({endpoint:`/kv/${e}`}).then((({json:e})=>t(nt({name:e.name?e.name:(0,d.t)("Shared query"),dbId:e.dbId?parseInt(e.dbId,10):null,catalog:e.catalog?e.catalog:null,schema:e.schema?e.schema:null,autorun:!!e.autorun&&e.autorun,sql:e.sql?e.sql:"SELECT ...",templateParams:e.templateParams})))).catch((()=>t(Oe(Ne))))}}function Gt(e){return function(t){return u.A.get({endpoint:`/api/v1/saved_query/${e}`}).then((({json:e})=>{const r={...Ue(e.result),loaded:!0,autorun:!1},n={name:r.name,dbId:r.database.id,catalog:r.catalog,schema:r.schema,sql:r.sql,templateParams:r.templateParams};return t(nt(n))})).catch((()=>t(Oe(Ne))))}}function Vt(e){return function(t){return u.A.get({endpoint:`/api/v1/query/${e}`}).then((({json:e})=>{const r=e.result,n={dbId:r.database.id,catalog:r.catalog,schema:r.schema,sql:r.sql,name:(0,d.t)("Copy of %s",r.tab_name),autorun:!1};return t(nt(n))})).catch((()=>t(Oe(Ne))))}}function Wt(e,t){return function(r){const n=(0,d.t)("Query"),a=e.split("__")[0],o=c().encode({keys:["none"],columns:["name","schema","database.id","select_star"]});return u.A.get({endpoint:`/api/v1/dataset/${a}?q=${o}`}).then((({json:e})=>r(nt({name:`${n} ${e.result.name}`,dbId:e.result.database.id,schema:e.result.schema,autorun:void 0!==t,sql:t||e.result.select_star})))).catch((()=>r(Oe((0,d.t)("The datasource couldn't be loaded")))))}}function zt(){return{type:ve}}function Kt(e){const t=`${e.id}__table`;return{type:Te,datasource:t}}function Xt(e){return{type:be,err:e}}function Zt(e){return t=>{t(zt());const{dbId:r,catalog:n,schema:a,datasourceName:o,sql:s}=e;return u.A.post({endpoint:"/api/v1/dataset/",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:r,catalog:n,schema:a,sql:s,table_name:o,is_managed_externally:!1,external_url:null})}).then((({json:e})=>(t(Kt(e)),Promise.resolve(e)))).catch((e=>((0,p.h4)(e).then((e=>{t(Oe(e.error))})),t(Xt((0,d.t)("An error occurred while creating the data source"))),Promise.reject())))}}function Jt(e){return t=>(t(zt()),u.A.post({endpoint:"/api/v1/dataset/get_or_create/",jsonPayload:e}).then((({json:e})=>(t(Kt(e.result)),e.result))).catch((()=>{const e=(0,d.t)("An error occurred while creating the data source");return t(Xt(e)),Promise.reject(new Error(e))})))}},2514:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ADD_CHART:()=>J,ANNOTATION_QUERY_FAILED:()=>F,ANNOTATION_QUERY_STARTED:()=>U,ANNOTATION_QUERY_SUCCESS:()=>q,CHART_RENDERING_FAILED:()=>C,CHART_RENDERING_SUCCEEDED:()=>D,CHART_UPDATE_FAILED:()=>R,CHART_UPDATE_STARTED:()=>g,CHART_UPDATE_STOPPED:()=>A,CHART_UPDATE_SUCCEEDED:()=>T,DYNAMIC_PLUGIN_CONTROLS_READY:()=>k,POST_CHART_FORM_DATA:()=>ne,REMOVE_CHART:()=>N,RENDER_TRIGGERED:()=>V,TRIGGER_QUERY:()=>$,UPDATE_CHART_ID:()=>X,UPDATE_QUERY_FORM_DATA:()=>z,addChart:()=>ee,annotationQueryFailed:()=>M,annotationQueryStarted:()=>P,annotationQuerySuccess:()=>x,chartRenderingFailed:()=>O,chartRenderingSucceeded:()=>w,chartUpdateFailed:()=>I,chartUpdateStarted:()=>v,chartUpdateStopped:()=>S,chartUpdateSucceeded:()=>b,dynamicPluginControlsReady:()=>Y,exploreJSON:()=>re,getChartDataRequest:()=>B,getDatasourceSamples:()=>ie,handleChartDataResponse:()=>te,postChartFormData:()=>ae,redirectSQLLab:()=>oe,refreshChart:()=>se,removeChart:()=>L,renderTriggered:()=>W,runAnnotationQuery:()=>H,triggerQuery:()=>G,updateChartId:()=>Z,updateQueryFormData:()=>K});var n=r(95093),a=r.n(n),o=r(35742),s=r(51436),i=r(27366),l=r(95579),c=r(13270),d=r(91715),u=r(85183),p=r(95272),m=r(7735),h=r(35700),_=r(93376),f=r(95004),E=r(355),y=r(12066);const g="CHART_UPDATE_STARTED";function v(e,t,r){return{type:g,queryController:e,latestQueryFormData:t,key:r}}const T="CHART_UPDATE_SUCCEEDED";function b(e,t){return{type:T,queriesResponse:e,key:t}}const A="CHART_UPDATE_STOPPED";function S(e){return{type:A,key:e}}const R="CHART_UPDATE_FAILED";function I(e,t){return{type:R,queriesResponse:e,key:t}}const C="CHART_RENDERING_FAILED";function O(e,t,r){return{type:C,error:e,key:t,stackTrace:r}}const D="CHART_RENDERING_SUCCEEDED";function w(e){return{type:D,key:e}}const N="REMOVE_CHART";function L(e){return{type:N,key:e}}const q="ANNOTATION_QUERY_SUCCESS";function x(e,t,r){return{type:q,annotation:e,queryResponse:t,key:r}}const U="ANNOTATION_QUERY_STARTED";function P(e,t,r){return{type:U,annotation:e,queryController:t,key:r}}const F="ANNOTATION_QUERY_FAILED";function M(e,t,r){return{type:F,annotation:e,queryResponse:t,key:r}}const k="DYNAMIC_PLUGIN_CONTROLS_READY",Y=()=>(e,t)=>{const r=t(),n=(0,d.Eu)(r.explore,r.explore.form_data);e({type:k,key:n.slice_id.value,controlsState:n})},Q=async(e,t,r,n,a="POST",s={},i)=>{const l=(0,u.TL)({resultFormat:t,resultType:r}),c=_.m&&(null==s?void 0:s.dashboard_id),d=(0,u.Xe)({formData:e,endpointType:l,force:n,allowDomainSharding:c,method:a,requestParams:s.dashboard_id?{dashboard_id:s.dashboard_id}:{}}),p={...s,url:d,postPayload:{form_data:e},parseMethod:i};return o.A.post(p).then((({json:e,response:t})=>({response:t,json:{result:[e]}})))},j=async(e,t,r,n,a,s,i,l)=>{const c=(0,u.sx)({formData:e,resultType:r,resultFormat:t,force:n,setDataMask:s,ownState:i}),{slice_id:d}=e,{dashboard_id:p}=a,m={};void 0!==d&&(m.form_data=`{"slice_id":${d}}`),void 0!==p&&(m.dashboard_id=p),n&&(m.force=n);const h=_.m&&(null==a?void 0:a.dashboard_id),f=(0,u.Hh)({path:"/api/v1/chart/data",qs:m,allowDomainSharding:h}).toString(),E={...a,url:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(c),parseMethod:l};return o.A.post(E)};async function B({formData:e,setDataMask:t=(()=>{}),resultFormat:r="json",resultType:n="full",force:a=!1,method:o="POST",requestParams:s={},ownState:i={}}){let l={...s};_.m&&(l={...l,mode:"cors",credentials:"include"});const[c,d]=(0,u.Mp)(e);return c?Q(e,r,n,a,o,l,d):j(e,r,n,a,l,t,i,d)}function H({annotation:e,timeout:t,formData:r,key:n,isDashboardRequest:a=!1,force:i=!1}){return function(l,c){var d;const{charts:p,common:m}=c(),h=n||Object.keys(p)[0],_=t||m.conf.SUPERSET_WEBSERVER_TIMEOUT,f={...r||p[h].latestQueryFormData};if(!e.sourceType)return Promise.resolve();f.time_grain_sqla=f.time_grain_sqla||f.granularity,f.granularity=f.granularity_sqla;const E=Object.keys(e.overrides);(E.includes("since")||E.includes("until"))&&(e.overrides={...e.overrides,time_range:null});const y=Object.keys(e.overrides).reduce(((t,r)=>({...t,[r]:e.overrides[r]||f[r]})),{});if(!a&&f){const e=f.extra_filters&&f.extra_filters.length>0;y.extra_filters=e?f.extra_filters:void 0}const g=(0,u.Ze)(e.value,i),v=new AbortController,{signal:T}=v;l(P(e,v,h));const b=null==f||null==(d=f.annotation_layers)?void 0:d.findIndex((t=>t.name===e.name));return b>=0&&(f.annotation_layers[b].overrides=y),o.A.post({url:g,signal:T,timeout:1e3*_,headers:{"Content-Type":"application/json"},jsonPayload:(0,u.sx)({formData:f,force:i,resultFormat:"json",resultType:"full"})}).then((({json:t})=>{var r,n,a;const o=null==t||null==(r=t.result)||null==(n=r[0])||null==(a=n.annotation_data)?void 0:a[e.name];return l(x(e,{data:o},h))})).catch((t=>(0,s.h4)(t).then((t=>{"timeout"===t.statusText?l(M(e,{error:"Query timeout"},h)):(t.error||"").toLowerCase().includes("no data")?l(x(e,t,h)):"abort"!==t.statusText&&l(M(e,t,h))}))))}}const $="TRIGGER_QUERY";function G(e=!0,t){return{type:$,value:e,key:t}}const V="RENDER_TRIGGERED";function W(e,t){return{type:V,value:e,key:t}}const z="UPDATE_QUERY_FORM_DATA";function K(e,t){return{type:z,value:e,key:t}}const X="UPDATE_CHART_ID";function Z(e,t=0){return{type:X,newId:e,key:t}}const J="ADD_CHART";function ee(e,t){return{type:J,chart:e,key:t}}function te(e,t,r){if((0,i.G7)(i.TO.GlobalAsyncQueries)){const n="result"in t?t.result:t;switch(e.status){case 200:return Promise.resolve(n);case 202:return r?(0,E.fv)(n[0]):(0,E.fv)(n);default:throw new Error(`Received unexpected response status (${e.status}) while fetching chart data`)}}return t.result}function re(e,t=!1,r,n,o,l){return async(c,d)=>{const p=h.Vy.getTimestamp(),_=new AbortController,E=r||d().common.conf.SUPERSET_WEBSERVER_TIMEOUT,y={signal:_.signal,timeout:1e3*E};o&&(y.dashboard_id=o);const g=B({setDataMask:t=>{c((0,f.Mv)(e.slice_id,t))},formData:e,resultFormat:"json",resultType:"full",force:t,method:"POST",requestParams:y,ownState:l});c(v(_,e,n));const[T]=(0,u.Mp)(e),A=g.then((({response:e,json:t})=>te(e,t,T))).then((r=>(r.forEach((r=>c((0,m.logEvent)(h.tO,{slice_id:n,applied_filters:r.applied_filters,is_cached:r.is_cached,force_refresh:t,row_count:r.rowcount,datasource:e.datasource,start_offset:p,ts:(new Date).getTime(),duration:h.Vy.getTimestamp()-p,has_extra_filters:e.extra_filters&&e.extra_filters.length>0,viz_type:e.viz_type,data_age:r.is_cached?a()(new Date).diff(a().utc(r.cached_dttm)):null})))),c(b(r,n))))).catch((t=>{if((0,i.G7)(i.TO.GlobalAsyncQueries))return c(I([t],n));const r=(t,r)=>{c((0,m.logEvent)(h.tO,{slice_id:n,has_err:!0,is_cached:r,error_details:t,datasource:e.datasource,start_offset:p,ts:(new Date).getTime(),duration:h.Vy.getTimestamp()-p}))};return"AbortError"===t.name?(r("abort"),c(S(n))):(0,s.h4)(t).then((e=>("timeout"===t.statusText?r("timeout"):r(e.error,e.is_cached),c(I([e],n)))))})),R=T&&e.annotation_layers||[],C=o>0;return Promise.all([A,c(G(!1,n)),c(K(e,n)),...R.map((a=>c(H({annotation:a,timeout:r,formData:e,key:n,isDashboardRequest:C,force:t}))))])}}const ne="POST_CHART_FORM_DATA";function ae(e,t=!1,r,n,a,o){return re(e,t,r,n,a,o)}function oe(e,t){return r=>{B({formData:e,resultFormat:"json",resultType:"query"}).then((({json:r})=>{const n="/sqllab/",a={datasourceKey:e.datasource,sql:r.result[0].query};t?t.push({pathname:n,state:{requestedQuery:a}}):o.A.postForm(n,{form_data:(0,y.J)(a)})})).catch((()=>r((0,p.iB)((0,l.t)("An error occurred while loading the SQL")))))}}function se(e,t,r){return(n,a)=>{var o;const s=(a().charts||{})[e],i=a().dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT;s.latestQueryFormData&&0!==Object.keys(s.latestQueryFormData).length&&n(ae(s.latestQueryFormData,t,i,s.id,r,null==(o=a().dataMask[s.id])?void 0:o.ownState))}}const ie=async(e,t,r,n,a,i)=>{try{const s={force:r,datasource_type:e,datasource_id:t};return(0,c.A)(a)&&(0,c.A)(i)&&(s.per_page=a,s.page=i),(await o.A.post({endpoint:"/datasource/samples",jsonPayload:n,searchParams:s,parseMethod:"json-bigint"})).json.result}catch(e){const t=await(0,s.h4)(e);throw new Error(t.message||t.error||(0,l.t)("Sorry, an error occurred"),{cause:e})}}},78130:(e,t,r)=>{"use strict";function n(e,t){return e().dashboardState.sliceIds.includes(t)}r.d(t,{$u:()=>o,B8:()=>u,C1:()=>c,GK:()=>l,GS:()=>d,J2:()=>s,Zg:()=>i,mg:()=>a});const a="CHANGE_FILTER";function o(e,t,r){return(o,s)=>{if(n(s,e)){const n=s().dashboardLayout.present;return o({type:a,chartId:e,newSelectedValues:t,merge:r,components:n})}return s().dashboardFilters}}const s="UPDATE_DIRECT_PATH_TO_FILTER";function i(e,t){return(r,a)=>n(a,e)?r({type:s,chartId:e,path:t}):a().dashboardFilters}const l="UPDATE_LAYOUT_COMPONENTS";function c(e){return t=>{t({type:l,components:e})}}const d="UPDATE_DASHBOARD_FILTERS_SCOPE";function u(e){return t=>{t({type:d,scopes:e})}}},92475:(e,t,r)=>{"use strict";r.d(t,{PX:()=>v,Rc:()=>b,D3:()=>f,Cl:()=>y,cL:()=>S,fD:()=>w,Yd:()=>O,jd:()=>I,NW:()=>p,YX:()=>x,a0:()=>T,zp:()=>E,$5:()=>g,zT:()=>R,lL:()=>N,nH:()=>q,gn:()=>C,$K:()=>L,m2:()=>h,qp:()=>_});var n=r(3618),a=r(95579),o=r(95272),s=r(49588),i=r(81151),l=r(67054),c=r(578),d=r(78130),u=r(72173);const p="UPDATE_COMPONENTS";function m(e){return(...t)=>(r,n)=>{const a=e(...t);r("function"==typeof a?a(r,n):a);const{dashboardLayout:o,dashboardState:s}=n();if(a.type!==p||!a.payload||!a.payload.nextComponents){const e=o.present;r((0,d.C1)(e))}s.hasUnsavedChanges||r((0,u.MR)(!0))}}const h=m((e=>({type:p,payload:{nextComponents:e}})));function _(e){return(t,r)=>{const{dashboardLayout:n}=r();t(h({[i.XY]:{...n.present[i.XY],meta:{text:e}}}))}}const f="DASHBOARD_TITLE_CHANGED";function E(e){return{type:f,text:e}}const y="DELETE_COMPONENT",g=m(((e,t)=>({type:y,payload:{id:e,parentId:t}}))),v="CREATE_COMPONENT",T=m((e=>({type:v,payload:{dropResult:e}}))),b="CREATE_TOP_LEVEL_TABS",A=m((e=>({type:b,payload:{dropResult:e}}))),S="DELETE_TOP_LEVEL_TABS",R=m((()=>({type:S,payload:{}}))),I="RESIZE_COMPONENT";function C({id:e,width:t,height:r}){return(n,a)=>{const{dashboardLayout:o}=a(),{present:s}=o,i=s[e],l=t&&i.meta.width!==t,c=r&&i.meta.height!==r;if(i&&(l||c)){const a={[e]:{...i,meta:{...i.meta,width:t||i.meta.width,height:r||i.meta.height}}};n(h(a))}}}const O="MOVE_COMPONENT",D=m((e=>({type:O,payload:{dropResult:e}}))),w="HANDLE_COMPONENT_DROP";function N(e){return(t,r)=>{const n=function(e,t){const r=(0,l.A)({dropResult:e,layout:t});return"number"==typeof r&&r<0}(e,r().dashboardLayout.present);if(n)return t((0,o.Zd)((0,a.t)("There is not enough space for this component. Try decreasing its width, or increasing the destination width.")));const{source:d,destination:u}=e,p=u&&u.id===i.wv,m=d.id===i.k0,h=r().dashboardLayout.present[i.wv],_=h&&h.children?h.children[0]:"";if(p)t(A(e));else if(u&&m)t(T(e));else{if(d.type===s.wc&&u.type===s.wc&&d.id===_&&u.id!==_)return t((0,o.Zd)((0,a.t)("Can not move top level tab into nested tabs")));u&&d&&(u.id!==d.id||u.index!==d.index)&&t(D(e))}const{dashboardFilters:f,dashboardLayout:E}=r();if(!m){const{present:e}=E,r=e[d.id]||{},n=e[u.id]||{};if((r.type===s.wc||r.type===s._8)&&r.children&&0===r.children.length){const r=(0,c.A)({childId:d.id,layout:e});t(g(d.id,r))}(function({dashboardFilters:e={},source:t=[],destination:r=[]}){const n=new Set(t),a=new Set(r);return[].concat(...Object.values(e).map((({scopes:e})=>[].concat(...Object.values(e).map((({scope:e})=>e)))))).some((e=>a.has(e)!==n.has(e)))})({dashboardFilters:f,source:(r.parents||[]).concat(d.id),destination:(n.parents||[]).concat(u.id)})&&t((0,o.Zd)((0,a.t)("This chart has been moved to a different filter scope.")))}return null}}function L(){return(e,t)=>{e(n.IE.undo());const{dashboardLayout:r,dashboardState:a}=t();0!==r.past.length||a.maxUndoHistoryExceeded||a.updatedColorScheme||e((0,u.MR)(!1))}}const q=m(n.IE.redo),x="UPDATE_COMPONENTS_PARENTS_LIST"},72173:(e,t,r)=>{"use strict";r.d(t,{r9:()=>U,pO:()=>z,im:()=>de,mk:()=>ue,_q:()=>he,u4:()=>me,sn:()=>X,m4:()=>P,Mm:()=>oe,ff:()=>ae,aj:()=>Se,Nl:()=>Ie,n2:()=>ve,qO:()=>Pe,TF:()=>be,kw:()=>V,Zh:()=>Ce,S4:()=>Ne,eZ:()=>qe,dv:()=>re,EI:()=>J,Cw:()=>q,zU:()=>fe,bY:()=>B,hL:()=>F,gH:()=>Q,Yx:()=>De,eK:()=>$,ft:()=>ye,a9:()=>le,Xk:()=>k,yG:()=>Ue,k9:()=>K,Xd:()=>pe,d1:()=>_e,t_:()=>Z,Hg:()=>ge,JA:()=>ie,cv:()=>Y,sE:()=>j,YF:()=>Re,r7:()=>Te,wh:()=>Fe,I:()=>Ae,op:()=>W,ib:()=>Oe,GM:()=>Le,G5:()=>xe,zT:()=>ne,qK:()=>ee,MR:()=>x,vd:()=>Ee,jX:()=>H,ZX:()=>we,Jr:()=>G,sC:()=>Me});var n=r(3618),a=r(58561),o=r.n(a),s=r(35742),i=r(95579),l=r(62952),c=r(27366),d=r(51436),u=r(7148),p=r(76968),m=r(2514),h=r(68458),_=r(91715),f=r(81151),E=r(83255),y=r(95272),g=r(36878),v=r(68921),T=r(12066),b=r(7735),A=r(35700),S=r(92475),R=r(48285),I=r(34975),C=r(78130),O=r(26415),D=r(73212);const w=new Set(["json_metadata","position_json"]);function N(e,t){return t.split(".").reduce(((e,t)=>{const r=null==e?void 0:e[t];return w.has(t)&&r?JSON.parse(r):r}),e)}var L=r(55556);const q="SET_UNSAVED_CHANGES";function x(e){return{type:q,payload:{hasUnsavedChanges:e}}}const U="ADD_SLICE",P="REMOVE_SLICE",F="TOGGLE_FAVE_STAR";function M(e){return{type:F,isStarred:e}}function k(e){return function(t){return s.A.get({endpoint:`/api/v1/dashboard/favorite_status/?q=${o().encode([e])}`}).then((({json:e})=>{var r,n;t(M(!(null==e||null==(r=e.result)||null==(n=r[0])||!n.value)))})).catch((()=>t((0,y.iB)((0,i.t)("There was an issue fetching the favorite status of this dashboard.")))))}}function Y(e,t){return function(r){const n=`/api/v1/dashboard/${e}/favorites/`;return(t?s.A.delete({endpoint:n}):s.A.post({endpoint:n})).then((()=>{r(M(!t))})).catch((()=>r((0,y.iB)((0,i.t)("There was an issue favoriting this dashboard.")))))}}const Q="TOGGLE_PUBLISHED";function j(e,t){return function(r){return s.A.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({published:t})}).then((()=>{r((0,y.WR)(t?(0,i.t)("This dashboard is now published"):(0,i.t)("This dashboard is now hidden"))),r(function(e){return{type:Q,isPublished:e}}(t))})).catch((()=>{r((0,y.iB)((0,i.t)("You do not have permissions to edit this dashboard.")))}))}}const B="TOGGLE_EXPAND_SLICE";function H(e){return{type:B,sliceId:e}}const $="UPDATE_CSS";function G(e){return{type:$,css:e}}const V="SET_EDIT_MODE";function W(e){return{type:V,editMode:e}}const z="ON_CHANGE";function K(){return{type:z}}const X="ON_SAVE";function Z(e){return{type:X,lastModifiedTime:e}}const J="SET_REFRESH_FREQUENCY";function ee(e,t=!1){return{type:J,refreshFrequency:e,isPersistent:t}}function te(e){return t=>{t(Z(e)),t(n.IE.clearHistory())}}const re="SET_OVERRIDE_CONFIRM";function ne(e){return{type:re,overwriteConfirmMetadata:e}}const ae="SAVE_DASHBOARD_STARTED",oe="SAVE_DASHBOARD_FINISHED";function se(){return{type:oe}}function ie(e,t,r){return(n,a)=>{var o,u,p,m,h,_,I,q,x;n({type:S.YX}),n({type:ae});const{dashboardFilters:U,dashboardLayout:P}=a(),F=P.present;Object.values(U).forEach((e=>{var t;const{chartId:r}=e,a=e.directPathToFilter.slice().pop(),o=((null==(t=F[a])?void 0:t.parents)||[]).slice();o.push(a),n((0,C.Zg)(r,o))}));const M=(0,g.A)((0,v.ug)()),k=function(e){return Object.values(e).reduce(((e,{chartId:t,scopes:r})=>({...e,[t]:Object.keys(r).reduce(((e,t)=>({...e,[t]:r[t]})),{})})),{})}(U),{certified_by:Y,certification_details:Q,css:j,dashboard_title:B,owners:H,roles:$,slug:G}=e,V=e=>void 0!==e.id,W=null==(o=e.metadata)?void 0:o.cross_filters_enabled,z={...e,certified_by:Y||"",certification_details:Y&&Q?Q:"",css:j||"",dashboard_title:B||(0,i.t)("[ untitled dashboard ]"),owners:(0,l.A)(H).map((e=>V(e)?e.id:e)),roles:(0,c.G7)(c.TO.DashboardRbac)?(0,l.A)($).map((e=>V(e)?e.id:e)):void 0,slug:G||null,metadata:{...e.metadata,color_namespace:(0,L.Z6)(null==(u=e.metadata)?void 0:u.color_namespace),color_scheme:(null==(p=e.metadata)?void 0:p.color_scheme)||"",color_scheme_domain:(null==(m=e.metadata)?void 0:m.color_scheme_domain)||[],expanded_slices:(null==(h=e.metadata)?void 0:h.expanded_slices)||{},label_colors:(null==(_=e.metadata)?void 0:_.label_colors)||{},shared_label_colors:(null==(I=e.metadata)?void 0:I.shared_label_colors)||{},refresh_frequency:(null==(q=e.metadata)?void 0:q.refresh_frequency)||0,timed_refresh_immune_slices:(null==(x=e.metadata)?void 0:x.timed_refresh_immune_slices)||[],cross_filters_enabled:(0,E.b)(W)}},K=()=>{const{dashboardLayout:e,charts:t,dashboardInfo:{metadata:r}}=a();return(0,E.k)(e.present,r,t)},X=async e=>{const{error:t,message:r}=await(0,d.h4)(e);let a=(0,i.t)("Sorry, an unknown error occurred");t&&(a=(0,i.t)("Sorry, there was an error saving this dashboard: %s",t)),"string"==typeof r&&"Forbidden"===r&&(a=(0,i.t)("You do not have permission to edit this dashboard")),n(se()),n((0,y.iB)(a))};if([f.LA,f.Fq].includes(r)){let a={},o={};(0,c.G7)(c.TO.DashboardCrossFilters)&&({chartConfiguration:a,globalChartConfiguration:o}=K());const l=r===f.Fq?e:{certified_by:z.certified_by,certification_details:z.certification_details,css:z.css,dashboard_title:z.dashboard_title,slug:z.slug,owners:z.owners,roles:z.roles,json_metadata:(0,T.J)({...(null==z?void 0:z.metadata)||{},default_filters:(0,T.J)(M),filter_scopes:k,chart_configuration:a,global_chart_configuration:o})},d=()=>s.A.put({endpoint:`/api/v1/dashboard/${t}`,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>(e=>{const r=e.json.result,a=e.json.last_modified_time;if(r.json_metadata){const e=JSON.parse(r.json_metadata);n((0,R.PD)({metadata:e})),e.chart_configuration&&n({type:R.iI,chartConfiguration:e.chart_configuration}),e.native_filter_configuration&&n({type:O.XN,filterConfig:e.native_filter_configuration})}return a&&n(te(a)),n(se()),window.history.pushState({event:"dashboard_properties_changed"},"",`/superset/dashboard/${G||t}/`),n((0,y.WR)((0,i.t)("This dashboard was saved successfully."))),n(ne(void 0)),e})(e))).catch((e=>X(e)));return new Promise(((e,a)=>{(0,c.G7)(c.TO.ConfirmDashboardDiff)&&r!==f.Fq?s.A.get({endpoint:`/api/v1/dashboard/${t}`}).then((r=>{const o=r.json.result,s=(i=o,c=l,D.Zd.map((e=>({keyPath:e,...e.split(".").find((e=>w.has(e)))?{oldValue:JSON.stringify(N(i,e),null,2)||"{}",newValue:JSON.stringify(N(c,e),null,2)||"{}"}:{oldValue:N(i,e)||"",newValue:N(c,e)||""}}))).filter((({oldValue:e,newValue:t})=>e!==t)));var i,c;return s.length>0?(n(ne({updatedAt:o.changed_on,updatedBy:o.changed_by_name,overwriteConfirmItems:s,dashboardId:t,data:l})),a(s)):e()})):e()})).then(d).catch((e=>{const r=(0,i.t)("Please confirm the overwrite values.");n((0,b.logEvent)(A.HH,{dashboard_id:t,items:e})),n((0,y.iB)(r))}))}"positions"in z&&!("positions"in z.metadata)&&(z.metadata.positions=z.positions),z.metadata.default_filters=(0,T.J)(M),z.metadata.filter_scopes=k;const Z={dashboard_title:z.dashboard_title,css:z.css,duplicate_slices:z.duplicate_slices,json_metadata:JSON.stringify(z.metadata)};return s.A.post({endpoint:`/api/v1/dashboard/${t}/copy/`,jsonPayload:Z}).then((e=>(e=>{const t=e.json.result.last_modified_time;if(t&&n(te(t)),(0,c.G7)(c.TO.DashboardCrossFilters)){const{chartConfiguration:e,globalChartConfiguration:t}=K();n((0,R.Iw)({chartConfiguration:e,globalChartConfiguration:t}))}return n(se()),n((0,y.WR)((0,i.t)("This dashboard was saved successfully."))),e})(e))).catch((e=>X(e)))}}function le(e=[],t=!1,r=0,n){return(a,o)=>{if(!r)return void e.forEach((e=>a((0,m.refreshChart)(e,t,n))));const{metadata:s}=o().dashboardInfo,i=Math.max(r,s.stagger_time||5e3);"boolean"!=typeof s.stagger_refresh&&(s.stagger_refresh=void 0===s.stagger_refresh||"true"===s.stagger_refresh);const l=s.stagger_refresh?i/(e.length-1):0;e.forEach(((e,r)=>{setTimeout((()=>a((0,m.refreshChart)(e,t,n))),l*r)}))}}const ce=(e,t,r,n,a)=>new Promise((o=>{a(le(e,t,r,n)),o()})),de="ON_FILTERS_REFRESH",ue="ON_FILTERS_REFRESH_SUCCESS";function pe(){return{type:ue}}const me="ON_REFRESH_SUCCESS",he="ON_REFRESH";function _e(e=[],t=!1,r=0,n){return a=>{a({type:he}),ce(e,t,r,n,a).then((()=>{a({type:me}),a({type:de})}))}}const fe="SHOW_BUILDER_PANE";function Ee(){return{type:fe}}function ye(e){return(t,r)=>{const{sliceEntities:n}=r(),a=n.slices[e];if(!a)return t((0,y.Zd)("Sorry, there is no chart definition associated with the chart trying to be added."));const o={...a.form_data,slice_id:a.slice_id},s={...h.b,id:e,form_data:(0,_.S7)(o)};return Promise.all([t((0,m.addChart)(s,e)),t((0,I.VZ)(o.datasource))]).then((()=>{t({type:U,slice:a})}))}}function ge(e){return t=>{t({type:P,sliceId:e}),t((0,m.removeChart)(e)),(0,u.Ay)().removeSlice(e)}}const ve="SET_COLOR_SCHEME";function Te(e){return{type:ve,colorScheme:e}}const be="SET_DIRECT_PATH";function Ae(e){return{type:be,path:e}}const Se="SET_ACTIVE_TAB";function Re(e,t){return{type:Se,tabId:e,prevTabId:t}}const Ie="SET_ACTIVE_TABS",Ce="SET_FOCUSED_FILTER_FIELD";function Oe(e,t){return{type:Ce,chartId:e,column:t}}const De="UNSET_FOCUSED_FILTER_FIELD";function we(e,t){return{type:De,chartId:e,column:t}}const Ne="SET_FULL_SIZE_CHART_ID";function Le(e){return{type:Ne,chartId:e}}const qe="SET_MAX_UNDO_HISTORY_EXCEEDED";function xe(e=!0){return{type:qe,payload:{maxUndoHistoryExceeded:e}}}function Ue(){return(e,t)=>{const{dashboardLayout:r}=t(),n=r.past.length;return e((0,y.Zd)((0,i.t)("You have used all %(historyLength)s undo slots and will not be able to fully undo subsequent actions. You may save your current state to reset the history.",{historyLength:n})))}}const Pe="SET_DATASETS_STATUS";function Fe(e){return{type:Pe,status:e}}const Me=()=>async(e,t)=>{const{dashboardInfo:{id:r,metadata:n}}=t(),a=(0,p.A)(),o=null==n?void 0:n.color_scheme,i=a.get(null==n?void 0:n.color_scheme,!0),l=a.defaultKey,c=(null==l?void 0:l.toString())||"supersetColors",d=(null==n?void 0:n.color_scheme_domain)||[];try{const t={...n};let a=null==n?void 0:n.color_scheme;o&&!i&&(a=c,t.color_scheme=a,t.color_scheme_domain=(0,L.bp)(o),e(Te(a)),(0,L.D2)(t,!0));const l=(0,L.pb)(n);l||((0,L.D2)(t,!0),t.shared_label_colors=(0,L.Bq)());const u=(0,L.bp)(o),p=d.toString()!==u.toString();o&&!p&&(t.color_scheme_domain=u),(!o||i&&p)&&l||await(async(e,t,r)=>{await s.A.put({endpoint:`/api/v1/dashboard/${e}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({json_metadata:JSON.stringify(t)})}),r((0,R.PD)({metadata:t}))})(r,t,e)}catch(e){console.error("Failed to update dashboard color settings:",e)}}},52123:(e,t,r)=>{"use strict";r.d(t,{n:()=>b,M:()=>A});var n=r(27366),a=r(68458),o=r(46074),s=r(45881),i=r(91715),l=r(68921),c=r(84666),d=r(65256),u=r(83255),p=r(81151),m=r(49588),h=r(37725),_=r(72619),f=r(27023),E=r(32132),y=r(86274),g=r(88488),v=r(54193),T=r(10504);const b="HYDRATE_DASHBOARD",A=({history:e,dashboard:t,charts:r,dataMask:A,activeTabs:S})=>(R,I)=>{const{user:C,common:O,dashboardState:D}=I(),{metadata:w,position_data:N}=t,L=(0,g.A)("regular"),q="true"===(0,g.A)("reserved").edit;r.forEach((e=>{e.slice_id=e.form_data.slice_id}));const x=N&&Object.keys(N).length>0?N:{[p.CW]:"v2",[p.wv]:{type:m.tq,id:p.wv,children:[p.mK]},[p.mK]:{type:m.$9,id:p.mK,children:[],parents:[p.wv]}},U={};Object.values(x).forEach((e=>{e.type===m.oT&&(U[e.meta.chartId]=e.id)}));const P=function(e={}){let t=e[p.wv];return t=t&&t.children.length&&e[t.children[0]].type===m.wc?e[e[t.children[0]].children[0]]:e[t.children[0]],t.id}(x),F=x[P];let M,k=0;const Y={},Q={},j={},B=new Set,H=new Map;r.forEach((e=>{const t=e.slice_id,r={...e.form_data,url_params:{...e.form_data.url_params,...L}};if(Y[t]={...a.b,id:t,form_data:(0,i.S7)(r)},j[t]={slice_id:t,slice_url:e.slice_url,slice_name:e.slice_name,form_data:e.form_data,viz_type:e.form_data.viz_type,datasource:e.form_data.datasource,description:e.description,description_markeddown:e.description_markeddown,owners:e.owners,modified:e.modified,changed_on:new Date(e.changed_on).getTime()},B.add(t),!U[t]&&x[P]){var n;(0===k||k+p.nm>p.cV)&&(M=(0,_.A)(m._8,(F.parents||[]).slice()),x[M.id]=M,F.children.push(M.id),k=0);const t=(0,_.A)(m.oT,{chartId:e.slice_id},(M.parents||[]).slice()),r=(null!=(n=H.get(e.slice_id))?n:0)+1;t.id=`${m.oT}-explore-${e.slice_id}-${r}`,H.set(e.slice_id,r),x[t.id]=t,M.children.push(t.id),U[t.meta.chartId]=t.id,k+=p.nm}const o=U[t];o&&x[o]&&(x[o].meta.sliceName=e.slice_name)})),Object.values(x).some((e=>e.id!==p.wv&&!e.parents))&&(0,v.A)({currentComponent:x[p.wv],layout:x}),(0,l.kl)({dashboardFilters:Q,components:x}),x[p.XY]={id:p.XY,type:m.KR,meta:{text:t.dashboard_title}};const $={past:[],present:x,future:[]},G=(0,E.P3)(f.vX.dashboardFocusedChart);let V;if(G){const t=Object.values($.present).find((e=>{var t;return(null==(t=e.meta)?void 0:t.chartId)===G}));V=null==t?void 0:t.id;const r=new URLSearchParams(window.location.search);r.delete(f.vX.dashboardFocusedChart.name),e.replace({search:r.toString()})}const W=V||(0,h.A)();let z=D.directPathToChild||[];x[W]&&(z=(x[W].parents||[]).slice(),z.push(W));const K=(0,s.C)({filterConfig:(null==w?void 0:w.native_filter_configuration)||[]});if((0,n.G7)(n.TO.DashboardCrossFilters)){const{chartConfiguration:e,globalChartConfiguration:t}=(0,u.k)($.present,w,Y);w.chart_configuration=e,w.global_chart_configuration=t}const{roles:X}=C,Z=(0,d.m9)(t,C),J=(0,u.b)(w.cross_filters_enabled);return R({type:b,data:{sliceEntities:{...o.o,slices:j,isLoading:!1},charts:Y,dashboardInfo:{...t,metadata:w,userId:C.userId?String(C.userId):null,dash_edit_perm:Z,dash_save_perm:(0,d.bD)(t,C),dash_share_perm:(0,c.L)("can_share_dashboard","Superset",X),superset_can_explore:(0,c.L)("can_explore","Superset",X),superset_can_share:(0,c.L)("can_share_chart","Superset",X),superset_can_csv:(0,c.L)("can_csv","Superset",X),common:{flash_messages:null==O?void 0:O.flash_messages,conf:null==O?void 0:O.conf},filterBarOrientation:(0,n.G7)(n.TO.HorizontalFilterBar)&&w.filter_bar_orientation||T.QI.Vertical,crossFiltersEnabled:J},dataMask:A,dashboardFilters:Q,nativeFilters:K,dashboardState:{preselectNativeFilters:(0,E.P3)(f.vX.nativeFilters),sliceIds:Array.from(B),directPathToChild:z,directPathLastUpdated:Date.now(),focusedFilterField:null,expandedSlices:(null==w?void 0:w.expanded_slices)||{},refreshFrequency:(null==w?void 0:w.refresh_frequency)||0,shouldPersistRefreshFrequency:!1,css:t.css||"",colorNamespace:(null==w?void 0:w.color_namespace)||null,colorScheme:(null==w?void 0:w.color_scheme)||null,editMode:Z&&q,isPublished:t.published,hasUnsavedChanges:!1,dashboardIsSaving:!1,maxUndoHistoryExceeded:!1,lastModifiedTime:t.changed_on,isRefreshing:!1,isFiltersRefreshing:!1,activeTabs:S||(null==D?void 0:D.activeTabs)||[],datasetsStatus:y.bk.Loading},dashboardLayout:$}})}},20824:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,FC:()=>l});var n=r(78130),a=r(52123),o=r(81151),s=r(68921),i=r(24647);const l={scope:[o.wv],immune:[]},c=[n.mg];function d(e={},t){const r={[n.mg](e){const{newSelectedValues:r,merge:n}=t,a=Object.keys(r).reduce(((e,t)=>n&&t in e?{...e,[t]:[...e[t],...r[t]]}:{...e,[t]:r[t]}),{...e.columns});return{...e,columns:a}},[n.J2](e){const{path:r}=t;return{...e,directPathToFilter:r}}};if(t.type===n.GK)return(0,s.kl)({dashboardFilters:e,components:t.components}),e;if(t.type===n.GS){const r=t.scopes,n=Object.entries(r).reduce(((e,t)=>{const[r,{scope:n,immune:a}]=t,{chartId:o,column:s}=(0,i.w)(r),l={...e[o].scopes,[s]:{scope:n,immune:a}};return{...e,[o]:{...e[o],scopes:l}}}),e);return(0,s.kl)({dashboardFilters:n}),n}if(t.type===a.n)return t.data.dashboardFilters;if(t.type in r){const n={...e,[t.chartId]:r[t.type](e[t.chartId])};return c.includes(t.type)&&(0,s.kl)({dashboardFilters:n}),n}return e}},46074:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,o:()=>s});var n=r(95579),a=r(80464),o=r(52123);const s={slices:{},isLoading:!0,errorMessage:null,lastUpdated:0};function i(e=s,t){const r={[o.n]:()=>({...t.data.sliceEntities}),[a.T1]:()=>({...e,isLoading:!0}),[a.ut]:()=>({...e,isLoading:!1,slices:{...e.slices,...t.payload.slices},lastUpdated:(new Date).getTime()}),[a.$G]:()=>({isLoading:!1,slices:{...t.payload.slices},lastUpdated:(new Date).getTime()}),[a.Lj]:()=>({...e,isLoading:!1,lastUpdated:(new Date).getTime(),errorMessage:t.payload.error||(0,n.t)("Could not fetch all saved charts")})};return t.type in r?r[t.type]():e}},68921:(e,t,r)=>{"use strict";r.d(t,{MB:()=>y,_i:()=>g,kl:()=>v,ug:()=>E});var n=r(8209),a=r.n(n),o=r(89899),s=r.n(o),i=r(89143),l=r.n(i),c=r(62193),d=r.n(c),u=r(24647),p=r(49588),m=r(20824);let h={},_={},f={};function E(){return h}function y(e,t){if(!(e in _)){const r=Object.entries(t||h).filter((([,{scope:t}])=>t.includes(e)));_[e]=s()(a()((([e])=>(0,u.w)(e).column)),l()((([,{values:e}])=>e)))(r)}return _[e]}function g({filterScope:e}){function t(e=[],r={},n=[]){r&&(r.type===p.oT&&r.meta&&r.meta.chartId&&!n.includes(r.meta.chartId)?e.push(r.meta.chartId):r.children&&r.children.forEach((r=>t(e,f[r],n))))}const r=[],{scope:n,immune:a}=e||m.FC;return n.forEach((e=>t(r,f[e],a))),r}function v({dashboardFilters:e={},components:t={}}){d()(t)||(f=t),_={},h=Object.values(e).reduce(((e,t)=>{const{chartId:r,columns:n,scopes:a}=t,o={};return Object.keys(n).forEach((e=>{if(Array.isArray(n[e])?n[e].length:void 0!==n[e]){const t=g({filterScope:a[e]}).filter((e=>r!==e));o[(0,u.s)({chartId:r,column:e})]={values:n[e],scope:t}}})),{...e,...o}}),{})}},67054:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(81151),a=r(578),o=r(44407),s=r(72619);function i({dropResult:e,layout:t}){const{source:r,destination:i,dragging:l}=e,c=r.id===n.k0?(0,s.A)(l.type):t[l.id]||{};if(r.id===i.id)return c.meta.width;const{width:d,minimumWidth:u}=(0,o.A)({component:c,components:t}),{width:p,occupiedWidth:m}=(0,o.A)({id:i.id,components:t});let h=Number(p-m);if(Number.isNaN(h)){const{width:e,occupiedWidth:r}=(0,o.A)({id:(0,a.A)({childId:i.id,layout:t}),components:t});h=Number(e-r)}return Number.isNaN(h)||Number.isNaN(Number(d))||h>=d?d:h>=u?h:-1}},44407:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(578),a=r(81151),o=r(49588);function s({id:e,components:t}){const r=t[e];if(!r)return 0;let n=0;return(r.children||[]).forEach((e=>{const r=t[e]||{};n+=(r.meta||{}).width||0})),n}function i({id:e,component:t,components:r={}}){const l={width:void 0,occupiedWidth:void 0,minimumWidth:void 0},c=t||r[e];return c?(l.width=(c.meta||{}).width,l.occupiedWidth=l.width,c.type===o._8?(l.width=i({id:(0,n.A)({childId:c.id,layout:r}),components:r}).width||a.cV,l.occupiedWidth=s({id:c.id,components:r}),l.minimumWidth=l.occupiedWidth||a.tK):c.type===o.QP?(l.minimumWidth=a.tK,l.occupiedWidth=0,(c.children||[]).forEach((e=>{r[e].type===o._8&&(l.minimumWidth=Math.max(l.minimumWidth,s({id:e,components:r})))}))):c.type!==o.rG&&c.type!==o.xY&&c.type!==o.oT||(l.minimumWidth=a.tK),l):l}},35043:(e,t,r)=>{"use strict";r.d(t,{aN:()=>_,S4:()=>h,Db:()=>p,Vl:()=>g,Ay:()=>v});var n=r(49588),a=r(81151);const o=a.W3+1,s=a.W3+3,i=a.W3+4,l=a.W3+5,c={[n.tq]:{[n.wc]:a.W3,[n.$9]:a.W3},[n.$9]:{[n.oT]:o,[n.rG]:o,[n.xY]:o,[n.QP]:o,[n.n6]:o,[n.PP]:o,[n._8]:o,[n.wc]:o},[n._8]:{[n.oT]:i,[n.rG]:i,[n.xY]:i,[n.QP]:i},[n.wc]:{[n.B8]:s},[n.B8]:{[n.oT]:l,[n.rG]:l,[n.xY]:l,[n.QP]:s,[n.n6]:l,[n.PP]:l,[n._8]:s,[n.wc]:s},[n.QP]:{[n.oT]:l,[n.PP]:l,[n.xY]:l,[n._8]:s,[n.n6]:s,[n.wc]:s},[n.oT]:{},[n.rG]:{},[n.n6]:{},[n.PP]:{},[n.xY]:{}};function d(e){var t;const{parentType:r,childType:n,parentDepth:a}=e;if(!r||!n||"number"!=typeof a)return!1;const o=null==(t=c[r])?void 0:t[n];return"number"==typeof o&&a<=o}const u="DROP_TOP",p="DROP_RIGHT",m="DROP_BOTTOM",h="DROP_LEFT",_="DROP_FORBIDDEN",f=20,E=20;let y={};function g(){y={}}function v(e,t){const{depth:r,parentComponent:a,component:o,orientation:s,isDraggingOverShallow:i}=t.props,l=e.getItem();if(!l||l.id===o.id)return null;const c=d({parentType:o.type,parentDepth:r,childType:l.type}),g=a&&a.type,v=d({parentType:g,parentDepth:r+(g===n.B8||g===n.wc?0:-1),childType:l.type});if(!c&&!v)return _;const T=(o.children||[]).length>0,b="row"===s?"vertical":"horizontal",A="row"===s?"horizontal":"vertical";if(c&&!v)return"vertical"===b?T?p:h:T?m:u;const S=t.ref.getBoundingClientRect(),R=e.getClientOffset()||y[o.id];if(!R||!S)return null;y[o.id]=R;const I=Math.abs(R.y-S.top),C=Math.abs(R.y-S.bottom),O=Math.abs(R.x-S.left),D=Math.abs(R.x-S.right);if(!i&&[I,C,O,D].every((e=>e>E)))return null;if(v&&!c){if("vertical"===A){const e=S.left+(S.right-S.left)/2;return R.x<e?h:p}const e=S.top+(S.bottom-S.top)/2;return R.y<e?u:m}if(v&&c){if("vertical"===A){if(O<f)return h;if(D<f)return p}else{if(I<f)return u;if(C<f)return m}return"vertical"===b?T?p:h:T?m:u}return null}},72619:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(43561),a=r(95579),o=r(49588),s=r(81151);const i={[o.oT]:{width:s.nm,height:50},[o.QP]:{width:s.nm,background:s.kn},[o.n6]:null,[o.PP]:{text:(0,a.t)("New header"),headerSize:s.W9,background:s.kn},[o.xY]:{width:s.nm,height:50},[o._8]:{background:s.kn},[o.wc]:null,[o.B8]:{text:"",defaultText:(0,a.t)("Tab title"),placeholder:(0,a.t)("Tab title")},[o.rG]:{width:s.cV,background:s.kn}};function l(e){return`${e}-${(0,n.Ak)()}`}function c(e,t,r=[]){return{type:e,id:l(e),children:[],parents:r,meta:{...i[e],...t}}}},36878:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(24647);function a(e){return Object.entries(e).reduce(((e,t)=>{const[r,{values:a}]=t,{chartId:o,column:s}=(0,n.w)(r),i={...e[o],[s]:a};return{...e,[o]:i}}),{})}},54193:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5362);function a({currentComponent:e,layout:t={}}){if(e&&t)if(t[e.id]){const r=Array.isArray(e.parents)?e.parents.slice():[];r.push(e.id),Array.isArray(e.children)&&e.children.forEach((e=>{t[e]?(t[e]={...t[e],parents:r},a({currentComponent:t[e],layout:t})):n.A.warn(`The current layout does not contain a component with the id: ${e}.  Skipping this component`)}))}else n.A.warn(`The current layout does not contain a component with the id: ${null==e?void 0:e.id}.  Skipping this component`)}},58962:(e,t,r)=>{"use strict";r.d(t,{ne:()=>g});var n=r(76968),a=r(69161),o=r(95579),s=r(82920),i=r(49953),l=r(85183),c=r(95483),d=r(84080),u=r(2445);const p=(0,n.A)(),m=(0,a.A)(),h=[["SMART_NUMBER",(0,o.t)("Adaptive formatting")],["~g",(0,o.t)("Original value")],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION",(0,o.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,o.t)("Duration in ms (100.40008 => 100ms 400s 80ns)")]],_=((0,o.t)("Adaptive formatting"),{verbose_name:"Time",column_name:"__timestamp",description:(0,o.t)("A reference to the [Time] configuration, taking granularity into account")}),f={type:"SelectControl",multi:!0,freeForm:!0,label:(0,o.t)("Dimensions"),default:[],includeTime:!1,description:(0,o.t)("One or many columns to group by. High cardinality groupings should include a series limit to limit the number of fetched and rendered series."),optionRenderer:e=>(0,u.Y)(d.V,{column:e,showType:!0}),valueKey:"column_name",filterOption:({data:e},t)=>e.column_name&&e.column_name.toLowerCase().indexOf(t.toLowerCase())>=0||e.verbose_name&&e.verbose_name.toLowerCase().indexOf(t.toLowerCase())>=0,mapStateToProps:(e,t)=>{const r={};return e.datasource&&(r.options=e.datasource.columns.filter((e=>e.groupby)),t&&t.includeTime&&r.options.push(_)),r}},E={type:"MetricsControl",multi:!0,label:(0,o.t)("Metrics"),validators:[s.A],mapStateToProps:e=>{const{datasource:t}=e;return{columns:t?t.columns:[],savedMetrics:t?t.metrics:[],datasource:t}},description:(0,o.t)("One or many metrics to display")},y={...E,multi:!1,label:(0,o.t)("Metric"),description:(0,o.t)("Metric")},g={metrics:E,metric:y,datasource:{type:"DatasourceControl",label:(0,o.t)("Dataset"),default:null,description:null,mapStateToProps:({datasource:e})=>({datasource:e,isEditable:!!e})},viz_type:{type:"VizTypeControl",default:"table",description:(0,o.t)("The type of visualization to display")},color_picker:{label:(0,o.t)("Fixed color"),description:(0,o.t)("Use this to define a static color for all circles"),type:"ColorPickerControl",default:{r:0,g:122,b:135,a:1},renderTrigger:!0},metric_2:{...y,label:(0,o.t)("Right axis metric"),clearable:!0,description:(0,o.t)("Choose a metric for right axis")},linear_color_scheme:{type:"ColorSchemeControl",label:(0,o.t)("Linear color scheme"),choices:()=>m.values().map((e=>[e.id,e.label])),default:m.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>m.getMap(),isLinear:!0},secondary_metric:{...y,label:(0,o.t)("Color metric"),default:null,validators:[],description:(0,o.t)("A metric to use for color")},groupby:f,columns:{...f,label:(0,o.t)("Columns"),description:(0,o.t)("One or many controls to pivot as columns")},granularity:{type:"SelectControl",freeForm:!0,label:c.Fp.granularity,default:"P1D",choices:[[null,(0,o.t)("all")],["PT5S",(0,o.t)("5 seconds")],["PT30S",(0,o.t)("30 seconds")],["PT1M",(0,o.t)("1 minute")],["PT5M",(0,o.t)("5 minutes")],["PT30M",(0,o.t)("30 minutes")],["PT1H",(0,o.t)("1 hour")],["PT6H",(0,o.t)("6 hour")],["P1D",(0,o.t)("1 day")],["P7D",(0,o.t)("7 days")],["P1W",(0,o.t)("week")],["week_starting_sunday",(0,o.t)("week starting Sunday")],["week_ending_saturday",(0,o.t)("week ending Saturday")],["P1M",(0,o.t)("month")],["P3M",(0,o.t)("quarter")],["P1Y",(0,o.t)("year")]],description:(0,o.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`,`1 day` or `56 weeks`")},granularity_sqla:{type:"SelectControl",label:c.Fp.granularity_sqla,description:(0,o.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),clearable:!1,optionRenderer:e=>(0,u.Y)(d.V,{column:e,showType:!0}),valueKey:"column_name",mapStateToProps:e=>{const t={};return e.datasource&&(t.choices=e.datasource.granularity_sqla,t.default=null,e.datasource.main_dttm_col?t.default=e.datasource.main_dttm_col:t.choices&&t.choices.length>0&&(t.default=t.choices[0].column_name)),t}},time_grain_sqla:{type:"SelectControl",label:c.Fp.time_grain_sqla,default:"P1D",description:(0,o.t)("The time granularity for the visualization. This applies a date transformation to alter your time column and defines a new time granularity. The options here are defined on a per database engine basis in the Superset source code."),mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla:null})},time_range:{type:"DateFilterControl",freeForm:!0,label:c.Fp.time_range,default:(0,o.t)("No filter"),description:(0,o.t)('The time range for the visualization. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.')},row_limit:{type:"SelectControl",freeForm:!0,label:(0,o.t)("Row limit"),validators:[i.A],default:1e4,choices:(0,l.u8)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,o.t)("Limits the number of rows that get displayed.")},limit:{type:"SelectControl",freeForm:!0,label:(0,o.t)("Series limit"),validators:[i.A],choices:(0,l.u8)([5,10,25,50,100,500]),clearable:!0,description:(0,o.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},timeseries_limit_metric:{type:"MetricsControl",label:(0,o.t)("Sort by"),default:null,clearable:!0,description:(0,o.t)("Metric used to define how the top series are sorted if a series or row limit is present. If undefined reverts to the first metric (where appropriate)."),mapStateToProps:e=>({columns:e.datasource?e.datasource.columns:[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource})},series:{...f,label:(0,o.t)("Dimensions"),multi:!1,default:null,description:(0,o.t)("Defines the grouping of entities. Each series is shown as a specific color on the chart and has a legend toggle")},entity:{...f,label:(0,o.t)("Entity"),default:null,multi:!1,validators:[s.A],description:(0,o.t)("This defines the element to be plotted on the chart")},x:{...y,label:(0,o.t)("X Axis"),description:(0,o.t)("Metric assigned to the [X] axis"),default:null},y:{...y,label:(0,o.t)("Y Axis"),default:null,description:(0,o.t)("Metric assigned to the [Y] axis")},size:{...y,label:(0,o.t)("Bubble size"),default:null},y_axis_format:{type:"SelectControl",freeForm:!0,label:(0,o.t)("Y Axis Format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h,description:"D3 format syntax: https://github.com/d3/d3-format",mapStateToProps:e=>{const t=e.controls&&e.controls.comparison_type&&"percentage"===e.controls.comparison_type.value;return{warning:t?(0,o.t)('When `Calculation type` is set to "Percentage change", the Y Axis Format is forced to `.1%`'):null,disabled:t}}},adhoc_filters:{type:"AdhocFilterControl",label:(0,o.t)("Filters"),default:null,description:"",mapStateToProps:e=>({columns:e.datasource?e.datasource.columns.filter((e=>e.filterable)):[],savedMetrics:e.datasource?e.datasource.metrics:[],datasource:e.datasource})},color_scheme:{type:"ColorSchemeControl",label:(0,o.t)("Color scheme"),default:p.getDefaultKey(),renderTrigger:!0,choices:()=>p.keys().map((e=>[e,e])),description:(0,o.t)("The color scheme for rendering chart"),schemes:()=>p.getMap()}}},85183:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>D,Hh:()=>A,Mp:()=>R,RY:()=>O,TL:()=>C,Xe:()=>S,Ze:()=>v,eX:()=>b,kD:()=>E,sv:()=>w,sx:()=>I,u8:()=>L,zJ:()=>N});var n=r(96540),a=r(84193),o=r.n(a),s=r(80145),i=r(81998),l=r(1889),c=r(35742),d=r(62952),u=r(93376),p=r(12066),m=r(15151),h=r(27023),_=r(95483),f=r(81151);function E(e){var t,r;const{slice:n,form_data:a}=e;return null!=(t=null!=(r=null==n?void 0:n.slice_id)?r:null==a?void 0:a.slice_id)?t:_.sO}let y=0;function g(e=!1){let t=0;return e&&(t=y%u.N.length,y+=1,0===t&&(t+=1,y+=1)),u.N[t]}function v(e,t){return null==e?null:o()(window.location.search).pathname("/api/v1/chart/data").search({form_data:(0,p.J)({slice_id:e}),force:t}).toString()}function T(e="base"){return["full","json","csv","query","results","samples"].includes(e)?"/superset/explore_json/":"/explore/"}function b(e,t={},r=!1){const n=new(o())("/"),a=T(e),s=n.search(!0);return Object.keys(t).forEach((e=>{s[e]=t[e]})),e===h.vX.standalone.name&&(r&&(s.force="1"),s.standalone=f.hL.HideNav),n.directory(a).search(s).toString()}function A({path:e,qs:t,allowDomainSharding:r=!1}){let n=new(o())({protocol:window.location.protocol.slice(0,-1),hostname:g(r),port:window.location.port?window.location.port:"",path:e});return t&&(n=n.search(t)),n}function S({formData:e,endpointType:t="base",force:r=!1,curUrl:n=null,requestParams:a={},allowDomainSharding:s=!1,method:i="POST"}){if(!e.datasource)return null;delete e.label_colors;let l=A({path:"/",allowDomainSharding:s});n&&(l=o()(o()(n).search()));const c=T(t),d=l.search(!0),{slice_id:u,extra_filters:m,adhoc_filters:_,viz_type:f}=e;if(u){const e={slice_id:u};"GET"===i&&(e.viz_type=f,m&&m.length&&(e.extra_filters=m),_&&_.length&&(e.adhoc_filters=_)),d.form_data=(0,p.J)(e)}r&&(d.force="true"),"csv"===t&&(d.csv="true"),t===h.vX.standalone.name&&(d.standalone="1"),"query"===t&&(d.query="true"),"results"===t&&(d.results="true"),"samples"===t&&(d.samples="true");const E=Object.keys(a);return E.length&&E.forEach((e=>{a.hasOwnProperty(e)&&(d[e]=a[e])})),l.search(d).directory(c).toString()}const R=e=>{var t,r;const n=(0,s.A)().get(e.viz_type);return[null!=(t=null==n?void 0:n.useLegacyApi)&&t,null!=(r=null==n?void 0:n.parseMethod)?r:"json-bigint"]},I=({formData:e,force:t,resultFormat:r,resultType:n,setDataMask:a,ownState:o})=>{var s;return(null!=(s=(0,i.A)().get(e.viz_type))?s:e=>(0,l.A)(e,(e=>[{...e}])))({...e,force:t,result_format:r,result_type:n},{ownState:o,hooks:{setDataMask:a}})},C=({resultType:e,resultFormat:t})=>"csv"===t?t:e,O=({formData:e,resultFormat:t="json",resultType:r="full",force:n=!1,ownState:a={}})=>{let o,s;const[i,l]=R(e);i?(o=S({formData:e,endpointType:C({resultFormat:t,resultType:r}),allowDomainSharding:!1}),s=e):(o="/api/v1/chart/data",s=I({formData:e,force:n,resultFormat:t,resultType:r,ownState:a,parseMethod:l})),c.A.postForm(o,{form_data:(0,p.J)(s)})},D=(e,t)=>{const r=S({formData:e,endpointType:"base",allowDomainSharding:!1,requestParams:t});c.A.postForm(r,{form_data:(0,p.J)(e)})},w=(e,t,r)=>{const a=(0,n.useCallback)(e,r);(0,n.useEffect)((()=>{const e=setTimeout((()=>{a()}),t);return()=>{clearTimeout(e)}}),[a,t])},N=(e,t,r)=>{var n;const a=[..._.sJ].map((e=>_.nS[e].operation)).indexOf(t)>=0;let o="object"==typeof e?null!=(n=null==e?void 0:e.column_name)?n:"":null!=e?e:"";if(e&&t){o+=` ${t}`;const e=a&&Array.isArray(r)?r[0]:r,n=(0,d.A)(r),s=void 0!==e&&Number.isNaN(Number(e)),i=s?"'":"",[l,c]=a?["(",")"]:["",""],u=n.map((e=>(0,m.ed)(e))).map((e=>`${i}${s?String(e).replace(/'/g,"''"):e}${i}`));n.length>0&&(o+=` ${l}${u.join(", ")}${c}`)}return o};function L(e){return e.map((e=>[e,e.toString()]))}},91715:(e,t,r)=>{"use strict";r.d(t,{Eu:()=>s,S7:()=>i});var n=r(18253),a=r(17596),o=r(58962);function s(e,t){var r;const o={...t},s=o.viz_type||(null==(r=e.common)?void 0:r.conf.DEFAULT_VIZ_TYPE)||"table";!function(e){e.y_axis_zero&&(e.y_axis_bounds=[0,null])}(o);const i=(0,a.Tb)(s,e.datasource.type,e,o),l=(0,n.A)().get(s)||{};return l.onInit?l.onInit(i):i}function i(e){const t=e.datasource.split("__")[1],r=e.viz_type,n=(0,a.Tb)(r,t,null,e),o=(0,a.LK)(n),s={};return Object.keys(n).concat(Object.keys(e)).forEach((t=>{void 0===e[t]?s[t]=o[t]:s[t]=e[t]})),s}const l={...o.ne};Object.keys(o.ne).forEach((e=>{l[e].value=o.ne[e].default})),(0,a.LK)(l)},93491:(e,t,r)=>{"use strict";r.d(t,{CM:()=>_,HR:()=>y,LQ:()=>u,PM:()=>E,Zp:()=>f,ef:()=>h,hH:()=>m,i7:()=>g,qJ:()=>d});var n=r(62193),a=r.n(n),o=r(35742),s=r(95579),i=r(58561),l=r.n(i),c=r(95272);const d="SET_REPORT";function u({userId:e,filterField:t,creationMethod:r,resourceId:n}){const a=l().encode({filters:[{col:t,opr:"eq",value:n},{col:"creation_method",opr:"eq",value:r},{col:"created_by",opr:"rel_o_m",value:e}]});return function(e){return o.A.get({endpoint:`/api/v1/report/?q=${a}`}).then((({json:a})=>{e(function(e,t,r,n){return{type:d,report:e,resourceId:t,creationMethod:r,filterField:n}}(a,n,r,t))})).catch((()=>e((0,c.iB)((0,s.t)("There was an issue fetching reports attached to this dashboard.")))))}}const p=(e,t)=>{const r=t(),{user:n,dashboardInfo:o,charts:s,explore:i}=r;if(a()(o)){var l;const[t]=Object.keys(s);e(u({userId:(null==(l=i.user)?void 0:l.userId)||(null==n?void 0:n.userId),filterField:"chart_id",creationMethod:"charts",resourceId:s[t].id}))}else e(u({userId:n.userId,filterField:"dashboard_id",creationMethod:"dashboards",resourceId:o.id}))},m="ADD_REPORT",h=e=>t=>o.A.post({endpoint:"/api/v1/report/",jsonPayload:e}).then((({json:e})=>{t({type:m,json:e}),t((0,c.WR)((0,s.t)("The report has been created")))})),_="EDIT_REPORT",f=(e,t)=>r=>o.A.put({endpoint:`/api/v1/report/${e}`,jsonPayload:t}).then((({json:e})=>{r({type:_,json:e}),r((0,c.WR)((0,s.t)("Report updated")))}));function E(e,t){return function(r){return o.A.put({endpoint:encodeURI(`/api/v1/report/${e.id}`),headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})}).catch((()=>{r((0,c.iB)((0,s.t)("We were unable to active or deactivate this report.")))})).finally((()=>{r(p)}))}}const y="DELETE_REPORT";function g(e){return function(t){return o.A.delete({endpoint:encodeURI(`/api/v1/report/${e.id}`)}).catch((()=>{t((0,c.iB)((0,s.t)("Your report could not be deleted")))})).finally((()=>{t({type:y,report:e}),t((0,c.WR)((0,s.t)("Deleted: %s",e.name)))}))}}},15151:(e,t,r)=>{"use strict";r.d(t,{Kt:()=>p,L:()=>_,PU:()=>c,UX:()=>y,bE:()=>f,ed:()=>m,fZ:()=>E,mu:()=>l,nr:()=>g,qC:()=>d});var n=r(7349),a=r(85170),o=r(35742),s=r(62952);const i="<empty string>",l="<NULL>",c="TRUE",d="FALSE",u=(0,n.mo)(a.A.DATABASE_DATETIME);function p(e){return o.A.post({endpoint:"/kv/store/",postPayload:{data:e}}).then((e=>`${window.location.origin+window.location.pathname}?id=${e.json.id}`))}function m(e){return null===e?l:""===e?i:!0===e?c:!1===e?d:"string"!=typeof e&&e.toString?e.toString():e}function h(e){return e.name||e}function _(e,t){let r=t.length?`${t.map(h).join("\t")}\n`:"";for(let n=0;n<e.length;n+=1){const a={};for(let r=0;r<t.length;r+=1){const o=h(t[r]);o in e[n]?a[r]=e[n][o]:a[r]=e[n][parseFloat(o)]}r+=`${Object.values(a).join("\t")}\n`}return r}function f(e,t){return e&&0!==e.length&&0!==(0,s.A)(t).length?e.map((e=>({...e,...t.reduce(((t,r)=>(null!==e[r]&&void 0!==e[r]&&(t[r]=u(e[r])),t)),{})}))):e}const E=()=>{},y=()=>{const{appVersion:e}=navigator;return e.includes("Win")?"Windows":e.includes("Mac")?"MacOS":e.includes("X11")?"UNIX":e.includes("Linux")?"Linux":"Unknown OS"},g=()=>{const{userAgent:e}=navigator;return e&&/^((?!chrome|android).)*safari/i.test(e)}},49501:(e,t,r)=>{"use strict";r.d(t,{RW:()=>o,tB:()=>s});var n=r(95093),a=r.n(n);const o=function(e,t,r="HH:mm:ss.SS"){const n=t-e;return a()(new Date(n)).utc().format(r)},s=function(){return a()().utc().valueOf()}},93376:(e,t,r)=>{"use strict";r.d(t,{N:()=>o,m:()=>s});var n=r(27366),a=r(38708);const o=function(){var e,t;if(!document.getElementById("app"))return[];const r=new Set([window.location.hostname]);if("1"===new URLSearchParams(window.location.search).get("disableDomainSharding"))return Array.from(r);const o=(0,a.A)();return(0,n.Aq)(o.common.feature_flags),null!=o&&null!=(e=o.common)&&null!=(t=e.conf)&&t.SUPERSET_WEBSERVER_DOMAINS&&o.common.conf.SUPERSET_WEBSERVER_DOMAINS.forEach((e=>{r.add(e)})),Array.from(r)}(),s=o.length>1},62787:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(20249),a=r.n(n),o=r(96453),s=r(95579),i=r(97689),l=r(2445);const c=o.I4.div`
  margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,d=function({certifiedBy:e,details:t,metricName:r}){const n=(0,o.DP)();return(0,l.Y)(i.A,{id:`${a()(r)}-tooltip`,title:(0,l.FD)("div",{children:[e&&(0,l.Y)(c,{children:(0,s.t)("Certified by %s",e)}),(0,l.Y)("div",{children:t})]}),children:(0,l.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"14",viewBox:"0 0 24 24",width:"14",children:(0,l.Y)("g",{children:(0,l.Y)("path",{fill:n.colors.primary.base,d:"M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7 l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z M9.38,16.01L7,13.61c-0.39-0.39-0.39-1.02,0-1.41 l0.07-0.07c0.39-0.39,1.03-0.39,1.42,0l1.61,1.62l5.15-5.16c0.39-0.39,1.03-0.39,1.42,0l0.07,0.07c0.39,0.39,0.39,1.02,0,1.41 l-5.92,5.94C10.41,16.4,9.78,16.4,9.38,16.01z"})})})})}},75827:(e,t,r)=>{"use strict";r.d(t,{K:()=>m});var n=r(96540),a=r(96453),o=r(17437),s=r(97689),i=r(31940),l=r(62787),c=r(66903),d=r(57337),u=r(2445);const p=a.I4.span`
  display: flex;
  align-items: center;
  svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`;function m({column:e,labelRef:t,showType:r=!1}){const{expression:a,column_name:m,type_generic:h}=e,_=a&&a!==m,f=_?"expression":h,[E,y]=(0,n.useState)(e.column_name),[g,v]=(0,n.useState)(e.type);return(0,n.useLayoutEffect)((()=>{y((0,c.Gw)(e,t)),v((0,c.EL)(e))}),[t,e]),(0,u.FD)(p,{children:[r&&void 0!==f&&(0,u.Y)(s.m,{id:"metric-type-tooltip",title:g,placement:"bottomRight",align:{offset:[8,-2]},children:(0,u.Y)("span",{children:(0,u.Y)(i.P,{type:f})})}),(0,u.Y)(s.m,{id:"metric-name-tooltip",title:E,children:(0,u.Y)("span",{className:"option-label column-option-label",css:e=>o.AH`
            margin-right: ${e.gridUnit}px;
          `,ref:t,children:(0,c.MQ)(e)})}),_&&(0,u.Y)(d.i,{sqlExpression:a}),e.is_certified&&(0,u.Y)(l.A,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details})]})}},31940:(e,t,r)=>{"use strict";r.d(t,{P:()=>O});var n,a=r(96453),o=r(17437),s=r(95579),i=r(87903),l=r(31566),c=r(14296),d=r(96540);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}const p=({title:e,titleId:t,...r},a)=>d.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:a,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,n||(n=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m6.988 10.809-1.031 4.84q-.276 1.3-1.16 2.126-.885.827-1.822.827-.516 0-.76-.197a.61.61 0 0 1-.242-.495.7.7 0 0 1 .152-.445q.152-.194.44-.194.18 0 .319.082a1 1 0 0 1 .243.206q.082.099.185.27l.178.292q.452-.034.77-.61.32-.573.554-1.64l1.079-5.062H4.75l.123-.534h1.13l.083-.398q.14-.68.445-1.225t.692-.925q.381-.375.864-.59.483-.213.929-.213.515 0 .758.196a.61.61 0 0 1 .244.495.73.73 0 0 1-.144.446q-.144.193-.448.193a.6.6 0 0 1-.317-.08.9.9 0 0 1-.24-.207 2 2 0 0 1-.187-.276 4 4 0 0 0-.176-.287q-.405.018-.715.534-.311.515-.562 1.716l-.13.621H8.57l-.123.534zm2.225 2.261c0-1.758.45-3.183 1.387-4.424h.713c-.694.89-1.236 2.774-1.236 4.424 0 1.66.537 3.54 1.236 4.429H10.6c-.938-1.24-1.387-2.666-1.387-4.429m5.288.957h-.078l-1.25 1.988h-.952l1.802-2.632L12.2 10.75h1.001l1.25 1.958h.078l1.236-1.958h.952l-1.787 2.598 1.811 2.666h-.996zm5.23-.952c0 1.758-.45 3.184-1.387 4.424h-.713c.693-.889 1.235-2.773 1.235-4.424 0-1.66-.537-3.54-1.235-4.429h.713c.937 1.24 1.386 2.666 1.386 4.43",clipRule:"evenodd"}))),m=(0,d.forwardRef)(p);var h;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(null,arguments)}const f=({title:e,titleId:t,...r},n)=>d.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,h||(h=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 4h-1v16h1zm3.248 8.475c0 2.343.913 3.691 2.5 3.691 1.582 0 2.49-1.338 2.49-3.677 0-2.334-.923-3.7-2.49-3.7-1.577 0-2.5 1.361-2.5 3.686M5.579 9.93V16h.879V8.954h-.874l-1.875 1.348v.928l1.792-1.3zm12.169 5.468c1.04 0 1.607-1.035 1.607-2.924 0-1.87-.577-2.915-1.607-2.915s-1.616 1.054-1.616 2.915c0 1.884.576 2.924 1.616 2.924",clipRule:"evenodd"}))),E=(0,d.forwardRef)(f);var y;function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(null,arguments)}const v=({title:e,titleId:t,...r},n)=>d.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,y||(y=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.91 16.14c-1.14 0-2.047-.671-2.047-1.843 0-1.375 1.215-1.621 2.328-1.766 1.094-.14 1.547-.117 1.547-.562 0-.778-.41-1.235-1.265-1.235-.88 0-1.36.47-1.563.907l-.875-.313c.469-1.094 1.5-1.406 2.406-1.406.766 0 2.22.219 2.22 2.125V16h-.923v-.812h-.047c-.187.39-.734.953-1.78.953m.14-.828c1.095 0 1.688-.734 1.688-1.484v-.844c-.156.188-1.203.297-1.593.344-.72.094-1.36.313-1.36 1.016 0 .64.531.969 1.266.969M9.799 16V8h.922v2.953h.078c.203-.312.562-1.031 1.734-1.031 1.516 0 2.563 1.203 2.563 3.094 0 1.906-1.047 3.109-2.547 3.109-1.157 0-1.547-.719-1.75-1.047h-.11V16zm.906-3c0 1.36.61 2.297 1.719 2.297 1.156 0 1.75-1.016 1.75-2.297 0-1.266-.578-2.25-1.75-2.25-1.125 0-1.72.906-1.72 2.25m7.684 3.125c-1.687 0-2.719-1.297-2.719-3.094 0-1.828 1.079-3.11 2.704-3.11 1.265 0 2.218.75 2.375 1.876h-.922c-.14-.547-.625-1.047-1.438-1.047-1.078 0-1.797.89-1.797 2.25 0 1.39.703 2.297 1.797 2.297.719 0 1.266-.39 1.438-1.047h.922c-.157 1.063-1.032 1.875-2.36 1.875",clipRule:"evenodd"}))),T=(0,d.forwardRef)(v);var b;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(null,arguments)}const S=({title:e,titleId:t,...r},n)=>d.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r),e?d.createElement("title",{id:t},e):null,b||(b=d.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 8h1v2h2V8h1v2h2v1h-2v2h2v1h-2v2h-1v-2h-2v2h-1v-2H8v-1h2v-2H8v-1h2zm3 5v-2h-2v2z",clipRule:"evenodd"}))),R=(0,d.forwardRef)(S);var I=r(2445);const C=a.I4.div`
  ${({theme:e})=>o.AH`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${6*e.gridUnit}px;
    height: ${6*e.gridUnit}px;
    margin-right: ${e.gridUnit}px;

    && svg {
      margin-right: 0;
      margin-left: 0;
      width: 100%;
      height: 100%;
    }
  `};
`;function O({type:e}){let t=(0,I.Y)(l.A,{"aria-label":(0,s.t)("unknown type icon")});return""===e||"expression"===e?t=(0,I.Y)(m,{"aria-label":(0,s.t)("function type icon")}):e===i.s.String?t=(0,I.Y)(T,{"aria-label":(0,s.t)("string type icon")}):e===i.s.Numeric?t=(0,I.Y)(R,{"aria-label":(0,s.t)("numeric type icon")}):e===i.s.Boolean?t=(0,I.Y)(E,{"aria-label":(0,s.t)("boolean type icon")}):e===i.s.Temporal&&(t=(0,I.Y)(c.A,{"aria-label":(0,s.t)("temporal type icon")})),(0,I.Y)(C,{children:t})}},93327:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});const n=r(96453).I4.div`
  font-weight: ${({theme:e})=>e.typography.weights.bold};
  font-size: ${({theme:e})=>e.typography.sizes.s};
  margin-bottom: ${({theme:e})=>e.gridUnit}px;
`},66537:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,W:()=>l});var n=r(20249),a=r.n(n),o=r(95579),s=r(97689),i=r(2445);function l({label:e,tooltip:t,bsStyle:r,onClick:n,icon:l="info-circle",className:c="text-muted",placement:d="right",iconsStyle:u={}}){const p=`fa fa-${l} ${c} ${r?`text-${r}`:""}`,m=(0,i.Y)("i",{role:"button","aria-label":(0,o.t)("Show info tooltip"),tabIndex:0,className:p,style:{cursor:n?"pointer":void 0,...u},onClick:n,onKeyPress:n&&(e=>{"Enter"!==e.key&&" "!==e.key||n()})});return t?(0,i.Y)(s.m,{id:`${a()(e)}-tooltip`,title:t,placement:d,children:m}):m}const c=l},82097:(e,t,r)=>{"use strict";r.d(t,{S:()=>_});var n=r(96540),a=r(96453),o=r(17437),s=r(16784),i=r(66537),l=r(31940),c=r(62787),d=r(97689),u=r(66903),p=r(57337),m=r(2445);const h=a.I4.div`
  align-items: center;
  display: flex;

  > svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`;function _({metric:e,labelRef:t,openInNewWindow:r=!1,showFormula:a=!0,showType:_=!1,shouldShowTooltip:f=!0,url:E=""}){const y=e.verbose_name||e.metric_name||e.label,g=E?(0,m.Y)("a",{href:E,target:r?"_blank":"",rel:"noreferrer",children:y}):y,v=(0,m.Y)("span",{className:"option-label metric-option-label",css:e=>o.AH`
        margin-right: ${e.gridUnit}px;
      `,ref:t,children:g}),T=e.warning_markdown||e.warning_text,[b,A]=(0,n.useState)(e.metric_name);return(0,n.useLayoutEffect)((()=>{A((0,u.I4)(e,t))}),[t,e]),(0,m.FD)(h,{className:"metric-option",children:[_&&(0,m.Y)(l.P,{type:"expression"}),f?(0,m.Y)(d.A,{id:"metric-name-tooltip",title:b,children:v}):v,a&&e.expression&&(0,m.Y)(p.i,{sqlExpression:e.expression}),e.is_certified&&(0,m.Y)(c.A,{metricName:e.metric_name,certifiedBy:e.certified_by,details:e.certification_details}),T&&(0,m.Y)(i.A,{className:"text-warning",icon:"warning",tooltip:(0,m.Y)(s.A,{source:T}),label:`warn-${e.metric_name}`,iconsStyle:{marginLeft:0}})]})}},57337:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var n=r(96540),a=r(16146),o=r(56679),s=r(96453),i=r(17437),l=r(95579),c=r(2445);const d=(0,s.I4)(o.A)`
  ${({theme:e})=>i.AH`
    color: ${e.colors.grayscale.base};
    font-size: ${e.typography.sizes.s}px;
    & svg {
      margin-left: ${e.gridUnit}px;
      margin-right: ${e.gridUnit}px;
    }
  `}
`,u=e=>{const t=(0,s.DP)(),[o,i]=(0,n.useState)(null);return(0,n.useEffect)((()=>{Promise.all([Promise.all([r.e(8096),r.e(952),r.e(1541)]).then(r.bind(r,70470)),r.e(2040).then(r.t.bind(r,72040,23))]).then((([e])=>{i((()=>e.default))}))}),[]),o?(0,c.Y)(a.A,{content:(0,c.Y)(o,{mode:"sql",value:e.sqlExpression,editorProps:{$blockScrolling:!0},setOptions:{highlightActiveLine:!1,highlightGutterLine:!1},minLines:2,maxLines:6,readOnly:!0,wrapEnabled:!0,style:{border:`1px solid ${t.colors.grayscale.light2}`,background:t.colors.secondary.light5,maxWidth:100*t.gridUnit}}),placement:"bottomLeft",arrowPointAtCenter:!0,title:(0,l.t)("SQL expression"),...e,children:(0,c.Y)(d,{})}):null}},97689:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,m:()=>i});var n=r(96453),a=r(17437),o=r(27236),s=r(2445);const i=({overlayStyle:e,color:t,...r})=>{const i=(0,n.DP)(),l=`${i.colors.grayscale.dark2}e6`;return(0,s.FD)(s.FK,{children:[(0,s.Y)(a.mL,{styles:a.AH`
          .ant-tooltip-open {
            display: inline-block;
            &::after {
              content: '';
              display: block;
            }
          }
        `}),(0,s.Y)(o.A,{overlayStyle:{fontSize:i.typography.sizes.s,lineHeight:"1.6",maxWidth:62*i.gridUnit,minWidth:30*i.gridUnit,...e},align:{offset:[0,1]},color:l||t,trigger:"hover",placement:"bottom",mouseLeaveDelay:0,...r})]})},l=i},66903:(e,t,r)=>{"use strict";r.d(t,{EL:()=>p,Gw:()=>m,I4:()=>h,MQ:()=>u});var n=r(96453),a=r(17437),o=r(95579),s=r(2445);const i=n.I4.div`
  ${({theme:e})=>a.AH`
    display: flex;
    flex-direction: column;
    font-size: ${e.typography.sizes.s}px;
    line-height: 1.2;

    &:not(:last-of-type) {
      margin-bottom: ${2*e.gridUnit}px;
    }
    &:last-of-type {
      display: -webkit-box;
      -webkit-line-clamp: 40;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  `}
`,l=n.I4.span`
  ${({theme:e})=>a.AH`
    font-weight: ${e.typography.weights.bold};
  `}
`,c=({label:e,text:t})=>(0,s.FD)(i,{children:[(0,s.Y)(l,{children:e}),(0,s.Y)("span",{children:t})]}),d=e=>{var t,r;return!!((null==e||null==(t=e.current)?void 0:t.scrollWidth)>(null==e||null==(r=e.current)?void 0:r.clientWidth))},u=e=>e.verbose_name||e.column_name,p=e=>e.type?(0,s.Y)(c,{label:(0,o.t)("Column datatype"),text:e.type.toLowerCase()}):null,m=(e,t)=>e.column_name&&e.verbose_name||e.description||d(t)?(0,s.FD)(s.FK,{children:[e.column_name&&(0,s.Y)(c,{label:(0,o.t)("Column name"),text:e.column_name}),e.verbose_name&&(0,s.Y)(c,{label:(0,o.t)("Label"),text:e.verbose_name}),e.description&&(0,s.Y)(c,{label:(0,o.t)("Description"),text:e.description})]}):null,h=(e,t)=>e.verbose_name||e.description||e.label||d(t)?(0,s.FD)(s.FK,{children:[(0,s.Y)(c,{label:(0,o.t)("Metric name"),text:e.metric_name}),(e.label||e.verbose_name)&&(0,s.Y)(c,{label:(0,o.t)("Label"),text:e.label||e.verbose_name}),e.description&&(0,s.Y)(c,{label:(0,o.t)("Description"),text:e.description})]}):null},42370:(e,t,r)=>{"use strict";r.d(t,{CE:()=>u,Fp:()=>c,Io:()=>E,Kd:()=>h,Ow:()=>_,Uz:()=>d,aO:()=>p,cA:()=>m,ov:()=>f,sH:()=>l});var n=r(95579),a=r(96627),o=r(87903),s=r(79758),i=r(36818);const l=1e5,c={time_range:(0,n.t)("Time Range"),granularity_sqla:(0,n.t)("Time Column"),time_grain_sqla:(0,n.t)("Time Grain"),granularity:(0,n.t)("Time Granularity")},d={[a.Tf]:(0,n.t)("Time")},u={verbose_name:d[a.Tf],column_name:a.Tf,type:"TIMESTAMP",type_generic:o.s.Temporal,description:(0,n.t)("A reference to the [Time] configuration, taking granularity into account")},p={column_name:a.Tf,is_dttm:!0,type:"TIMESTAMP",type_generic:o.s.Temporal},m={[s.g.Aggregate]:(0,n.t)("Aggregate"),[s.g.Raw]:(0,n.t)("Raw records")},h={sort_series_type:i.Mb.Sum,sort_series_ascending:!1},_=[[i.Mb.Name,(0,n.t)("Category name")],[i.Mb.Sum,(0,n.t)("Total value")],[i.Mb.Min,(0,n.t)("Minimum value")],[i.Mb.Max,(0,n.t)("Maximum value")],[i.Mb.Avg,(0,n.t)("Average value")]],f={sort_series_type:i.Mb.Name,sort_series_ascending:!0},E=/\d{4}-\d{2}-\d{2}/g},81163:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(17437),a=r(96453),o=r(95579),s=r(66537),i=r(97689),l=r(2445);function c({name:e,description:t,label:r,tooltipOnClick:n,onClick:a,warning:c,danger:d,leftNode:u,rightNode:p,validationErrors:m=[],renderTrigger:h=!1,hovered:_=!1,required:f=!1}){if(!r)return null;const E=m.length>0?"text-danger":"";return(0,l.FD)("div",{className:"ControlHeader",children:[(0,l.Y)("div",{className:"pull-left",children:(0,l.FD)("label",{className:"control-label",htmlFor:e,children:[u&&(0,l.Y)("span",{children:u}),(0,l.Y)("span",{role:"button",tabIndex:0,onClick:a,className:E,style:{cursor:a?"pointer":""},children:r})," ",c&&(0,l.FD)("span",{children:[(0,l.Y)(i.m,{id:"error-tooltip",placement:"top",title:c,children:(0,l.Y)("i",{className:"fa fa-exclamation-circle text-warning"})})," "]}),d&&(0,l.FD)("span",{children:[(0,l.Y)(i.m,{id:"error-tooltip",placement:"top",title:d,children:(0,l.Y)("i",{className:"fa fa-exclamation-circle text-danger"})})," "]}),m.length>0&&(0,l.FD)("span",{children:[(0,l.Y)(i.m,{id:"error-tooltip",placement:"top",title:m.join(" "),children:(0,l.Y)("i",{className:"fa fa-exclamation-circle text-danger"})})," "]}),_?(0,l.FD)("span",{children:[t&&(0,l.FD)("span",{children:[(0,l.Y)(s.W,{label:(0,o.t)("description"),tooltip:t,placement:"top",onClick:n})," "]}),h&&(0,l.FD)("span",{children:[(0,l.Y)(s.W,{label:(0,o.t)("bolt"),tooltip:(0,o.t)("Changing this control takes effect instantly"),placement:"top",icon:"bolt"})," "]})]}):null,f&&(0,l.Y)("span",{className:"text-danger m-l-4",children:(0,l.Y)("strong",{children:"*"})})]})}),p&&(0,l.Y)("div",{className:"pull-right",children:p}),(0,l.Y)("div",{className:"clearfix"})]})}const d={RadioButtonControl:function({value:e,options:t,onChange:r,...o}){const s=e||t[0][0],i=(0,a.DP)();return(0,l.FD)("div",{css:(0,n.AH)({".btn svg":{position:"relative",top:"0.2em"},".btn:focus":{outline:"none"},".control-label":{color:i.colors.grayscale.base,marginBottom:i.gridUnit},".control-label + .btn-group":{marginTop:"1px"},".btn-group .btn-default":{color:i.colors.grayscale.dark1},".btn-group .btn.active":{background:i.colors.grayscale.light4,fontWeight:i.typography.weights.bold,boxShadow:"none"}},"",""),children:[(0,l.Y)(c,{...o}),(0,l.Y)("div",{className:"btn-group btn-group-sm",children:t.map((([e,t])=>(0,l.Y)("button",{type:"button",className:"btn btn-default "+(e===s?"active":""),onClick:()=>{r(e)},children:t},JSON.stringify(e))))})]})}}},34342:(e,t,r)=>{"use strict";r.d(t,{A7:()=>T,Eg:()=>u,H7:()=>S,HF:()=>m,I2:()=>A,R2:()=>b,X5:()=>v,XL:()=>p,em:()=>f,fj:()=>g,ht:()=>h,jc:()=>E,xX:()=>y,z:()=>R,zz:()=>_});var n=r(95579),a=r(82920),o=r(36818),s=r(42370),i=r(75827),l=r(93698),c=r(23926),d=r(2445);const u={type:"DndColumnSelect",label:(0,n.t)("Dimensions"),multi:!0,freeForm:!0,clearable:!0,default:[],includeTime:!1,description:(0,n.t)("Dimensions contain qualitative values such as names, dates, or geographical data. Use dimensions to categorize, segment, and reveal the details in your data. Dimensions affect the level of detail in the view."),optionRenderer:e=>(0,d.Y)(i.K,{showType:!0,column:e}),valueRenderer:e=>(0,d.Y)(i.K,{column:e}),valueKey:"column_name",allowAll:!0,filterOption:({data:e},t)=>{var r,n;return(null==(r=e.column_name)?void 0:r.toLowerCase().includes(t.toLowerCase()))||(null==(n=e.verbose_name)?void 0:n.toLowerCase().includes(t.toLowerCase()))||!1},promptTextCreator:e=>e,mapStateToProps(e,t){var r;const n={},{datasource:a}=e;if(null!=a&&null!=(r=a.columns[0])&&r.hasOwnProperty("groupby")){const e=a.columns.filter((e=>e.groupby));null!=t&&t.includeTime&&e.unshift(s.CE),n.options=e,n.savedMetrics=a.metrics||[]}else{const e=(null==a?void 0:a.columns)||[];null!=t&&t.includeTime&&e.unshift(s.aO),n.options=e}return n},commaChoosesOption:!1},p={...u,label:(0,n.t)("Columns"),description:(0,n.t)("Add dataset columns here to group the pivot table columns.")},m={...u,label:(0,n.t)("Dimension"),multi:!1,default:null,description:(0,n.t)("Defines the grouping of entities. Each series is represented by a specific color in the chart.")},h={...u,label:(0,n.t)("Entity"),default:null,multi:!1,validators:[a.A],description:(0,n.t)("This defines the element to be plotted on the chart")},_={type:"DndFilterSelect",label:(0,n.t)("Filters"),default:[],description:"",mapStateToProps:({datasource:e,form_data:t})=>({columns:(0,o.TI)(e)?e.columns.filter((e=>e.filterable)):(null==e?void 0:e.columns)||[],savedMetrics:(0,l._)(e),selectedMetrics:t.metrics||(t.metric?[t.metric]:[]),datasource:e}),provideFormDataToProps:!0,...c.Ck},f={type:"DndMetricSelect",multi:!0,label:(0,n.t)("Metrics"),validators:[a.A],mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,l._)(e),datasource:e,datasourceType:null==e?void 0:e.type}),description:(0,n.t)("Select one or many metrics to display. You can use an aggregation function on a column or write custom SQL to create a metric.")},E={...f,multi:!1,label:(0,n.t)("Metric"),description:(0,n.t)("Select a metric to display. You can use an aggregation function on a column or write custom SQL to create a metric.")},y={...E,label:(0,n.t)("Right Axis Metric"),clearable:!0,description:(0,n.t)("Select a metric to display on the right axis")},g={type:"DndMetricSelect",label:(0,n.t)("Sort query by"),default:null,description:(0,n.t)("Orders the query result that generates the source data for this chart. If a series or row limit is reached, this determines what data are truncated. If undefined, defaults to the first metric (where appropriate)."),mapStateToProps:({datasource:e})=>({columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,l._)(e),datasource:e,datasourceType:null==e?void 0:e.type})},v={...E,label:(0,n.t)("Bubble Size"),description:(0,n.t)("Metric used to calculate bubble size"),default:null},T={...E,label:(0,n.t)("X Axis"),description:(0,n.t)("The dataset column/metric that returns the values on your chart's x-axis."),default:null},b={...E,label:(0,n.t)("Y Axis"),description:(0,n.t)("The dataset column/metric that returns the values on your chart's y-axis."),default:null},A={...E,label:(0,n.t)("Color Metric"),default:null,validators:[],description:(0,n.t)("A metric to use for color")},S={...m,...c.eX,label:s.Fp.granularity_sqla,description:(0,n.t)("The time column for the visualization. Note that you can define arbitrary expression that return a DATETIME column in the table. Also note that the filter below is applied against this column or expression"),default:e=>e.default,clearable:!1,canDelete:!1,ghostButtonText:(0,n.t)("Drop a temporal column here or click"),optionRenderer:e=>(0,d.Y)(i.K,{showType:!0,column:e}),valueRenderer:e=>(0,d.Y)(i.K,{column:e}),valueKey:"column_name"},R={...u,...c.BT}},23926:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Ck:()=>u,eX:()=>d});var n=r(95579),a=r(82920),o=r(62952),s=r(96627),i=r(67984);const l=e=>"horizontal"===(null==e?void 0:e.orientation)?{label:(0,n.t)("Y-axis"),description:(0,n.t)("Dimension to use on y-axis.")}:{label:(0,n.t)("X-axis"),description:(0,n.t)("Dimension to use on x-axis.")},c={label:e=>l(null==e?void 0:e.form_data).label,multi:!1,description:e=>l(null==e?void 0:e.form_data).description,validators:[a.A],initialValue:(e,t)=>{var r,n;if(null!=t&&null!=(r=t.form_data)&&r.granularity_sqla&&(null==(n=t.form_data)||!n.x_axis)&&(null==e||!e.value))return t.form_data.granularity_sqla},default:void 0},d={isTemporal:!0,mapStateToProps:({datasource:e})=>{const t=(0,i.W)(e);return{options:t.temporalColumns,default:t.defaultTemporalColumn}}},u={initialValue:(e,t)=>{var r,n,a,l;if(null!=t&&null!=(r=t.controls)&&null!=(n=r.time_range)&&n.value||(0,o.A)(e.value).findIndex((e=>"TEMPORAL_RANGE"===(null==e?void 0:e.operator)))>-1)return;if(null!=t&&null!=(a=t.form_data)&&a.granularity_sqla&&null!=t&&null!=(l=t.form_data)&&l.time_range)return[...(0,o.A)(e.value),{clause:"WHERE",subject:t.form_data.granularity_sqla,operator:"TEMPORAL_RANGE",comparator:t.form_data.time_range,expressionType:"SIMPLE"}];const c=(null==t?void 0:t.datasource)&&(0,i.W)(t.datasource).defaultTemporalColumn;var d,u;return c?[...(0,o.A)(e.value),{clause:"WHERE",subject:c,operator:"TEMPORAL_RANGE",comparator:(null==t||null==(d=t.common)||null==(u=d.conf)?void 0:u.DEFAULT_TIME_FILTER)||s.WC,expressionType:"SIMPLE"}]:void 0}}},54797:(e,t,r)=>{"use strict";r.d(t,{A:()=>H});var n=r(62193),a=r.n(n),o=r(76968),s=r(69161),i=r(95579),l=r(13270),c=r(96627),d=r(49953),u=r(99947),p=r(48822),m=r(62952),h=r(98229),_=r(88631),f=r(94071),E=r(42370),y=r(34342);const g=(0,o.A)(),v=(0,s.A)(),T=[5,10,25,50,100,500],b=document.getElementById("app"),{user:A}=JSON.parse((null==b?void 0:b.getAttribute("data-bootstrap"))||"{}"),S={type:"DatasourceControl",label:(0,i.t)("Datasource"),default:null,description:null,mapStateToProps:({datasource:e,form_data:t})=>({datasource:e,form_data:t,user:A})},R={type:"VizTypeControl",label:(0,i.t)("Visualization Type"),default:"table",description:(0,i.t)("The type of visualization to display")},I={type:"ColorPickerControl",label:(0,i.t)("Fixed Color"),description:(0,i.t)("Use this to define a static color for all circles"),default:{r:0,g:122,b:135,a:1},renderTrigger:!0},C={type:"ColorSchemeControl",label:(0,i.t)("Linear Color Scheme"),choices:()=>v.values().map((e=>[e.id,e.label])),default:v.getDefaultKey(),clearable:!1,description:"",renderTrigger:!0,schemes:()=>v.getMap(),isLinear:!0,mapStateToProps:e=>{var t;return{dashboardId:null==e||null==(t=e.form_data)?void 0:t.dashboardId}}},O={type:"SelectControl",freeForm:!0,label:E.Fp.granularity,default:"one day",choices:[[null,(0,i.t)("all")],["PT5S",(0,i.t)("5 seconds")],["PT30S",(0,i.t)("30 seconds")],["PT1M",(0,i.t)("1 minute")],["PT5M",(0,i.t)("5 minutes")],["PT30M",(0,i.t)("30 minutes")],["PT1H",(0,i.t)("1 hour")],["PT6H",(0,i.t)("6 hour")],["P1D",(0,i.t)("1 day")],["P7D",(0,i.t)("7 days")],["P1W",(0,i.t)("week")],["week_starting_sunday",(0,i.t)("week starting Sunday")],["week_ending_saturday",(0,i.t)("week ending Saturday")],["P1M",(0,i.t)("month")],["P3M",(0,i.t)("quarter")],["P1Y",(0,i.t)("year")]],description:(0,i.t)("The time granularity for the visualization. Note that you can type and use simple natural language as in `10 seconds`, `1 day` or `56 weeks`")},D={type:"SelectControl",label:E.Fp.time_grain_sqla,placeholder:(0,i.t)("None"),initialValue:(e,t)=>{var r,n;return(0,l.A)(t)?null!=t&&t.metadata||"time_grain_sqla"in(null!=(r=null==t?void 0:t.form_data)?r:{})?null==t||null==(n=t.form_data)?void 0:n.time_grain_sqla:"P1D":e.value},description:(0,i.t)("Select a time grain for the visualization. The grain is the time interval represented by a single point on the chart."),mapStateToProps:({datasource:e})=>({choices:(null==e?void 0:e.time_grain_sqla)||[]}),visibility:h.A},w={type:"DateFilterControl",freeForm:!0,label:E.Fp.time_range,default:c.WC,description:(0,i.t)('This control filters the whole chart based on the selected time range. All relative times, e.g. "Last month", "Last 7 days", "now", etc. are evaluated on the server using the server\'s local time (sans timezone). All tooltips and placeholder times are expressed in UTC (sans timezone). The timestamps are then evaluated by the database using the engine\'s local timezone. Note one can explicitly set the timezone per the ISO 8601 format if specifying either the start and/or end time.')},N={type:"SelectControl",freeForm:!0,label:(0,i.t)("Row limit"),clearable:!1,mapStateToProps:e=>{var t,r;return{maxValue:null==e||null==(t=e.common)||null==(r=t.conf)?void 0:r.SQL_MAX_ROW}},validators:[d.A,(e,t)=>(0,u.A)(e,(null==t?void 0:t.maxValue)||E.sH)],default:1e4,choices:(0,_.u)([10,50,100,250,500,1e3,5e3,1e4,5e4]),description:(0,i.t)("Limits the number of the rows that are computed in the query that is the source of the data used for this chart.")},L={type:"CheckboxControl",label:(0,i.t)("Sort Descending"),default:!0,description:(0,i.t)("If enabled, this control sorts the results/values descending, otherwise it sorts the results ascending."),visibility:({controls:e})=>Boolean((null==e?void 0:e.timeseries_limit_metric.value)&&!a()(null==e?void 0:e.timeseries_limit_metric.value))},q={type:"SelectControl",freeForm:!0,label:(0,i.t)("Series limit"),placeholder:(0,i.t)("None"),validators:[d.A],choices:(0,_.u)(T),clearable:!0,description:(0,i.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},x={type:"SelectControl",freeForm:!0,label:(0,i.t)("Series limit"),placeholder:(0,i.t)("None"),validators:[d.A],choices:(0,_.u)(T),description:(0,i.t)("Limits the number of series that get displayed. A joined subquery (or an extra phase where subqueries are not supported) is applied to limit the number of series that get fetched and rendered. This feature is useful when grouping by high cardinality column(s) though does increase the query complexity and cost.")},U={type:"SelectControl",freeForm:!0,label:(0,i.t)("Y Axis Format"),renderTrigger:!0,default:f.KY,choices:f.Bb,description:f.YH,tokenSeparators:["\n","\t",";"],filterOption:({data:e},t)=>e.label.includes(t)||e.value.includes(t),mapStateToProps:e=>{var t,r;return{choices:(null==(t=e.controls)||null==(r=t.comparison_type)?void 0:r.value)===p.g1.Percentage?f.Bb.filter((e=>e[0].includes("%"))):f.Bb}}},P={type:"CurrencyControl",label:(0,i.t)("Currency format"),renderTrigger:!0},F={type:"SelectControl",freeForm:!0,label:(0,i.t)("Time format"),renderTrigger:!0,default:f.EN,choices:f.lR,description:f.gb,filterOption:({data:e},t)=>e.label.includes(t)||e.value.includes(t)},M={type:"ColorSchemeControl",label:(0,i.t)("Color Scheme"),default:g.getDefaultKey(),renderTrigger:!0,choices:()=>g.keys().map((e=>[e,e])),description:(0,i.t)("The color scheme for rendering chart"),schemes:()=>g.getMap(),mapStateToProps:e=>{var t;return{dashboardId:null==e||null==(t=e.form_data)?void 0:t.dashboardId}}},k={type:"CheckboxControl",label:(0,i.t)("Match time shift color with original series"),default:!0,renderTrigger:!0,description:(0,i.t)("When unchecked, colors from the selected color scheme will be used for time shifted series"),visibility:({controls:e})=>{var t,r;return Boolean((null==e||null==(t=e.time_compare)?void 0:t.value)&&!a()(null==e||null==(r=e.time_compare)?void 0:r.value))}},Y={type:"CheckboxControl",label:(0,i.t)("Truncate Metric"),default:!0,description:(0,i.t)("Whether to truncate metrics")},Q={type:"CheckboxControl",label:(0,i.t)("Show empty columns"),default:!0,description:(0,i.t)("Show empty columns")},j={type:"HiddenControl",initialValue:(e,t)=>{var r;return Object.fromEntries((0,m.A)(null==t||null==(r=t.datasource)?void 0:r.columns).filter((e=>e.is_dttm)).map((e=>{var t;return[null!=(t=e.column_name)?t:e.name,e.is_dttm]})))}},B={type:"CheckboxControl",label:(0,i.t)("Sort by metric"),description:(0,i.t)("Whether to sort results by the selected metric in descending order.")},H={metrics:y.em,metric:y.jc,datasource:S,viz_type:R,color_picker:I,metric_2:y.xX,linear_color_scheme:C,secondary_metric:y.I2,groupby:y.Eg,columns:y.XL,granularity:O,granularity_sqla:y.H7,time_grain_sqla:D,time_range:w,row_limit:N,limit:q,timeseries_limit_metric:y.fj,orderby:y.fj,order_desc:L,series:y.HF,entity:y.ht,x:y.A7,y:y.R2,size:y.X5,y_axis_format:U,x_axis_time_format:F,adhoc_filters:y.zz,color_scheme:M,time_shift_color:k,series_columns:y.XL,series_limit:x,series_limit_metric:y.fj,legacy_order_by:y.fj,truncate_metric:Y,x_axis:y.z,show_empty_columns:Q,temporal_columns_lookup:j,currency_format:P,sort_by_metric:B}},36818:(e,t,r)=>{"use strict";r.d(t,{Mb:()=>u,TI:()=>c,Wk:()=>n,fH:()=>a,kj:()=>d,lW:()=>l,oU:()=>i,ro:()=>o,wS:()=>s});const n=e=>{var t,r;return(null==e||null==(t=e.standardizedFormData)?void 0:t.controls)&&(null==e||null==(r=e.standardizedFormData)?void 0:r.memorizedFormData)&&Array.isArray(e.standardizedFormData.controls.metrics)&&Array.isArray(e.standardizedFormData.controls.columns)};var a;!function(e){e.None="None",e.GreaterThan=">",e.LessThan="<",e.GreaterOrEqual="",e.LessOrEqual="",e.Equal="=",e.NotEqual="",e.Between="< x <",e.BetweenOrEqual=" x ",e.BetweenOrLeftEqual=" x <",e.BetweenOrRightEqual="< x "}(a||(a={}));const o=[a.Between,a.BetweenOrEqual,a.BetweenOrLeftEqual,a.BetweenOrRightEqual];function s(e){return!!e&&"column_name"in e}function i(e){return"column_name"in e&&"expression"in e&&!!e.expression}function l(e){return null!==e}function c(e){return!!e&&"columns"in e&&!("sqlEditorId"in e)}function d(e){return!!e&&"results"in e&&"sqlEditorId"in e}var u;!function(e){e.Name="name",e.Max="max",e.Min="min",e.Sum="sum",e.Avg="avg"}(u||(u={}))},94071:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>u,EN:()=>_,KY:()=>h,Q_:()=>c,YH:()=>i,gb:()=>p,lR:()=>m,s1:()=>l});var n=r(95579),a=r(32142),o=r(53682),s=r(47952);const i=(0,n.t)("D3 format syntax: https://github.com/d3/d3-format"),l=(0,n.t)('Only applies when "Label Type" is set to show values.'),c=(0,n.t)('Only applies when "Label Type" is not set to a percentage.'),d=[",d",".1s",".3s",",.1%",".2%",".3%",".4r",",.1f",",.2f",",.3f","+,","$,.2f"].map((e=>[e,`${e} (${(0,a.gV)(e).preview()})`])),u=[[o.A.SMART_NUMBER,(0,n.t)("Adaptive formatting")],["~g",(0,n.t)("Original value")],...d,["DURATION",(0,n.t)("Duration in ms (66000 => 1m 6s)")],["DURATION_SUB",(0,n.t)("Duration in ms (1.40008 => 1ms 400s 80ns)")]],p=(0,n.t)("D3 time format syntax: https://github.com/d3/d3-time-format"),m=[[s.f,(0,n.t)("Adaptive formatting")],["%d/%m/%Y","%d/%m/%Y | 14/01/2019"],["%m/%d/%Y","%m/%d/%Y | 01/14/2019"],["%Y-%m-%d","%Y-%m-%d | 2019-01-14"],["%Y-%m-%d %H:%M:%S","%Y-%m-%d %H:%M:%S | 2019-01-14 01:32:10"],["%d-%m-%Y %H:%M:%S","%d-%m-%Y %H:%M:%S | 14-01-2019 01:32:10"],["%H:%M:%S","%H:%M:%S | 01:32:10"]],h=u[0][0],_=m[0][0]},93698:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var n=r(5795);const a=e=>null!=e&&e.hasOwnProperty("metrics")?(null==e?void 0:e.metrics)||[]:n.Cq},98229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(70700);function a({controls:e}){if(null==e||!e.x_axis)return!0;const t=null==e?void 0:e.x_axis,r=null==t?void 0:t.value;return!!(0,n.q0)(r)||!!(0,n.eh)(r)&&!(null==(a=(null!=(o=null==t?void 0:t.options)?o:[]).find((e=>(null==e?void 0:e.column_name)===r)))||!a.is_dttm);var a,o}},7858:(e,t,r)=>{"use strict";r.d(t,{$:()=>s,s:()=>i});var n=r(96540),a=r(81163),o=r(54797);function s(e){return"string"==typeof e&&e in a.A?a.A[e]:e}function i(e,t={}){if("string"==typeof e&&e in o.A){const r=e;return{name:r,config:{...o.A[r],...t[r]}}}if(!e||"string"==typeof e||(0,n.isValidElement)(e))return e;if("name"in e&&"config"in e)return{...e,config:{...e.config,type:s(e.config.type)}};if("override"in e&&e.name in o.A){const{name:t,override:r}=e;return{name:t,config:{...o.A[t],...r}}}return null}},24928:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var n=r(70360),a=r(36818);const o=(0,n.A)(class{constructor(){this.controls=void 0,this.controls={metrics:[],columns:[]}}setStandardizedControls(e){if((0,a.Wk)(e)){const{controls:t}=e.standardizedFormData;this.controls={metrics:t.metrics,columns:t.columns}}}shiftMetric(){return this.controls.metrics.shift()}shiftColumn(){return this.controls.columns.shift()}popAllMetrics(){return this.controls.metrics.splice(0,this.controls.metrics.length)}popAllColumns(){return this.controls.columns.splice(0,this.controls.columns.length)}clear(){this.controls={metrics:[],columns:[]}}})},67984:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,W:()=>s});var n=r(62952),a=r(13270),o=r(36818);function s(e){const t={temporalColumns:[],defaultTemporalColumn:void 0};var r,s,i;return(0,o.TI)(e)&&(t.temporalColumns=(0,n.A)(e.columns).filter((e=>e.is_dttm))),(0,o.kj)(e)&&(t.temporalColumns=(0,n.A)(e.columns).filter((e=>e.is_dttm))),(0,o.TI)(e)&&(t.defaultTemporalColumn=e.main_dttm_col),(0,a.A)(t.defaultTemporalColumn)||(t.defaultTemporalColumn=null!=(r=null==(s=t.temporalColumns[0])?void 0:s.column_name)?r:null==(i=t.temporalColumns[0])?void 0:i.name),t}function i(e,t){const r=s(t).temporalColumns;for(let t=0;t<r.length;t+=1)if(r[t].column_name===e)return!0;return!1}},88631:(e,t,r)=>{"use strict";function n(e){return e.map((e=>Array.isArray(e)?e:[e,e.toString()]))}function a(e,t,r=1){const n=[];for(let a=e;a<=t;a+=r)n.push([a,a.toString()]);return n}r.d(t,{i:()=>a,u:()=>n})},81998:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(25373),a=r(70360);class o extends n.A{constructor(){super({name:"ChartBuildQuery",overwritePolicy:n.m.Warn})}}const s=(0,a.A)(o)},18253:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(25373),a=r(70360);class o extends n.A{constructor(){super({name:"ChartControlPanel"})}}const s=(0,a.A)(o)},80145:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(25373),a=r(70360);class o extends n.A{constructor(){super({name:"ChartMetadata",overwritePolicy:n.m.Warn})}}const s=(0,a.A)(o)},58863:(e,t,r)=>{"use strict";var n,a,o;r.d(t,{$s:()=>a,Ay:()=>c,Gw:()=>l,HE:()=>s,jW:()=>o,l7:()=>i,nS:()=>n}),function(e){e.InteractiveChart="INTERACTIVE_CHART",e.NativeFilter="NATIVE_FILTER",e.DrillToDetail="DRILL_TO_DETAIL",e.DrillBy="DRILL_BY"}(n||(n={})),function(e){e.Explore="EXPLORE",e.Dashboard="DASHBOARD",e.FilterBar="FILTER_BAR",e.FilterConfigModal="FILTER_CONFIG_MODAL",e.Embedded="EMBEDDED"}(a||(a={})),function(e){e.Deprecated="DEPRECATED",e.Featured="FEATURED"}(o||(o={}));const s={[o.Deprecated]:"This chart uses features or modules which are no longer actively maintained. It will eventually be replaced or removed.",[o.Featured]:"This chart was tested and verified, so the overall experience should be stable."},i={[o.Deprecated]:{weight:-.1},[o.Featured]:{weight:.1}};var l;!function(e){e.Category="category",e.Value="value",e.Time="time",e.Log="log"}(l||(l={}));const c={}},94963:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_NAMESPACE:()=>l,default:()=>s,getColor:()=>d,getNamespace:()=>c,getScale:()=>u});var n=r(10526),a=r(76968),o=r(72239);class s{constructor(e){this.name=void 0,this.forcedItems=void 0,this.scales=void 0,this.name=e,this.scales={},this.forcedItems={}}getScale(e){var t,r;const o=null!=(t=null!=e?e:(0,a.A)().getDefaultKey())?t:"",s=(0,a.A)().get(o);return new n.A(null!=(r=null==s?void 0:s.colors)?r:[],this.forcedItems)}setColor(e,t){return this.forcedItems[(0,o.A)(e)]=t,this}resetColors(){this.forcedItems={}}}const i={},l="GLOBAL";function c(e=l){const t=i[e];if(t)return t;const r=new s(e);return i[e]=r,r}function d(e,t,r){return c(r).getScale(t).getColor(e)}function u(e,t){return c(t).getScale(e)}},10526:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(60740),a=r(4923),o=r(72239),s=r(7148),i=r(39472),l=r(27366);class c extends a.A{constructor(e,t={}){super(((e,t,r)=>this.getColor(e,t,r))),this.originColors=void 0,this.colors=void 0,this.scale=void 0,this.forcedColors=void 0,this.labelsColorMapInstance=void 0,this.chartLabelsColorMap=void 0,this.multiple=void 0,this.originColors=e,this.colors=e,this.chartLabelsColorMap=new Map,this.labelsColorMapInstance=(0,s.Ay)(),this.multiple=0,this.scale=(0,n.A)(),this.scale.range(e),Object.entries(t).forEach((([r,n])=>{"number"==typeof n&&(t[r]=e[n%e.length])})),this.forcedColors=t}incrementColorRange(){const e=Math.floor(this.domain().length/this.originColors.length);if(e>this.multiple){this.multiple=e;const t=(0,i.yG)(this.originColors,e),r=this.originColors.concat(t);this.range(r),this.colors=r}}getColor(e,t,r){var n;const a=(0,o.A)(e),s=null==(n=this.forcedColors)?void 0:n[a],i=this.chartLabelsColorMap.has(a);let c=s||this.scale(a);return s||i||((0,l.G7)(l.TO.UseAnalagousColors)&&this.incrementColorRange(),(0,l.G7)(l.TO.AvoidColorsCollision)&&this.isColorUsed(c)&&(c=this.getNextAvailableColor(c))),this.chartLabelsColorMap.set(a,c),t&&this.labelsColorMapInstance.addSlice(a,c,t,r),c}isColorUsed(e){return this.getColorUsageCount(e)>0}getColorUsageCount(e){let t=0;return this.chartLabelsColorMap.forEach((r=>{r===e&&(t+=1)})),t}getNextAvailableColor(e){const t=this.colors.map((e=>({color:e,count:this.getColorUsageCount(e)}))),r=this.getColorUsageCount(e),n=t.filter((t=>t.color!==e)),a=n.every((e=>e.count>=r));return!n.length||a?e:n.reduce(((e,t)=>t.count<e.count?t:e)).color}setColor(e,t){return this.forcedColors[(0,o.A)(e)]=t,this}getColorMap(){const e={};return this.scale.domain().forEach((t=>{e[t.toString()]=this.scale(t)})),{...e,...this.forcedColors}}copy(){const e=new c(this.scale.range(),this.forcedColors);return e.forcedColors={...this.forcedColors},e.domain(this.domain()),e.unknown(this.unknown()),e}domain(e){return void 0===e?this.scale.domain():(this.scale.domain(e),this)}range(e){return void 0===e?this.scale.range():(this.colors=e,this.scale.range(e),this)}unknown(e){return void 0===e?this.scale.unknown():(this.scale.unknown(e),this)}}const d=c},7148:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>s,fH:()=>o,iw:()=>n});var n,a=r(70360);!function(e){e[e.Dashboard=0]="Dashboard",e[e.Explore=1]="Explore"}(n||(n={}));class o{constructor(){this.chartsLabelsMap=void 0,this.colorMap=void 0,this.source=void 0,this.chartsLabelsMap=new Map,this.colorMap=new Map,this.source=n.Dashboard}updateColorMap(e,t){const r=new Map;this.colorMap.clear(),this.chartsLabelsMap.forEach(((n,a)=>{const{labels:o,scheme:s}=n,i=t||s,l=e.getScale(i);o.forEach((e=>{const t=l.getColor(e,a);r.set(e,t)}))})),this.colorMap=r}getColorMap(){return this.colorMap}addSlice(e,t,r,a){if(this.source!==n.Dashboard)return;const o=this.chartsLabelsMap.get(r)||{labels:[],scheme:""},{labels:s}=o;s.includes(e)||(s.push(e),this.chartsLabelsMap.set(r,{labels:s,scheme:a})),this.colorMap.set(e,t)}removeSlice(e){if(this.source!==n.Dashboard)return;this.chartsLabelsMap.delete(e);const t=new Map;this.chartsLabelsMap.forEach((e=>{const{labels:r}=e;r.forEach((e=>{t.set(e,this.colorMap.get(e))}))})),this.colorMap=t}clear(){this.chartsLabelsMap.clear(),this.colorMap.clear()}}const s=(0,a.A)(o)},72239:(e,t,r)=>{"use strict";function n(e){return String(e).trim()}r.d(t,{A:()=>n})},39472:(e,t,r)=>{"use strict";r.d(t,{E2:()=>c,OB:()=>s,Ob:()=>d,o3:()=>l,yG:()=>i});var n=r(87021),a=r.n(n);const o=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/;function s(e,t=186){let r=0,n=0,a=0;if(e.length>7){const t=o.exec(e);if(!t)throw new Error(`Invalid color: ${e}`);r=parseInt(t[1],10),n=parseInt(t[2],10),a=parseInt(t[3],10)}else{let t=e;if(t.startsWith("#")&&(t=t.substring(1)),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]].join("")),6!==t.length)throw new Error(`Invalid color: ${e}`);r=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16)}return.299*r+.587*n+.114*a>t?"#000":"#FFF"}function i(e,t){const r=[],n=e.map((e=>a()(e).analogous(t+3).slice(3)));for(;null!=(o=n[n.length-1])&&o.length;){var o;n.forEach((e=>{const t=e.shift();r.push(t.toHexString())}))}return r}function l(e,t){if(t>1||t<0)throw new Error(`The opacity should between 0 and 1, but got: ${t}`);return`${e}${`0${Math.round(255*t).toString(16).toUpperCase()}`.slice(-2)}`}function c(e){let t="0",r="0",n="0";return 4===e.length?(t=`0x${e[1]}${e[1]}`,r=`0x${e[2]}${e[2]}`,n=`0x${e[3]}${e[3]}`):7===e.length&&(t=`0x${e[1]}${e[2]}`,r=`0x${e[3]}${e[4]}`,n=`0x${e[5]}${e[6]}`),`rgb(${+t}, ${+r}, ${+n})`}function d(e,t,r){let n=e.toString(16),a=t.toString(16),o=r.toString(16);return 1===n.length&&(n=`0${n}`),1===a.length&&(a=`0${a}`),1===o.length&&(o=`0${o}`),`#${n}${a}${o}`}},16784:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(56449),a=r.n(n),o=r(6924),s=r.n(o),i=r(96540),l=r(63142),c=r(2952),d=r(41552),u=r(27366),p=r(2445);const m=function({source:e,htmlSanitization:t=!0,htmlSchemaOverrides:n={}}){const o=(0,u.G7)(u.TO.EscapeMarkdownHtml),[m,h]=(0,i.useState)(null),[_,f]=(0,i.useState)(null);(0,i.useEffect)((()=>{Promise.all([r.e(5337).then(r.bind(r,65337)),r.e(8026).then(r.bind(r,78026))]).then((([e,t])=>{h((()=>e.default)),f((()=>t.default))}))}),[]);const E=(0,i.useMemo)((()=>{const e=[];if(!o&&m&&(e.push(m),t)){const t=function(e,t){return s()(e,t,((e,t)=>a()(e)?e.concat(t):void 0))}(l.j,n);e.push([c.A,t])}return e}),[o,t,n,m]);return _&&m?(0,p.Y)(_,{rehypePlugins:E,remarkPlugins:[d.A],skipHtml:!1,transformLinkUri:null,children:e}):null}},83505:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(96540);function a(e,t){const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}},37827:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,P:()=>a});var n=r(96540);const a={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},o=()=>{const[e,t]=(0,n.useState)(!0),r=(0,n.useRef)(null),[a,o]=(0,n.useState)(0),[s,i]=(0,n.useState)(0);return(0,n.useEffect)((()=>{var e,t,n,a;o(null!=(e=null==(t=r.current)?void 0:t.offsetWidth)?e:0),i(null!=(n=null==(a=r.current)?void 0:a.scrollWidth)?n:0)})),(0,n.useEffect)((()=>{t(a<s)}),[a,s]),[r,e]}},44711:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=class{constructor(e){this.name="TypedRegistry",this.records=void 0,this.records=e}get(e){return this.records[e]}set(e,t){this.records[e]=t}}},83942:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5795);class a{constructor(e){this.id=void 0,this.type=void 0;const[t,r]=e.split("__");this.id=parseInt(t,10),this.type=n.cT.Table,this.type="query"===r?n.cT.Query:this.type}toString(){return`${this.id}__${this.type}`}toObject(){return{id:this.id,type:this.type}}}},1889:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(26632),a=r(83942),o=r(96590),s=r(38677);const i=e=>[e];function l(e,t){const{queryFields:r,buildQuery:l=i}="function"==typeof t?{buildQuery:t,queryFields:{}}:t||{};let c=l((0,n.A)(e,r));return c.forEach((e=>{Array.isArray(e.post_processing)&&(e.post_processing=e.post_processing.filter(Boolean))})),(0,s.aj)(e)&&(c=c.map((t=>(0,o.j)(e,t)))),{datasource:new a.A(e.datasource).toObject(),force:e.force||!1,queries:c,form_data:e,result_format:e.result_format||"json",result_type:e.result_type||"full"}}},26632:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(91778),a=r(808),o=r(39131);function s(e){let t=e;return e.includes("--")&&(t=`${e}\n`),`(${t})`}var i=r(46302),l=r(96627),c=r(13270);function d(e,t){var r,d;const{annotation_layers:u=[],extra_form_data:p,time_range:m,since:h,until:_,row_limit:f,row_offset:E,order_desc:y,limit:g,timeseries_limit_metric:v,granularity:T,url_params:b={},custom_params:A={},series_columns:S,series_limit:R,series_limit_metric:I,...C}=e,{adhoc_filters:O=[],filters:D=[],custom_form_data:w={},...N}=p||{},L=Number(f),q=Number(E),{metrics:x,columns:U,orderby:P}=(0,i.A)(C,t),F=function(e){const t={},r=[],n={},a={filters:r,extras:n,applied_time_extras:t},o={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity"};return(e.extra_filters||[]).forEach((e=>{if(e.col in o){const r=e.col;a[o[r]]=e.val,t[r]=e.val}else r.push(e)})),n.time_grain_sqla=a.time_grain_sqla||e.time_grain_sqla,a.granularity=a.granularity_sqla||e.granularity||e.granularity_sqla,delete a.granularity_sqla,delete a.time_grain_sqla,a}(e),{filters:M}=F,k={filters:[...M,...D],adhoc_filters:[...e.adhoc_filters||[],...O]},Y=function(e){const{adhoc_filters:t,extras:r={},filters:n=[],where:i}=e,l=n,c=[];i&&c.push(i);const d=[];return(t||[]).forEach((e=>{const{clause:t}=e;if((0,a.md)(e)){const r=(0,o.A)(e);"WHERE"===t&&l.push(r)}else{const{sqlExpression:r}=e;"WHERE"===t?c.push(r):d.push(r)}})),r.having=d.map(s).join(" AND "),r.where=c.map(s).join(" AND "),{filters:l,extras:r}}({...e,...F,...k});let Q={time_range:m||void 0,since:h||void 0,until:_||void 0,granularity:T||void 0,...F,...Y,columns:U,metrics:x,orderby:P,annotation_layers:u,row_limit:null==f||Number.isNaN(L)?void 0:L,row_offset:null==E||Number.isNaN(q)?void 0:q,series_columns:S,series_limit:null!=R?R:(0,c.A)(g)?Number(g):0,series_limit_metric:null!=(r=null!=(d=(e=>{if((0,n.Pr)(e))return e})(I))?d:v)?r:void 0,order_desc:void 0===y||y,url_params:b||void 0,custom_params:A};return Q=function(e,t){const r={...e},{extras:n={}}=r;return Object.entries(l.DV).forEach((([e,n])=>{const a=t[e];void 0!==a&&(r[n]=a)})),l.KE.forEach((e=>{e in t&&(n[e]=t[e])})),Object.keys(n).length>0&&(r.extras=n),r}(Q,N),{...Q,custom_form_data:w}}},96627:(e,t,r)=>{"use strict";r.d(t,{DV:()=>i,E_:()=>l,KE:()=>o,Tf:()=>n,WC:()=>a,t1:()=>s,zk:()=>c});const n="__timestamp",a="No filter",o=["relative_start","relative_end","time_grain_sqla"],s=["adhoc_filters","filters","interactive_groupby","interactive_highlight","interactive_drilldown","custom_form_data"],i={granularity:"granularity",granularity_sqla:"granularity",time_column:"time_column",time_grain:"time_grain",time_range:"time_range"},l=Object.keys(i),c=[...l,...o]},39131:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(808);function a(e){const{subject:t}=e;if((0,n.TI)(e)){const{operator:r}=e;return{col:t,op:r}}if((0,n.bo)(e)){const{operator:r}=e;return{col:t,op:r,val:e.comparator}}const{operator:r}=e;return{col:t,op:r,val:e.comparator}}},46302:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(95579),a=r(64389),o=r(86444),s=r(36770),i=r(79758);function l(e,t){const r={metric:"metrics",metric_2:"metrics",secondary_metric:"metrics",x:"metrics",y:"metrics",size:"metrics",all_columns:"columns",series:"groupby",order_by_cols:"orderby",...t},{query_mode:l,...c}=e;let d=[],u=[],p=[];return Object.entries(c).forEach((([e,t])=>{if(null==t)return;let n=r[e]||e;l===i.g.Aggregate&&"columns"===n||(l!==i.g.Raw||"groupby"!==n&&"metrics"!==n)&&("groupby"===n&&(n="columns"),"metrics"===n?u=u.concat(t):"columns"===n?d=d.concat(t):"orderby"===n&&(p=p.concat(t)))})),{columns:(0,a.A)(d.filter((e=>""!==e)),o.A),metrics:l===i.g.Raw?void 0:(0,a.A)(u,s.A),orderby:p.length>0?p.map((e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){throw new Error((0,n.t)("Found invalid orderby options"))}return e})):void 0}}},51436:(e,t,r)=>{"use strict";r.d(t,{A8:()=>c,ER:()=>h,bY:()=>l,ei:()=>u,h4:()=>m,hi:()=>_,io:()=>p,q2:()=>d});var n=r(58642),a=r(95579),o=r(1639),s=r(69108);const i={400:"Bad request",401:"Unauthorized",402:"Payment required",403:"Forbidden",404:"Not found",405:"Method not allowed",406:"Not acceptable",407:"Proxy authentication required",408:"Request timeout",409:"Conflict",410:"Gone",411:"Length required",412:"Precondition failed",413:"Payload too large",414:"URI too long",415:"Unsupported media type",416:"Range not satisfiable",417:"Expectation failed",418:"I'm a teapot",500:"Server error",501:"Not implemented",502:"Bad gateway",503:"Service unavailable",504:"Gateway timeout",505:"HTTP version not supported",506:"Variant also negotiates",507:"Insufficient storage",508:"Loop detected",510:"Not extended",511:"Network authentication required",599:"Network error"};function l(e){return!(0,n.Eo)(e)&&(0,n.fE)(e)}function c(e){if(l(e)){for(const[t,r]of Object.entries(i))if(new RegExp(`${t}|${r}`,"i").test(e))return(0,a.t)(r);return(0,a.t)("Unknown error")}return e}function d(e){return i[e]||null}function u(e,t){return("status"in t?d(t.status):null)||c(e)}function p(e){let t={...e};var r,n,s;(t.errors&&t.errors.length>0&&(t.error=t.description=t.errors[0].message,t.link=null==(r=t.errors[0])||null==(n=r.extra)?void 0:n.link),!t.error&&t.message)&&("object"==typeof t.message&&(t.error=(null==(s=Object.values(t.message)[0])?void 0:s[0])||(0,a.t)("Invalid input")),"string"==typeof t.message&&(l(t.message)?t.error=u(t.message,t):t.error=t.message));return t.stack?t={...t,error:(0,a.t)("Unexpected error: ")+(t.description||(0,a.t)("(no description, click to see stack trace)")),stacktrace:t.stack}:t.responseText&&t.responseText.indexOf("CSRF")>=0&&(t={...t,error:(0,a.t)(o.HL.SESSION_TIMED_OUT)}),{...t,error:t.error}}function m(e){return new Promise((t=>{if("string"==typeof e)return void t({error:c(e)});if(e instanceof TypeError&&"Failed to fetch"===e.message)return void t({error:(0,a.t)("Network error")});if("timeout"in e&&"statusText"in e&&"timeout"===e.statusText)return void t({...e,error:(0,a.t)("Request timed out"),errors:[{error_type:s.eK.FRONTEND_TIMEOUT_ERROR,extra:{timeout:e.timeout/1e3,issue_codes:[{code:1e3,message:(0,a.t)("Issue 1000 - The dataset is too large to query.")},{code:1001,message:(0,a.t)("Issue 1001 - The database is under an unusual load.")}]},level:"error",message:"Request timed out"}]});const r=e instanceof Response?e:e.response;if(r&&!r.bodyUsed)return void r.clone().json().then((e=>{const{url:n,status:a,statusText:o,redirected:s,type:i}=r,l={...e,url:n,status:a,statusText:o,redirected:s,type:i};t(p(l))})).catch((()=>{r.text().then((e=>{t({...r,error:u(e,r)})}))}));let n=e.statusText||e.message;n||(console.error("non-standard error:",e),n=(0,a.t)("An error occurred")),t({...r,error:c(n)})}))}async function h(e,t){const{error:r,message:n}=await m(e);let o=(0,a.t)("Sorry, an unknown error occurred.");return r&&(o=(0,a.t)("Sorry, there was an error saving this %s: %s",t,r)),"string"==typeof n&&"Forbidden"===n&&(o=(0,a.t)("You do not have permission to edit this %s",t)),o}function _(e,t){let r=e;const n=(null==t?void 0:t.message)||(null==t?void 0:t.error);return n&&(r=`${r}:\n${n}`),r}},86444:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(70700);function a(e){return(0,n.eh)(e)?e:null!=e&&e.label?e.label:null==e?void 0:e.sqlExpression}},36770:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(91778);function a(e){return(0,n.S_)(e)?e:e.label?e.label:(0,n.IN)(e)?`${e.aggregate}(${e.column.columnName||e.column.column_name})`:e.sqlExpression}},38677:(e,t,r)=>{"use strict";r.d(t,{Od:()=>i,aj:()=>s,yj:()=>l});var n=r(70700),a=r(96627),o=r(86444);const s=e=>(0,n.x$)(e.x_axis),i=e=>{if(e.granularity_sqla||e.x_axis)return s(e)?e.x_axis:a.Tf},l=e=>{const t=i(e);if(t)return(0,o.A)(t)}},96590:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var n=r(90179),a=r.n(n),o=r(70700),s=r(38677);function i(e,t){if(!(0,s.aj)(e))return t;const{columns:r,extras:n}=t,i=[...r||[]],l=null==r?void 0:r.findIndex((t=>(0,o.eh)(t)&&(0,o.eh)(e.x_axis)&&t===e.x_axis||(0,o.q0)(t)&&(0,o.q0)(e.x_axis)&&t.sqlExpression===e.x_axis.sqlExpression));if(void 0!==l&&l>-1&&e.x_axis&&Array.isArray(r)){(0,o.q0)(r[l])?i[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",...r[l]}:i[l]={timeGrain:null==n?void 0:n.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:e.x_axis,label:e.x_axis,expressionType:"SQL"};const s=a()(t,["is_timeseries"]);return s.columns=i,s}return t}},48822:(e,t,r)=>{"use strict";var n,a;r.d(t,{AA:()=>n,Ay:()=>o,g1:()=>a}),function(e){e.Mean="mean",e.Sum="sum",e.Std="std",e.Cumsum="cumsum"}(n||(n={})),function(e){e.Values="values",e.Difference="difference",e.Percentage="percentage",e.Ratio="ratio"}(a||(a={}));const o={}},70700:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e}function a(e){return"string"!=typeof e&&void 0!==(null==e?void 0:e.sqlExpression)&&void 0!==(null==e?void 0:e.label)&&(void 0===(null==e?void 0:e.expressionType)||"SQL"===(null==e?void 0:e.expressionType))}function o(e){return n(e)||a(e)}r.d(t,{Ay:()=>s,eh:()=>n,q0:()=>a,x$:()=>o});const s={}},73992:(e,t,r)=>{"use strict";var n,a;function o(e){return e.type===n.NativeFilter}function s(e){var t,r;return o(e)&&(null==(t=e.dataMask)||null==(r=t.filterState)?void 0:r.value)}function i(e){return e.type===n.Divider}r.d(t,{Ay:()=>l,EH:()=>n,O2:()=>i,ee:()=>s,p_:()=>a,qQ:()=>o}),function(e){e.NativeFilter="NATIVE_FILTER",e.Divider="DIVIDER"}(n||(n={})),function(e){e.NativeFilters="nativeFilters",e.CrossFilters="crossFilters"}(a||(a={}));const l={}},5795:(e,t,r)=>{"use strict";var n;r.d(t,{Ay:()=>o,Cq:()=>a,cT:()=>n}),function(e){e.Table="table",e.Query="query",e.Dataset="dataset",e.SlTable="sl_table",e.SavedQuery="saved_query"}(n||(n={}));const a=[{metric_name:"COUNT(*)",expression:"COUNT(*)"}],o={}},808:(e,t,r)=>{"use strict";r.d(t,{M6:()=>l,TI:()=>s,bo:()=>i,md:()=>a,wF:()=>o});var n=r(57246);function a(e){return"SIMPLE"===e.expressionType}function o(e){return"SQL"===e.expressionType}function s(e){return(0,n.Gq)(e.operator)}function i(e){return(0,n.UH)(e.operator)}function l(e){return(0,n.jy)(e.operator)}},91778:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e}function a(e){return"string"!=typeof e&&"SIMPLE"===(null==e?void 0:e.expressionType)}function o(e){return"string"!=typeof e&&"SQL"===(null==e?void 0:e.expressionType)}function s(e){return n(e)||a(e)||o(e)}r.d(t,{Ay:()=>i,IN:()=>a,Pr:()=>s,S_:()=>n,WL:()=>o});const i={}},57246:(e,t,r)=>{"use strict";r.d(t,{Gq:()=>a,UH:()=>s,jy:()=>l});const n=new Set(["IS NOT NULL","IS NULL"]);function a(e){return n.has(e)}const o=new Set(["==","!=",">","<",">=","<=","ILIKE","LIKE","NOT LIKE","REGEX","TEMPORAL_RANGE"]);function s(e){return o.has(e)}const i=new Set(["IN","NOT IN"]);function l(e){return i.has(e)}},69108:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>h,Hk:()=>s,P7:()=>l,PA:()=>m,X:()=>u,aW:()=>p,eK:()=>o,hd:()=>d,kZ:()=>i,tG:()=>c});var n=r(5795),a=r(87903);const o={FRONTEND_CSRF_ERROR:"FRONTEND_CSRF_ERROR",FRONTEND_NETWORK_ERROR:"FRONTEND_NETWORK_ERROR",FRONTEND_TIMEOUT_ERROR:"FRONTEND_TIMEOUT_ERROR",GENERIC_DB_ENGINE_ERROR:"GENERIC_DB_ENGINE_ERROR",COLUMN_DOES_NOT_EXIST_ERROR:"COLUMN_DOES_NOT_EXIST_ERROR",TABLE_DOES_NOT_EXIST_ERROR:"TABLE_DOES_NOT_EXIST_ERROR",SCHEMA_DOES_NOT_EXIST_ERROR:"SCHEMA_DOES_NOT_EXIST_ERROR",CONNECTION_INVALID_USERNAME_ERROR:"CONNECTION_INVALID_USERNAME_ERROR",CONNECTION_INVALID_PASSWORD_ERROR:"CONNECTION_INVALID_PASSWORD_ERROR",CONNECTION_INVALID_HOSTNAME_ERROR:"CONNECTION_INVALID_HOSTNAME_ERROR",CONNECTION_PORT_CLOSED_ERROR:"CONNECTION_PORT_CLOSED_ERROR",CONNECTION_INVALID_PORT_ERROR:"CONNECTION_INVALID_PORT_ERROR",CONNECTION_HOST_DOWN_ERROR:"CONNECTION_HOST_DOWN_ERROR",CONNECTION_ACCESS_DENIED_ERROR:"CONNECTION_ACCESS_DENIED_ERROR",CONNECTION_UNKNOWN_DATABASE_ERROR:"CONNECTION_UNKNOWN_DATABASE_ERROR",CONNECTION_DATABASE_PERMISSIONS_ERROR:"CONNECTION_DATABASE_PERMISSIONS_ERROR",CONNECTION_MISSING_PARAMETERS_ERROR:"CONNECTION_MISSING_PARAMETERS_ERROR",OBJECT_DOES_NOT_EXIST_ERROR:"OBJECT_DOES_NOT_EXIST_ERROR",SYNTAX_ERROR:"SYNTAX_ERROR",CONNECTION_DATABASE_TIMEOUT:"CONNECTION_DATABASE_TIMEOUT",VIZ_GET_DF_ERROR:"VIZ_GET_DF_ERROR",UNKNOWN_DATASOURCE_TYPE_ERROR:"UNKNOWN_DATASOURCE_TYPE_ERROR",FAILED_FETCHING_DATASOURCE_INFO_ERROR:"FAILED_FETCHING_DATASOURCE_INFO_ERROR",TABLE_SECURITY_ACCESS_ERROR:"TABLE_SECURITY_ACCESS_ERROR",DATASOURCE_SECURITY_ACCESS_ERROR:"DATASOURCE_SECURITY_ACCESS_ERROR",DATABASE_SECURITY_ACCESS_ERROR:"DATABASE_SECURITY_ACCESS_ERROR",QUERY_SECURITY_ACCESS_ERROR:"QUERY_SECURITY_ACCESS_ERROR",MISSING_OWNERSHIP_ERROR:"MISSING_OWNERSHIP_ERROR",USER_ACTIVITY_SECURITY_ACCESS_ERROR:"USER_ACTIVITY_SECURITY_ACCESS_ERROR",DASHBOARD_SECURITY_ACCESS_ERROR:"DASHBOARD_SECURITY_ACCESS_ERROR",CHART_SECURITY_ACCESS_ERROR:"CHART_SECURITY_ACCESS_ERROR",OAUTH2_REDIRECT:"OAUTH2_REDIRECT",OAUTH2_REDIRECT_ERROR:"OAUTH2_REDIRECT_ERROR",BACKEND_TIMEOUT_ERROR:"BACKEND_TIMEOUT_ERROR",DATABASE_NOT_FOUND_ERROR:"DATABASE_NOT_FOUND_ERROR",MISSING_TEMPLATE_PARAMS_ERROR:"MISSING_TEMPLATE_PARAMS_ERROR",INVALID_TEMPLATE_PARAMS_ERROR:"INVALID_TEMPLATE_PARAMS_ERROR",RESULTS_BACKEND_NOT_CONFIGURED_ERROR:"RESULTS_BACKEND_NOT_CONFIGURED_ERROR",DML_NOT_ALLOWED_ERROR:"DML_NOT_ALLOWED_ERROR",INVALID_CTAS_QUERY_ERROR:"INVALID_CTAS_QUERY_ERROR",INVALID_CVAS_QUERY_ERROR:"INVALID_CVAS_QUERY_ERROR",SQLLAB_TIMEOUT_ERROR:"SQLLAB_TIMEOUT_ERROR",RESULTS_BACKEND_ERROR:"RESULTS_BACKEND_ERROR",ASYNC_WORKERS_ERROR:"ASYNC_WORKERS_ERROR",ADHOC_SUBQUERY_NOT_ALLOWED_ERROR:"ADHOC_SUBQUERY_NOT_ALLOWED_ERROR",INVALID_SQL_ERROR:"INVALID_SQL_ERROR",GENERIC_COMMAND_ERROR:"GENERIC_COMMAND_ERROR",GENERIC_BACKEND_ERROR:"GENERIC_BACKEND_ERROR",INVALID_PAYLOAD_FORMAT_ERROR:"INVALID_PAYLOAD_FORMAT_ERROR",INVALID_PAYLOAD_SCHEMA_ERROR:"INVALID_PAYLOAD_SCHEMA_ERROR",MARSHMALLOW_ERROR:"MARSHMALLOW_ERROR",REPORT_NOTIFICATION_ERROR:"REPORT_NOTIFICATION_ERROR"},s={TABLE:"TABLE",VIEW:"VIEW"};var i;!function(e){e.Started="started",e.Stopped="stopped",e.Failed="failed",e.Pending="pending",e.Running="running",e.Scheduled="scheduled",e.Success="success",e.Fetching="fetching",e.TimedOut="timed_out"}(i||(i={}));const l=[i.Running,i.Started,i.Pending,i.Fetching,i.Scheduled],c=[i.Stopped,i.Failed,i.Success,i.TimedOut],d={id:"clientId2353",dbId:1,sql:"SELECT * FROM something",sqlEditorId:"dfsadfs",tab:"unimportant",tempTable:"",ctas:!1,cached:!1,errorMessage:null,extra:{progress:null},isDataPreview:!1,progress:0,resultsKey:null,state:i.Success,tempSchema:null,trackingUrl:null,templateParams:null,rows:42,queryLimit:100,limitingFactor:"",endDttm:1476910579693,duration:"",startDttm:1476910566092.96,time:{},user:{},userId:1,db:{},started:"",querylink:{},queryId:1,executedSql:"",output:"",actions:{},type:n.cT.Query,columns:[{column_name:"Column 1",type:"STRING",is_dttm:!1,type_generic:a.s.String},{column_name:"Column 3",type:"STRING",is_dttm:!1,type_generic:a.s.String},{column_name:"Column 2",type:"TIMESTAMP",is_dttm:!0,type_generic:a.s.Temporal}]},u={results:{displayLimitReached:!1,columns:[{column_name:"Column 1",type:"STRING",type_generic:a.s.String,is_dttm:!1},{column_name:"Column 3",type:"STRING",type_generic:a.s.String,is_dttm:!1},{column_name:"Column 2",type:"TIMESTAMP",type_generic:a.s.Temporal,is_dttm:!0}],data:[{"Column 1":"a","Column 2":"b","Column 3":"2014-11-11T00:00:00"}],expanded_columns:[],selected_columns:[{column_name:"Column 1",type:"STRING",type_generic:a.s.String,is_dttm:!1},{column_name:"Column 3",type:"STRING",type_generic:a.s.String,is_dttm:!1},{column_name:"Column 2",type:"TIMESTAMP",type_generic:a.s.Temporal,is_dttm:!0}],query:{limit:6}}},p={...d,...u};var m;!function(e){e.Row="row",e.Column="column"}(m||(m={}));const h={}},79758:(e,t,r)=>{"use strict";var n;r.d(t,{A:()=>a,g:()=>n}),function(e){e.Aggregate="aggregate",e.Raw="raw"}(n||(n={}));const a={}},87903:(e,t,r)=>{"use strict";var n;r.d(t,{A:()=>a,s:()=>n}),function(e){e[e.Numeric=0]="Numeric",e[e.String=1]="String",e[e.Temporal=2]="Temporal",e[e.Boolean=3]="Boolean"}(n||(n={}));const a={}},81550:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,W:()=>n});const n=/(\d{4}-\d{2}-\d{2})[\sT](\d{2}:\d{2}:\d{2}\.?\d*).*/;function a(e){const t=e.match(n);return t?`${t[1]}T${t[2]}Z`:e}},72391:(e,t,r)=>{"use strict";r.d(t,{a:()=>s});var n=r(44711),a=r(70360);class o extends n.A{constructor(...e){super(...e),this.name="ExtensionsRegistry"}}const s=(0,a.A)(o,{})},62952:(e,t,r)=>{"use strict";function n(e){return null==e?[]:Array.isArray(e)?e:[e]}r.d(t,{A:()=>n})},58642:(e,t,r)=>{"use strict";r.d(t,{Eo:()=>p,Id:()=>i,Vi:()=>m,fE:()=>l,nn:()=>d,pU:()=>c,pn:()=>s,zF:()=>u});var n=r(34005),a=r(2445);const o=new n.FilterXSS({whiteList:{...(0,n.getDefaultWhiteList)(),span:["style","class","title"],div:["style","class"],a:["style","class","href","title","target"],img:["style","class","src","alt","title","width","height"],video:["autoplay","controls","loop","preload","src","height","width","muted"]},stripIgnoreTag:!0,css:!1});function s(e){return o.process(e)}function i(e){return/<(html|head|body|div|span|a|p|h[1-6]|title|meta|link|script|style)/i.test(e)}function l(e){const t=e.trim().toLowerCase();if(t.startsWith("<!doctype html>")&&i(t))return!0;const r=(new DOMParser).parseFromString(t,"text/html");return Array.from(r.body.childNodes).some((({nodeType:e})=>1===e))}function c(e){return l(e)?s(e):e}function d(e){return l(e)?(0,a.Y)("span",{className:"safe-html-wrapper",dangerouslySetInnerHTML:{__html:s(e)}}):e}function u(e){return e.replace(/<[^>]*>/g,"")}function p(e){try{return JSON.parse(e),!0}catch(e){return!1}}function m(e){if(!l(e))return null;const t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("p");if(0===t.length)return null;const r={};return t.forEach(((e,t)=>{r[`p${t+1}`]=e.textContent||""})),r}},13270:(e,t,r)=>{"use strict";function n(e){return null!=e}r.d(t,{A:()=>n})},64389:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=function(e,t){if(t){const r=new Set;return e.filter((e=>{const n=t(e);return!r.has(n)&&(r.add(n),!0)}))}return[...new Set(e)]}},49953:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(95579);function a(e){return!(!e||!Number.isNaN(Number(e))&&parseInt(e,10)===Number(e))&&(0,n.t)("is expected to be an integer")}},99947:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(95579);function a(e,t){return Number(e)>+t&&(0,n.t)("Value cannot exceed %s",t)}},82920:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(95579);function a(e){return!!(null==e||""===e||Array.isArray(e)&&0===e.length)&&(0,n.t)("cannot be empty")}},94500:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>y,qM:()=>E});var n=r(96540),a=r(61225),o=r(5362),s=r(71086),i=r.n(s),l=r(39829);const c=r(43031).F.injectEndpoints({endpoints:e=>({updateSqlEditorTab:e.mutation({query:({queryEditor:{version:e=l.N0,id:t,dbId:r,catalog:n,schema:a,queryLimit:o,sql:s,name:c,latestQueryId:d,hideLeftBar:u,templateParams:p,autorun:m,updatedAt:h},extra:_})=>({method:"PUT",endpoint:encodeURI(`/tabstateview/${t}`),postPayload:i()({database_id:r,catalog:n,schema:a,sql:s,label:c,query_limit:o,latest_query_id:d,template_params:p,hide_left_bar:u,autorun:m,extra_json:JSON.stringify({updatedAt:h,version:e,..._})},(e=>void 0!==e))})}),updateCurrentSqlEditorTab:e.mutation({query:e=>({method:"POST",endpoint:encodeURI(`/tabstateview/${e}/activate`),transformResponse:()=>e})}),deleteSqlEditorTab:e.mutation({query:e=>({method:"DELETE",endpoint:encodeURI(`/tabstateview/${e}`),transformResponse:()=>e})})})}),{useUpdateSqlEditorTabMutation:d,useUpdateCurrentSqlEditorTabMutation:u,useDeleteSqlEditorTabMutation:p}=c;var m=r(84248),h=r(74680),_=r(86963);const f=5e3;function E(e,t,r){return e.map((e=>({...e,...t.id===e.id&&t}))).filter((e=>function(e,t){return e.inLocalStorage||e.updatedAt&&e.updatedAt>t}(e,r)))}const y=()=>{const e=(0,a.d4)((e=>e.sqlLab.queryEditors)),t=(0,a.d4)((e=>e.sqlLab.unsavedQueryEditor)),r=(0,a.d4)((e=>e.sqlLab.editorTabLastUpdatedAt)),s=(0,a.wA)(),i=(0,n.useRef)(r),l=(0,a.d4)((({sqlLab:e})=>e.tabHistory.slice(-1)[0]||"")),c=(0,a.d4)((({sqlLab:e})=>e.lastUpdatedActiveTab)),y=(0,a.d4)((({sqlLab:e})=>e.destroyedQueryEditors)),[g,{error:v}]=d(),[T]=u(),[b]=p(),A=(0,m.Q)(t,f),S=(0,_.A)((t=>E(e,t,i.current))),R=(0,_.A)((()=>E(e,t,i.current).find((({inLocalStorage:e})=>Boolean(e))))),I=(0,_.A)((()=>{var t;!l||l===c||null!=(t=e.find((({id:e})=>e===l)))&&t.inLocalStorage||T(l).then((()=>{s((0,h.setLastUpdatedActiveTab)(l))}))})),C=(0,_.A)((()=>{Object.keys(y).length>0&&Object.keys(y).forEach((e=>{b(e).then((()=>{s((0,h.clearDestoryedQueryEditor)(e))})).catch((({status:t})=>{404===t&&s((0,h.clearDestoryedQueryEditor)(e))}))}))}));return(0,n.useEffect)((()=>{let e;const t=setInterval(I,f);e=setTimeout((function t(){const r=R();r&&s((0,h.syncQueryEditor)(r)),e=setTimeout(t,f)}),f);const r=setInterval(C,f);return()=>{clearTimeout(e),clearInterval(t),clearInterval(r)}}),[R,I,C,s]),(0,n.useEffect)((()=>{const e=S(A);Promise.all(e.filter((({inLocalStorage:e})=>!e)).map((e=>g({queryEditor:e})))).then((e=>{e.some((e=>"error"in e))||(i.current=Date.now(),s((0,h.setEditorTabLastUpdate)(i.current)))}))}),[A,S,s,g]),(0,n.useEffect)((()=>{v&&o.A.warn("An error occurred while saving your editor state.",v)}),[s,v]),null}},67553:(e,t,r)=>{"use strict";r.d(t,{$V:()=>f,A7:()=>E,B8:()=>l,Cq:()=>S,GJ:()=>b,K8:()=>o,Ml:()=>v,QJ:()=>T,T_:()=>I,W8:()=>i,b:()=>p,cD:()=>_,d$:()=>d,de:()=>O,du:()=>m,e3:()=>C,fq:()=>u,lI:()=>R,oL:()=>c,pO:()=>g,sA:()=>a,sC:()=>A,tR:()=>h,v9:()=>D,wc:()=>y,yZ:()=>s});var n=r(95579);const a={offline:"danger",failed:"danger",pending:"info",fetching:"info",running:"warning",stopped:"danger",success:"success"},o={offline:(0,n.t)("offline"),failed:(0,n.t)("failed"),pending:(0,n.t)("pending"),fetching:(0,n.t)("fetching"),running:(0,n.t)("running"),stopped:(0,n.t)("stopped"),success:(0,n.t)("success")},s={success:"success",failed:"failed",running:"running",offline:"offline",pending:"pending"},i={success:(0,n.t)("success"),failed:(0,n.t)("failed"),running:(0,n.t)("running"),offline:(0,n.t)("offline"),pending:(0,n.t)("pending")},l=5,c=3,d=51,u=400,p=10,m=30,h=70,_=2e3,f=600,E=100,y=1024,g=2,v=864e5,T=5120,b=1024,A=.9,S=8e3,R=100,I=90,C=60,O=55,D=50},55045:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(95579),a=r(39829);function o(e){return e.reduce(((e,t)=>e.slice(-1)[0]===t?e:e.concat(t)),[])}function s({common:e,active_tab:t,tab_state_ids:r=[],databases:s,queries:i,...l}){let c={};const d={version:a.N0,loaded:!0,name:(0,n.t)("Untitled query"),sql:"",latestQueryId:null,autorun:!1,dbId:e.conf.SQLLAB_DEFAULT_DBID,queryLimit:e.conf.DEFAULT_SQLLAB_LIMIT,hideLeftBar:!1,remoteId:null,cursorPosition:{row:0,column:0}};let u={};r.forEach((({id:e,label:r})=>{let n;var o,s,i,l;n=t&&t.id===e?{version:null!=(o=null==(s=t.extra_json)?void 0:s.version)?o:a.AU.V1,id:e.toString(),loaded:!0,name:t.label,sql:t.sql||"",selectedText:void 0,latestQueryId:t.latest_query?t.latest_query.id:null,remoteId:(null==(i=t.saved_query)?void 0:i.id)||null,autorun:Boolean(t.autorun),templateParams:t.template_params||void 0,dbId:t.database_id,catalog:t.catalog,schema:t.schema,queryLimit:t.query_limit,hideLeftBar:t.hide_left_bar,updatedAt:null==(l=t.extra_json)?void 0:l.updatedAt}:{...d,id:e.toString(),loaded:!1,name:r,dbId:void 0},c={...c,[n.id]:n}}));const p=t?[t.id.toString()]:[];let m=t?t.id.toString():"",h={},_=Date.now();var f;t&&(_=(null==(f=t.extra_json)?void 0:f.updatedAt)||_,t.table_schemas.filter((e=>null!==e.description)).forEach((e=>{const{dataPreviewQueryId:t,...r}=e.description,n={dbId:e.database_id,queryEditorId:e.tab_state_id.toString(),catalog:e.catalog,schema:e.schema,name:e.table,expanded:e.expanded,id:e.id,dataPreviewQueryId:t,persistData:r,initialized:!0};h={...h,[n.id]:n}})));const E={...i,...(null==t?void 0:t.latest_query)&&{[t.latest_query.id]:t.latest_query}},y={};try{const e=localStorage.getItem("redux"),t=e?JSON.parse(e):void 0;if(e&&null!=t&&t.sqlLab){const{sqlLab:e}=t;if(0===e.queryEditors.length)localStorage.removeItem("redux");else{u=e.unsavedQueryEditor||u,e.queryEditors.forEach((e=>{var t,r;const n=Boolean(c[e.id]),a=null==(t=c[e.id])?void 0:t.updatedAt,o=e.updatedAt&&(!a||e.updatedAt>a),s=!n||o?e:{};c={...c,[e.id]:{...c[e.id],...s,name:s.title||s.name||(null==(r=c[e.id])?void 0:r.name),...s.id&&u.id===e.id&&u,inLocalStorage:!n,loaded:!0}}}));const t=new Set;e.tables&&(h=e.tables.reduce(((e,r)=>{const n=!t.has(r.queryEditorId);return n&&t.add(r.queryEditorId),{...e,[r.id]:{...h[r.id],...r,expanded:n,inLocalStorage:!0}}}),h)),e.queries&&Object.values(e.queries).forEach((e=>{E[e.id]={...e,inLocalStorage:!0}})),e.tabHistory&&p.push(...e.tabHistory),m=p.slice(p.length-1)[0]||"",e.destroyedQueryEditors&&Object.entries(e.destroyedQueryEditors).forEach((([e,t])=>{c[e]&&(y[e]=t,delete c[e])}))}}}catch(e){}return{sqlLab:{activeSouthPaneTab:"Results",alerts:[],databases:s,offline:!1,queries:Object.fromEntries(Object.entries(E).map((([e,t])=>[e,{...t,...t.startDttm&&{startDttm:Number(t.startDttm)},...t.endDttm&&{endDttm:Number(t.endDttm)}}]))),queryEditors:Object.values(c),tabHistory:o(p),tables:Object.values(h),queriesLastUpdate:Date.now(),editorTabLastUpdatedAt:_,queryCostEstimates:{},unsavedQueryEditor:u,lastUpdatedActiveTab:m,destroyedQueryEditors:y},localStorageUsageInKilobytes:0,common:e,...l}}},39829:(e,t,r)=>{"use strict";var n;r.d(t,{AU:()=>n,N0:()=>a,V0:()=>s,lr:()=>o}),function(e){e[e.V1=1]="V1"}(n||(n={}));const a=n.V1;var o;!function(e){e[e.SaveNew=1]="SaveNew",e[e.OverwriteDataset=2]="OverwriteDataset"}(o||(o={}));const s={metrics:[],groupby:[],time_range:"No filter",row_limit:1e3}},85278:(e,t,r)=>{"use strict";r.d(t,{Rm:()=>p,eM:()=>d,ib:()=>c,wX:()=>u});var n=r(44383),a=r.n(n),o=r(42242),s=r(67553);const i=new Set(["version","remoteId","autorun","dbId","height","id","latestQueryId","northPercent","queryLimit","schema","selectedText","southPercent","sql","templateParams","name","hideLeftBar"]);function l(e){var t;const{startDttm:r,results:n}=e;return Date.now()-r>s.Ml||((null==(t=JSON.stringify(n))?void 0:t.length)||0)*s.pO/s.wc>s.GJ}function c(e){return e.map((e=>a()(e,["id","name","dbId","schema","dataPreviewQueryId","queryEditorId"]))).filter((({queryEditorId:e})=>Boolean(e)))}function d(e){return Object.keys(e).reduce(((t,r)=>{const{results:n}=e[r];return{...t,[r]:{...e[r],results:l(e[r])?{}:n}}}),{})}function u(e){return e.map((e=>Object.keys(e).filter((e=>i.has(e))).reduce(((t,r)=>({...t,[r]:e[r]})),{})))}function p(e,t){t.sqlLab.tables.forEach((({name:t,catalog:r,schema:n,dbId:a,persistData:s})=>{a&&n&&t&&null!=s&&s.columns&&(e(o.z7.upsertQueryData("tableMetadata",{dbId:a,catalog:r,schema:n,table:t},s)),e(o.z7.upsertQueryData("tableExtendedMetadata",{dbId:a,catalog:r,schema:n,table:t},{})))}))}},46920:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(17437),a=r(96540),o=r(31357),s=r(46942),i=r.n(s),l=r(50400),c=r(96453),d=r(19129),u=r(2445);function p(e){const{tooltip:t,placement:r,disabled:s=!1,buttonSize:p,buttonStyle:m,className:h,cta:_,children:f,href:E,showMarginRight:y=!0,...g}=e,v=(0,c.DP)(),{colors:T,transitionTiming:b,borderRadius:A,typography:S}=v,{primary:R,grayscale:I,success:C,warning:O,error:D}=T;let w=32,N=18;"xsmall"===p?(w=22,N=5):"small"===p&&(w=30,N=10);let L=R.light4,q=(0,o.jh)(.1,R.base,R.light4),x=(0,o.jh)(.25,R.base,R.light4),U=I.light2,P=R.dark1,F=P,M=0,k="none",Y="transparent",Q="transparent",j="transparent";"primary"===m?(L=R.base,q=R.dark1,x=(0,o.jh)(.2,I.dark2,R.dark1),P=I.light5,F=P):"tertiary"===m||"dashed"===m?(L=I.light5,q=I.light5,x=I.light5,U=I.light5,M=1,k="dashed"===m?"dashed":"solid",Y=R.dark1,Q=R.light1,j=I.light2):"danger"===m?(L=D.base,q=(0,o.jh)(.1,I.light5,D.base),x=(0,o.jh)(.2,I.dark2,D.base),P=I.light5,F=P):"warning"===m?(L=O.base,q=(0,o.jh)(.1,I.dark2,O.base),x=(0,o.jh)(.2,I.dark2,O.base),P=I.light5,F=P):"success"===m?(L=C.base,q=(0,o.jh)(.1,I.light5,C.base),x=(0,o.jh)(.2,I.dark2,C.base),P=I.light5,F=P):"link"===m&&(L="transparent",q="transparent",x="transparent",F=R.base);const B=f;let H=[];H=B&&B.type===a.Fragment?a.Children.toArray(B.props.children):a.Children.toArray(f);const $=y&&H.length>1?2*v.gridUnit:0,G=(0,u.Y)(l.A,{href:s?void 0:E,disabled:s,className:i()(h,"superset-button",`superset-button-${m}`,{cta:!!_}),css:(0,n.AH)({display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1.5715,fontSize:S.sizes.s,fontWeight:S.weights.bold,height:w,padding:`0px ${N}px`,transition:`all ${b}s`,minWidth:_?36*v.gridUnit:void 0,minHeight:_?8*v.gridUnit:void 0,boxShadow:"none",borderWidth:M,borderStyle:k,borderColor:Y,borderRadius:A,color:P,backgroundColor:L,"&:hover":{color:F,backgroundColor:q,borderColor:Q},"&:active":{color:P,backgroundColor:x},"&:focus":{color:P,backgroundColor:L,borderColor:Y},"&[disabled], &[disabled]:hover":{color:I.base,backgroundColor:"link"===m?"transparent":U,borderColor:"link"===m?"transparent":j,pointerEvents:"none"},marginLeft:0,"& + .superset-button":{marginLeft:2*v.gridUnit},"& > :first-of-type":{marginRight:$}},"",""),...g,children:f});return t?(0,u.Y)(d.m,{placement:r,title:t,children:s?(0,u.Y)("span",{css:(0,n.AH)({cursor:"not-allowed","& > .superset-button":{marginLeft:2*v.gridUnit}},"",""),children:G}):G}):G}},68458:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,b:()=>p});var n=r(90179),a=r.n(n),o=r(95579),s=r(52123),i=r(34975),l=r(17596),c=r(91522),d=r(49501),u=r(2514);const p={id:0,chartAlert:null,chartStatus:"loading",chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:{},sliceFormData:null,queryController:null,queriesResponse:null,triggerQuery:!0,lastRendered:0};function m(e={},t){const r={[u.ADD_CHART]:()=>({...p,...t.chart}),[u.CHART_UPDATE_SUCCEEDED]:e=>({...e,chartStatus:"success",chartAlert:null,queriesResponse:t.queriesResponse,chartUpdateEndTime:(0,d.tB)()}),[u.CHART_UPDATE_STARTED]:e=>({...e,chartStatus:"loading",chartStackTrace:null,chartAlert:null,chartUpdateEndTime:null,chartUpdateStartTime:(0,d.tB)(),queryController:t.queryController}),[u.CHART_UPDATE_STOPPED]:e=>({...e,chartStatus:"stopped",chartAlert:(0,o.t)("Updating chart was stopped"),chartUpdateEndTime:(0,d.tB)()}),[u.CHART_RENDERING_SUCCEEDED]:e=>({...e,chartStatus:"rendered",chartUpdateEndTime:(0,d.tB)()}),[u.CHART_RENDERING_FAILED]:e=>({...e,chartStatus:"failed",chartStackTrace:t.stackTrace,chartAlert:(0,o.t)("An error occurred while rendering the visualization: %s",t.error)}),[u.CHART_UPDATE_FAILED](e){var r,n,a,s;return{...e,chartStatus:"failed",chartAlert:t.queriesResponse?null==(r=t.queriesResponse)||null==(n=r[0])?void 0:n.error:(0,o.t)("Network error."),chartUpdateEndTime:(0,d.tB)(),queriesResponse:t.queriesResponse,chartStackTrace:t.queriesResponse?null==(a=t.queriesResponse)||null==(s=a[0])?void 0:s.stacktrace:null}},[u.DYNAMIC_PLUGIN_CONTROLS_READY]:e=>({...e,sliceFormData:(0,l.LK)(t.controlsState)}),[u.TRIGGER_QUERY]:e=>({...e,triggerQuery:t.value,chartStatus:"loading"}),[u.RENDER_TRIGGERED]:e=>({...e,lastRendered:t.value}),[u.UPDATE_QUERY_FORM_DATA]:e=>({...e,latestQueryFormData:t.value}),[u.ANNOTATION_QUERY_STARTED](e){var r;null!=(r=e.annotationQuery)&&r[t.annotation.name]&&e.annotationQuery[t.annotation.name].abort();const n={...e.annotationQuery,[t.annotation.name]:t.queryController};return{...e,annotationQuery:n}},[u.ANNOTATION_QUERY_SUCCESS](e){const r={...e.annotationData,[t.annotation.name]:t.queryResponse.data},n={...e.annotationError};delete n[t.annotation.name];const a={...e.annotationQuery};return delete a[t.annotation.name],{...e,annotationData:r,annotationError:n,annotationQuery:a}},[u.ANNOTATION_QUERY_FAILED](e){const r={...e.annotationData};delete r[t.annotation.name];const n={...e.annotationError,[t.annotation.name]:t.queryResponse?t.queryResponse.error:(0,o.t)("Network error.")},a={...e.annotationQuery};return delete a[t.annotation.name],{...e,annotationData:r,annotationError:n,annotationQuery:a}}};if(t.type===u.REMOVE_CHART)return a()(e,[t.key]);if(t.type===u.UPDATE_CHART_ID){const{newId:r,key:n}=t;return e[r]={...e[n],id:r},delete e[n],e}return t.type===s.n||t.type===c.W?{...t.data.charts}:t.type===i.p3.SetDatasources?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,"failed"===t.chartStatus&&t.chartStackTrace?{...t,chartStatus:"",chartStackTrace:null,chartAlert:null}:t]))):t.type in r?{...e,[t.key]:r[t.type](e[t.key])}:e}},19966:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(96540),a=r(95579),o=r(19129),s=r(5261),i=r(73135),l=r(2445);const c={copyNode:(0,l.Y)("span",{children:(0,a.t)("Copy")}),onCopyEnd:()=>{},shouldShowText:!0,wrapped:!0,tooltipText:(0,a.t)("Copy to clipboard"),hideTooltip:!1};var d={name:"8irbms",styles:"display:inline-flex;align-items:center"};class u extends n.Component{constructor(e){super(e),this.copyToClipboard=this.copyToClipboard.bind(this),this.onClick=this.onClick.bind(this)}onClick(){this.props.getText?this.props.getText((e=>{this.copyToClipboard(Promise.resolve(e))})):this.copyToClipboard(Promise.resolve(this.props.text||""))}getDecoratedCopyNode(){return(0,n.cloneElement)(this.props.copyNode,{style:{cursor:"pointer"},onClick:this.onClick})}copyToClipboard(e){(0,i.A)((()=>e)).then((()=>{this.props.addSuccessToast((0,a.t)("Copied to clipboard!"))})).catch((()=>{this.props.addDangerToast((0,a.t)("Sorry, your browser does not support copying. Use Ctrl / Cmd + C!"))})).finally((()=>{this.props.onCopyEnd&&this.props.onCopyEnd()}))}renderTooltip(e){return(0,l.Y)(l.FK,{children:this.props.hideTooltip?this.getDecoratedCopyNode():(0,l.Y)(o.m,{id:"copy-to-clipboard-tooltip",placement:"topRight",style:{cursor:e},title:this.props.tooltipText||"",trigger:["hover"],arrowPointAtCenter:!0,children:this.getDecoratedCopyNode()})})}renderNotWrapped(){return this.renderTooltip("pointer")}renderLink(){return(0,l.FD)("span",{css:d,children:[this.props.shouldShowText&&this.props.text&&(0,l.Y)("span",{className:"m-r-5",children:this.props.text}),this.renderTooltip("pointer")]})}render(){const{wrapped:e}=this.props;return e?this.renderLink():this.renderNotWrapped()}}u.defaultProps=c;const p=(0,s.Ay)(u)},58999:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(96540),a=r(96453),o=r(95579),s=r(15151),i=r(85861),l=r(46920),c=r(92201),d=r(12249),u=r(19966),p=r(2445);const m=a.I4.div`
  align-items: center;
  background-color: ${({level:e,theme:t})=>t.colors[e].light2};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  border: 1px solid ${({level:e,theme:t})=>t.colors[e].base};
  color: ${({level:e,theme:t})=>t.colors[e].dark2};
  padding: ${({theme:e})=>2*e.gridUnit}px;
  width: 100%;

  .top-row {
    display: flex;
    justify-content: space-between;
  }

  .error-body {
    padding-top: ${({theme:e})=>e.gridUnit}px;
    padding-left: ${({theme:e})=>8*e.gridUnit}px;
  }

  .icon {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
  }

  .link {
    color: ${({level:e,theme:t})=>t.colors[e].dark2};
    text-decoration: underline;
    &:focus-visible {
      border: 1px solid ${({theme:e})=>e.colors.primary.base};
      padding: ${({theme:e})=>e.gridUnit/2}px;
      margin: -${({theme:e})=>e.gridUnit/2+1}px;
      border-radius: ${({theme:e})=>e.borderRadius}px;
  }
`,h=(0,a.I4)(i.A)`
  color: ${({level:e,theme:t})=>t.colors[e].dark2};
  overflow-wrap: break-word;

  .ant-modal-header {
    background-color: ${({level:e,theme:t})=>t.colors[e].light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;
  }

  .icon {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
  }

  .header {
    display: flex;
    align-items: center;
    font-size: ${({theme:e})=>e.typography.sizes.l}px;
  }
`,_=a.I4.div`
  align-items: center;
  display: flex;
`;function f({body:e,copyText:t,level:r="error",source:i="dashboard",subtitle:f,title:E,description:y}){const g=(0,a.DP)(),[v,T]=(0,n.useState)(!1),[b,A]=(0,n.useState)((0,c.a)()),S=(0,c.a)()||["explore","sqllab"].includes(i),R=g.colors[r].base;return(0,p.FD)(m,{level:r,role:"alert",children:[(0,p.FD)("div",{className:"top-row",children:[(0,p.FD)(_,{children:["error"===r?(0,p.Y)(d.A.ErrorSolid,{className:"icon",iconColor:R}):(0,p.Y)(d.A.WarningSolid,{className:"icon",iconColor:R}),(0,p.Y)("strong",{children:E})]}),!S&&!y&&(0,p.Y)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>T(!0),onKeyDown:e=>{"Enter"===e.key&&T(!0)},children:(0,o.t)("See more")})]}),y&&(0,p.FD)("div",{className:"error-body",children:[(0,p.Y)("p",{children:y}),!S&&(0,p.Y)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>T(!0),onKeyDown:e=>{"Enter"===e.key&&T(!0)},children:(0,o.t)("See more")})]}),S?(0,p.FD)("div",{className:"error-body",children:[(0,p.Y)("p",{children:f}),e&&(0,p.FD)(p.FK,{children:[!b&&(0,p.Y)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>A(!0),onKeyDown:e=>{"Enter"===e.key&&A(!0)},children:(0,o.t)("See more")}),b&&(0,p.FD)(p.FK,{children:[(0,p.Y)("br",{}),e,(0,p.Y)("span",{role:"button",tabIndex:0,className:"link",onClick:()=>A(!1),onKeyDown:e=>{"Enter"===e.key&&A(!1)},children:(0,o.t)("See less")})]})]})]}):(0,p.Y)(h,{level:r,show:v,onHide:()=>T(!1),destroyOnClose:!0,title:(0,p.FD)("div",{className:"header",children:["error"===r?(0,p.Y)(d.A.ErrorSolid,{className:"icon",iconColor:R}):(0,p.Y)(d.A.WarningSolid,{className:"icon",iconColor:R}),(0,p.Y)("div",{className:"title",children:E})]}),footer:(0,p.FD)(p.FK,{children:[t&&(0,p.Y)(u.A,{text:t,shouldShowText:!1,wrapped:!1,copyNode:(0,p.Y)(l.A,{onClick:s.fZ,children:(0,o.t)("Copy message")})}),(0,p.Y)(l.A,{cta:!0,buttonStyle:"primary",onClick:()=>T(!1),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&T(!1)},children:(0,o.t)("Close")})]}),children:(0,p.FD)(p.FK,{children:[(0,p.Y)("p",{children:f}),f&&e&&(0,p.Y)("br",{}),e]})})]})}},79427:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(95579),a=r(42498),o=r(58999),s=r(2445);const i=(0,n.t)("Unexpected error");function l({title:e=i,error:t,subtitle:r,copyText:n,link:l,stackTrace:c,source:d,description:u,fallback:p}){if(t){const e=(0,a.A)().get(t.error_type);if(e)return(0,s.Y)(e,{error:t,source:d,subtitle:r})}return p?(0,s.Y)(s.FK,{children:p}):(0,s.Y)(o.A,{level:"warning",title:e,subtitle:r,copyText:n,description:u,source:d,body:l||c?(0,s.FD)(s.FK,{children:[l&&(0,s.Y)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:"(Request Access)"}),(0,s.Y)("br",{}),c&&(0,s.Y)("pre",{children:c})]}):void 0})}},42498:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(25373),a=r(70360);class o extends n.A{constructor(){super({name:"ErrorMessageComponent",overwritePolicy:n.m.Allow})}}const s=(0,a.A)(o)},12249:(e,t,r)=>{"use strict";r.d(t,{A:()=>de});var n=r(90128),a=r.n(n),o=r(92295),s=r(11058),i=r(41889),l=r(31942),c=r(51802),d=r(30845),u=r(40562),p=r(83762),m=r(3786),h=r(77906),_=r(7713),f=r(55886),E=r(6746),y=r(90888),g=r(30513),v=r(48990),T=r(80088),b=r(41566),A=r(73964),S=r(94824),R=r(14319),I=r(11387),C=r(94904),O=r(69988),D=r(21883),w=r(41710),N=r(87942),L=r(85225),q=r(78027),x=r(57287),U=r(10464),P=r(19803),F=r(84890),M=r(36962),k=r(35066),Y=r(39822),Q=r(68940),j=r(80581),B=r(14588),H=r(43903),$=r(20736),G=r(78602),V=r(74581),W=r(1005),z=r(49932),K=r(3085),X=r(87450),Z=r(96540),J=r(16933),ee=r(96453);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(null,arguments)}const re=({title:e,titleId:t,...r},n)=>Z.createElement("svg",te({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:n,"aria-labelledby":t},r)),ne=(0,Z.forwardRef)(re);var ae=r(2445);const oe=(0,ee.I4)((({iconColor:e,iconSize:t,viewBox:r,...n})=>(0,ae.Y)(J.A,{viewBox:r||"0 0 24 24",...n})))`
  ${({iconColor:e})=>e&&`color: ${e};`};
  font-size: ${({iconSize:e,theme:t})=>e?`${t.typography.sizes[e]||t.typography.sizes.m}px`:"24px"};
`,se=e=>{const{fileName:t,...n}=e,[,a]=(0,Z.useState)(!1),o=(0,Z.useRef)(),s=t.replace("_","-");(0,Z.useEffect)((()=>{let e=!1;return async function(){o.current=(await r(27724)(`./${t}.svg`)).default,e||a(!0)}(),()=>{e=!0}}),[t,o]);const i=null!=e&&e.onClick?"button":"img";return(0,ae.Y)(oe,{component:o.current||ne,"aria-label":s,role:i,...n})},ie={AlignCenterOutlined:o.A,AlignLeftOutlined:s.A,AlignRightOutlined:i.A,ApartmentOutlined:l.A,ArrowRightOutlined:c.A,BarChartOutlined:d.A,BellOutlined:u.A,BookOutlined:p.A,CalendarOutlined:m.A,CheckOutlined:h.A,CheckSquareOutlined:_.A,CloseOutlined:f.A,CommentOutlined:E.A,ConsoleSqlOutlined:y.A,CopyOutlined:g.A,DashboardOutlined:v.A,DatabaseOutlined:T.A,DeleteFilled:b.A,DownOutlined:A.A,EditOutlined:S.A,ExclamationCircleOutlined:R.A,EyeOutlined:I.A,EyeInvisibleOutlined:C.A,FallOutlined:O.A,FileImageOutlined:D.A,FileOutlined:w.A,FireOutlined:N.A,FullscreenExitOutlined:L.A,FullscreenOutlined:q.A,FundProjectionScreenOutlined:x.A,InfoCircleOutlined:U.A,InsertRowBelowOutlined:P.A,LineChartOutlined:F.A,LoadingOutlined:M.A,MonitorOutlined:k.A,PlusCircleOutlined:Y.A,PlusOutlined:Q.A,ReloadOutlined:j.A,RightOutlined:B.A,SaveOutlined:H.A,SearchOutlined:$.A,SettingOutlined:G.A,StopOutlined:V.A,SyncOutlined:W.A,TagsOutlined:z.A,UpOutlined:K.A,UserOutlined:X.A},le=Object.keys(ie).filter((e=>!e.includes("TwoTone"))).map((e=>({[e]:t=>{const r=null!=t&&t.onClick?"button":"img";return(0,ae.Y)(oe,{component:ie[e],role:r,...t})}}))).reduce(((e,t)=>({...e,...t}))),ce={};["alert","alert_solid","alert_solid_small","area-chart-tile","bar-chart-tile","big-number-chart-tile","binoculars","bolt","bolt_small","bolt_small_run","calendar","cancel","cancel_solid","cancel-x","card_view","cards","cards_locked","caret_down","caret_left","caret_right","caret_up","certified","check","checkbox-half","checkbox-off","checkbox-on","circle_check","circle_check_solid","circle","clock","close","code","cog","collapse","color_palette","current-rendered-tile","components","copy","cursor_target","database","dataset_physical","dataset_virtual_greyscale","dataset_virtual","download","drag","edit_alt","edit","email","error","error_solid","error_solid_small","exclamation","expand","eye","eye_slash","favorite-selected","favorite_small_selected","favorite-unselected","field_abc","field_boolean","field_date","field_derived","field_num","field_struct","file","filter","filter_small","folder","full","function_x","gear","grid","image","import","info","info-solid","info_solid_small","join","keyboard","layers","lightbulb","line-chart-tile","link","list","list_view","location","lock_locked","lock_unlocked","map","message","minus","minus_solid","more_horiz","more_vert","move","nav_charts","nav_dashboard","nav_data","nav_explore","nav_home","nav_lab","note","offline","paperclip","pie-chart-tile","placeholder","plus","plus_large","plus_small","plus_solid","queued","refresh","running","save","sql","search","server","share","slack","sort_asc","sort_desc","sort","table","table-chart-tile","tag","trash","triangle_change","triangle_down","triangle_up","up-level","user","warning","warning_solid","x-large","x-small","tags","ballot","category","undo","redo"].forEach((e=>{const t=a()(e).replace(/ /g,"");ce[t]=t=>(0,ae.Y)(se,{fileName:e,...t})}));const de={...le,...ce}},17444:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(96453),a=r(46942),o=r.n(a),s=r(39197),i=r(2445);const l=n.I4.img`
  z-index: 99;
  width: 50px;
  height: unset;
  position: relative;
  margin: 10px;
  &.inline {
    margin: 0px;
    width: 30px;
  }
  &.inline-centered {
    margin: 0 auto;
    width: 30px;
    display: block;
  }
  &.floating {
    padding: 0;
    margin: 0;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
`;function c({position:e="floating",image:t,className:r}){return(0,i.Y)(l,{className:o()("loading",e,r),alt:"Loading...",src:t||s,role:"status","aria-live":"polite","aria-label":"Loading"})}},95272:(e,t,r)=>{"use strict";r.d(t,{Q$:()=>o,WR:()=>d,Zd:()=>u,Zt:()=>c,h$:()=>m,iB:()=>p,l4:()=>i,uU:()=>l});var n=r(43561),a=r(60274);const o="ADD_TOAST";function s({toastType:e,text:t,duration:r=8e3,noDuplicate:a=!1}){return{type:o,payload:{id:(s=e,`${s}-${(0,n.Ak)()}`),toastType:e,text:t,duration:r,noDuplicate:a}};var s}const i="REMOVE_TOAST";function l(e){return{type:i,payload:{id:e}}}function c(e,t){return s({text:e,toastType:a.C.Info,duration:4e3,...t})}function d(e,t){return s({text:e,toastType:a.C.Success,duration:4e3,...t})}function u(e,t){return s({text:e,toastType:a.C.Warning,duration:6e3,...t})}function p(e,t){return s({text:e,toastType:a.C.Danger,duration:8e3,...t})}const m={addInfoToast:c,addSuccessToast:d,addWarningToast:u,addDangerToast:p}},60274:(e,t,r)=>{"use strict";var n;r.d(t,{C:()=>n}),function(e){e.Info="INFO_TOAST",e.Success="SUCCESS_TOAST",e.Warning="WARNING_TOAST",e.Danger="DANGER_TOAST"}(n||(n={}))},5261:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,Yf:()=>c});var n=r(96540),a=r(82960),o=r(61225),s=r(95272);const i={addInfoToast:s.Zt,addSuccessToast:s.WR,addWarningToast:s.Zd,addDangerToast:s.iB};function l(e){return(0,o.Ng)(null,(e=>(0,a.zH)(i,e)))(e)}function c(){const e=(0,o.wA)();return(0,n.useMemo)((()=>(0,a.zH)(i,e)),[e])}},85861:(e,t,r)=>{"use strict";r.d(t,{v:()=>_,A:()=>g});var n=r(69843),a=r.n(n),o=r(96540),s=r(96453),i=r(95579),l=r(17437),c=r(15595),d=r(46920),u=r(33149),p=r(55794),m=r.n(p),h=r(2445);const _=(0,s.I4)((e=>(0,h.Y)(c.nC,{...e,maskTransitionName:""})))`
  ${({theme:e,responsive:t,maxWidth:r})=>t&&(0,l.AH)("max-width:",null!=r?r:"900px",";padding-left:",3*e.gridUnit,"px;padding-right:",3*e.gridUnit,"px;padding-bottom:0;top:0;","")}

  .ant-modal-content {
    display: flex;
    flex-direction: column;
    max-height: ${({theme:e})=>`calc(100vh - ${8*e.gridUnit}px)`};
    margin-bottom: ${({theme:e})=>4*e.gridUnit}px;
    margin-top: ${({theme:e})=>4*e.gridUnit}px;
  }

  .ant-modal-header {
    flex: 0 0 auto;
    background-color: ${({theme:e})=>e.colors.grayscale.light4};
    border-radius: ${({theme:e})=>e.borderRadius}px
      ${({theme:e})=>e.borderRadius}px 0 0;
    padding-left: ${({theme:e})=>4*e.gridUnit}px;
    padding-right: ${({theme:e})=>4*e.gridUnit}px;

    .ant-modal-title h4 {
      display: flex;
      margin: 0;
      align-items: center;
    }
  }

  .ant-modal-close-x {
    display: flex;
    align-items: center;

    .close {
      flex: 1 1 auto;
      margin-bottom: ${({theme:e})=>e.gridUnit}px;
      color: ${({theme:e})=>e.colors.secondary.dark1};
      font-size: 32px;
      font-weight: ${({theme:e})=>e.typography.weights.light};
    }
  }

  .ant-modal-body {
    flex: 0 1 auto;
    padding: ${({theme:e})=>4*e.gridUnit}px;
    overflow: auto;
    ${({resizable:e,height:t})=>!e&&t&&`height: ${t};`}
  }
  .ant-modal-footer {
    flex: 0 0 1;
    border-top: ${({theme:e})=>e.gridUnit/4}px solid
      ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;

    .btn {
      font-size: 12px;
    }

    .btn + .btn {
      margin-left: ${({theme:e})=>2*e.gridUnit}px;
    }
  }

  // styling for Tabs component
  // Aaron note 20-11-19: this seems to be exclusively here for the Edit Database modal.
  // TODO: remove this as it is a special case.
  .ant-tabs-top {
    margin-top: -${({theme:e})=>4*e.gridUnit}px;
  }

  &.no-content-padding .ant-modal-body {
    padding: 0;
  }

  ${({draggable:e,theme:t})=>e&&`\n    .ant-modal-header {\n      padding: 0;\n      .draggable-trigger {\n          cursor: move;\n          padding: ${4*t.gridUnit}px;\n          width: 100%;\n        }\n    }\n  `};

  ${({resizable:e,hideFooter:t})=>e&&`\n    .resizable {\n      pointer-events: all;\n\n      .resizable-wrapper {\n        height: 100%;\n      }\n\n      .ant-modal-content {\n        height: 100%;\n\n        .ant-modal-body {\n          /* 100% - header height - footer height */\n          height: ${t?"calc(100% - 55px);":"calc(100% - 55px - 65px);"}\n        }\n      }\n    }\n  `}
`,f=e=>({maxHeight:"100vh",maxWidth:"100vw",minHeight:e?109:174,minWidth:"380px",enable:{bottom:!0,bottomLeft:!1,bottomRight:!0,left:!1,top:!1,topLeft:!1,topRight:!1,right:!0}}),E=({children:e,disablePrimaryButton:t=!1,primaryTooltipMessage:r,primaryButtonLoading:n=!1,onHide:s,onHandledPrimaryAction:l,primaryButtonName:c=(0,i.t)("OK"),primaryButtonType:p="primary",show:E,name:y,title:g,width:v,maxWidth:T,responsive:b=!1,centered:A,footer:S,hideFooter:R,wrapProps:I,draggable:C=!1,resizable:O=!1,resizableConfig:D=f(R),draggableConfig:w,destroyOnClose:N,...L})=>{const q=(0,o.useRef)(null),[x,U]=(0,o.useState)(),[P,F]=(0,o.useState)(!0);let M;(0,o.isValidElement)(S)&&(M=(0,o.cloneElement)(S,{closeModal:s}));const k=a()(M)?[(0,h.Y)(d.A,{onClick:s,cta:!0,children:(0,i.t)("Cancel")},"back"),(0,h.Y)(d.A,{buttonStyle:p,disabled:t,tooltip:r,loading:n,onClick:l,cta:!0,children:c},"submit")]:M,Y=v||(b?"100vw":"600px"),Q=!(O||C),j=(0,o.useMemo)((()=>0===Object.keys(D).length?f(R):D),[R,D]);return(0,h.Y)(_,{centered:!!A,onOk:l,onCancel:s,width:Y,maxWidth:T,responsive:b,visible:E,title:(0,h.Y)((()=>C?(0,h.Y)("div",{className:"draggable-trigger",onMouseOver:()=>P&&F(!1),onMouseOut:()=>!P&&F(!0),children:g}):(0,h.Y)(h.FK,{children:g})),{}),closeIcon:(0,h.Y)("span",{className:"close","aria-hidden":"true",children:""}),footer:R?null:k,hideFooter:R,wrapProps:{...I},modalRender:e=>O||C?(0,h.Y)(m(),{disabled:!C||P,bounds:x,onStart:(e,t)=>((e,t)=>{var r,n,a;const{clientWidth:o,clientHeight:s}=null==(r=window)||null==(n=r.document)?void 0:n.documentElement,i=null==q||null==(a=q.current)?void 0:a.getBoundingClientRect();i&&U({left:-(null==i?void 0:i.left)+(null==t?void 0:t.x),right:o-((null==i?void 0:i.right)-(null==t?void 0:t.x)),top:-(null==i?void 0:i.top)+(null==t?void 0:t.y),bottom:s-((null==i?void 0:i.bottom)-(null==t?void 0:t.y))})})(0,t),...w,children:O?(0,h.Y)(u.c,{className:"resizable",...j,children:(0,h.Y)("div",{className:"resizable-wrapper",ref:q,children:e})}):(0,h.Y)("div",{ref:q,children:e})}):e,mask:Q,draggable:C,resizable:O,destroyOnClose:N,...L,children:e})};E.displayName="Modal";const y={okButtonProps:{className:"modal-functions-ok-button"},cancelButtonProps:{className:"modal-functions-cancel-button"}},g=Object.assign(E,{error:e=>c.nC.error({...e,...y}),warning:e=>c.nC.warning({...e,...y}),confirm:e=>c.nC.confirm({...e,...y}),useModal:c.nC.useModal})},49756:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var n=r(63375),a=r.n(n),o=r(2404),s=r.n(o),i=r(38221),l=r.n(i),c=r(96540),d=r(95579),u=r(83505),p=r(62952),m=r(51436),h=r(12249),_=r(27023),f=r(3175),E=r(6308),y=r(14120),g=r(27091),v=r(2445);const T=({error:e})=>(0,v.FD)(E._A,{children:[(0,v.Y)(h.A.ErrorSolid,{})," ",(0,v.Y)(E.jQ,{children:e})]}),b=(e,t,r)=>`${e};${t};${r}`,A=(0,c.forwardRef)((({allowClear:e,allowNewOptions:t=!1,ariaLabel:r,autoClearSearchValue:n=!1,fetchOnlyOnSearch:o,filterOption:i=!0,header:h=null,headerPosition:A="top",helperText:S,invertSelection:R=!1,lazyLoading:I=!0,loading:C,mode:O="single",name:D,notFoundContent:w,onBlur:N,onError:L,onChange:q,onClear:x,onDropdownVisibleChange:U,onDeselect:P,onSearch:F,onSelect:M,optionFilterProps:k=["label","value"],options:Y,pageSize:Q=y.yQ,placeholder:j=(0,d.t)("Select ..."),showSearch:B=!0,sortComparator:H=y.Ou,tokenSeparators:$=y.hR,value:G,getPopupContainer:V,oneLine:W,maxTagCount:z,...K},X)=>{const Z="single"===O,[J,ee]=(0,c.useState)(G),[te,re]=(0,c.useState)(""),[ne,ae]=(0,c.useState)(C),[oe,se]=(0,c.useState)(""),[ie,le]=(0,c.useState)(!1),[ce,de]=(0,c.useState)(0),[ue,pe]=(0,c.useState)(0),[me,he]=(0,c.useState)(!I),[_e,fe]=(0,c.useState)(!1),Ee=(0,c.useRef)(J),ye=(0,c.useRef)(new Map),ge=Z?void 0:"multiple",ve=!o||te,[Te,be]=(0,c.useState)(null!=z?z:y.GB),[Ae,Se]=(0,c.useState)(0),Re=(0,u.Z)(Ae,0),Ie=(0,c.useCallback)((()=>Se(Ae+1)),[Ae]);(0,c.useEffect)((()=>{W&&be(ie?0:1)}),[ie,W]),(0,c.useEffect)((()=>{Ee.current=J}),[J]);const Ce=(0,c.useCallback)(((e,t)=>(0,f.SZ)(e,t,Ee.current)),[]),Oe=(0,c.useCallback)(((e,t)=>(0,f.P9)(e,t,te,Ce,H)),[te,H,Ce]),De=(0,c.useCallback)(((e,t)=>(0,f.N3)(e,t,Ce,H)),[H,Ce]),[we,Ne]=(0,c.useState)(y.X_),Le=(0,c.useMemo)((()=>{const e=(0,p.A)(J).filter((e=>!(0,f.Kz)((0,f._W)(e),we))).map((e=>(0,f.pK)(e)?e:{value:e,label:String(e)}));return e.length>0?e.concat(we):we}),[we,J]),qe=(0,c.useCallback)((e=>(0,m.h4)(e).then((e=>{const{error:t}=e;se(t),L&&L(t)}))),[L]),xe=(0,c.useCallback)((e=>{let t=[];if(e&&Array.isArray(e)&&e.length){const r=new Set(e.map((e=>e.value)));Ne((n=>(t=n.filter((e=>!r.has(e.value))).concat(e).sort(De),t)))}return t}),[De]),Ue=(0,c.useMemo)((()=>(e,t)=>{if(de(t),_e)return void ae(!1);const r=b(e,t,Q),n=ye.current.get(r);if(void 0!==n)return pe(n),void ae(!1);ae(!0),Y(e,t,Q).then((({data:t,totalCount:n})=>{const a=xe(t);ye.current.set(r,n),pe(n),!o&&""===e&&a.length>=n&&fe(!0)})).catch(qe).finally((()=>{ae(!1)}))}),[_e,o,xe,qe,Y,Q]),Pe=(0,c.useMemo)((()=>l()(Ue,_.Qs)),[Ue]),Fe=l()((e=>{const r=e.trim();if(t){const e=r&&!(0,f.Kz)(r,Le,!0)&&{label:r,value:r,isNewOption:!0},t=Le.filter((e=>!e.isNewOption||(0,f.Kz)(e.value,J))),n=e?[e,...t]:t;Ne(n)}_e||!me||ye.current.has(b(r,0,Q))||ae(!(o&&!r)),re(e),null==F||F(r)}),_.jW);(0,c.useEffect)((()=>()=>Fe.cancel()),[Fe]),(0,c.useEffect)((()=>{if(Ae!==Re){const e=(0,p.A)(J),t=new Set(e.map(f._W)),r=(0,f.tS)(Le.filter((e=>t.has(e.value))));Z?null==q||q(J,r[0]):null==q||q(e,r)}}),[Le,Z,q,Ae,Re,J]),(0,c.useEffect)((()=>{ye.current.clear(),fe(!1),Ne(y.X_)}),[Y]),(0,c.useEffect)((()=>{ee(G)}),[G]),(0,c.useEffect)((()=>()=>{Pe.cancel()}),[Pe]),(0,c.useEffect)((()=>{me&&ve&&(te?Pe(te,0):Ue("",0))}),[me,Ue,ve,te,Pe]),(0,c.useEffect)((()=>{void 0!==C&&C!==ne&&ae(C)}),[ne,C]);const Me=()=>ye.current.clear();(0,c.useImperativeHandle)(X,(()=>({...X.current,clearCache:Me})),[X]);const ke=(0,c.useCallback)((async e=>{let r=(0,f.om)(e,Le,!0);if(!r&&!_e){const t=Y;r=await t(e,0,Q).then((({data:t})=>t.find((t=>t.label===e))))}if(!r&&!t)return;const n={label:e,value:e};return r&&(n.label=(0,f.Gv)(r)?r.label:r,n.value=(0,f.Gv)(r)?r.value:r),n}),[_e,t,Le,Y,Q]),Ye=(0,c.useMemo)((()=>(0,f.nC)(Le)),[Le]);return(0,v.FD)(E.rf,{headerPosition:A,children:[h&&(0,v.Y)(E.h9,{headerPosition:A,children:h}),(0,v.Y)(E.Iu,{allowClear:!ne&&e,"aria-label":r||D,autoClearSearchValue:n,dropdownRender:e=>(0,f.gd)(e,ie,ne,Le.length,S,oe?(0,v.Y)(T,{error:oe}):void 0),filterOption:(e,t)=>(0,f.qY)(e,t,k,i),filterSort:Oe,getPopupContainer:V||(e=>e.parentNode),headerPosition:A,labelInValue:!0,maxTagCount:Te,mode:ge,notFoundContent:ne?(0,d.t)("Loading..."):w,onBlur:e=>{re(""),null==N||N(e)},onDeselect:(e,t)=>{Array.isArray(J)&&((0,f.pK)(e)?ee(J.filter((t=>t.value!==e.value))):ee(J.filter((t=>t!==e))),t.isNewOption&&Ne(Le.filter((t=>(0,f._W)(t.value)!==(0,f._W)(e))))),Ie(),null==P||P(e,t)},onDropdownVisibleChange:e=>{if(le(e),me!==e&&he(e),!e&&ne&&setTimeout((()=>{ae(!1)}),250),e&&!te&&we.length>1){const e=we.slice().sort(De);s()(e,we)||Ne(e)}U&&U(e)},onPaste:async e=>{const t=e.clipboardData.getData("text");if(Z){const e=await ke(t);e&&ee(e)}else{const e=$.find((e=>t.includes(e))),r=e?a()(t.split(e)):[t],n=(await Promise.all(r.map((e=>ke(e))))).filter((e=>void 0!==e));ee((e=>[...e||[],...n.filter((t=>!(0,f.Kz)(t.value,e)))]))}Ie()},onPopupScroll:e=>{const t=e.currentTarget,r=t.scrollTop>.7*(t.scrollHeight-t.offsetHeight);!ne&&ce*Q+Q<ue&&r&&Ue(te,ce+1)},onSearch:B?Fe:void 0,onSelect:(e,t)=>{if(Z){const t=!(0,f.n4)(e,J,"value");ee(e),t&&Ie()}else ee((t=>{const r=(0,p.A)(t),n=(0,f._W)(e);if(!(0,f.Kz)(n,r)){const t=[...r,e];return(0,f.pK)(e),t}return t})),Ie();null==M||M(e,t)},onClear:()=>{ee(void 0),x&&x(),Ie()},options:Ye?void 0:Le,placeholder:j,showSearch:B,showArrow:!0,tokenSeparators:$,value:J,suffixIcon:(0,f.Jp)(ne,B,ie),menuItemSelectedIcon:R?(0,v.Y)(E.UX,{iconSize:"m","aria-label":"stop"}):(0,v.Y)(E.EL,{iconSize:"m","aria-label":"check"}),oneLine:W,tagRender:g.S,...K,ref:X,children:(0,f.nC)(Le)&&(0,f.Bo)(Le)})]})}))},27091:(e,t,r)=>{"use strict";r.d(t,{S:()=>m});var n=r(66270),a=r(96453),o=r(37827),s=r(19129),i=r(16707),l=r(3175),c=r(6308),d=r(2445);const u=(0,a.I4)(n.A)`
  & .ant-tag-close-icon {
    display: inline-flex;
    align-items: center;
    margin-left: ${({theme:e})=>e.gridUnit}px;
  }

  & .tag-content {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,p=e=>{const[t,r]=(0,o.A)();return(0,d.Y)(s.m,{title:r?e.children:null,children:(0,d.Y)(u,{closeIcon:null!=e&&e.closable?i.v:void 0,...e,className:"ant-select-selection-item",children:(0,d.Y)("span",{className:"tag-content",ref:t,children:e.children})})})},m=e=>{const{label:t,value:r}=e;return r!==l.RB?(0,d.Y)(p,{onMouseDown:e=>{const t=e.target;("svg"===t.tagName||"path"===t.tagName||"span"===t.tagName&&t.className.includes("ant-tag-close-icon"))&&e.stopPropagation()},...e,children:t}):(0,d.Y)(c.Q6,{})}},28990:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var n=r(63375),a=r.n(n),o=r(2404),s=r.n(o),i=r(38221),l=r.n(i),c=r(96540),d=r(95579),u=r(83505),p=r(62952),m=r(32142),h=r(53682),_=r(83307),f=r(27023),E=r(3175),y=r(6308),g=r(14120),v=r(27091),T=r(2445);const b=(0,c.forwardRef)((({allowClear:e,allowNewOptions:t=!1,allowSelectAll:r=!0,ariaLabel:n,autoClearSearchValue:o=!1,filterOption:i=!0,header:b=null,headerPosition:A="top",helperText:S,invertSelection:R=!1,labelInValue:I=!1,loading:C,mode:O="single",name:D,notFoundContent:w,onBlur:N,onChange:L,onClear:q,onDropdownVisibleChange:x,onDeselect:U,onSearch:P,onSelect:F,optionFilterProps:M=["label","value"],options:k,placeholder:Y=(0,d.t)("Select ..."),showSearch:Q=!0,sortComparator:j=g.Ou,tokenSeparators:B=g.hR,value:H,getPopupContainer:$,oneLine:G,maxTagCount:V,...W},z)=>{const K="single"===O,X=!!t||Q,[Z,J]=(0,c.useState)(H),[ee,te]=(0,c.useState)(""),[re,ne]=(0,c.useState)(C),[ae,oe]=(0,c.useState)(!1),[se,ie]=(0,c.useState)(null!=V?V:g.GB),[le,ce]=(0,c.useState)(0),de=(0,u.Z)(le,0),ue=(0,c.useCallback)((()=>ce(le+1)),[le]);(0,c.useEffect)((()=>{G&&ie(ae?0:1)}),[ae,G]);const pe=K?void 0:"multiple",{Option:me}=_.default,he=(0,c.useCallback)(((e,t)=>(0,E.SZ)(e,t,Z)),[Z]),_e=(0,c.useCallback)(((e,t)=>(0,E.P9)(e,t,ee,he,j)),[ee,j,he]),fe=(0,c.useMemo)((()=>Array.isArray(k)?k.slice():g.X_),[k]),Ee=(0,c.useMemo)((()=>fe.slice().sort(he)),[fe,he]),[ye,ge]=(0,c.useState)(Ee),ve=(0,c.useMemo)((()=>{let e;ye.some((e=>e.options))&&(e=ye.reduce(((e,t)=>[...e,...t.options]),[]));const t=(0,p.A)(Z).filter((t=>!(0,E.Kz)((0,E._W)(t),e||ye))).map((e=>(0,E.pK)(e)?e:{value:e,label:String(e)}));return(t.length>0?t.concat(ye):ye).filter((e=>e.value!==E.RB))}),[ye,Z]),Te=(0,c.useMemo)((()=>ve.filter((e=>!e.disabled))),[ve]),be=(0,c.useMemo)((()=>ve.filter((e=>(0,E.Kz)(e.value,Z)||!e.disabled))),[ve,Z]),Ae=(0,c.useMemo)((()=>!K&&r&&ye.length>0&&Te.length>1&&!ee),[K,r,ye.length,Te.length,ee]),Se=(0,c.useMemo)((()=>(0,p.A)(Z).length===be.length+1),[Z,be]),Re=()=>{J(K?void 0:ve.filter((e=>e.disabled&&(0,E.Kz)(e.value,Z))).map((e=>I?{label:e.label,value:e.value}:e.value))),ue()},Ie=l()((e=>{const r=e.trim();if(t){const e=r&&!(0,E.Kz)(r,ve,!0)&&{label:r,value:r,isNewOption:!0},t=(0,p.A)(ve).filter((e=>!e.isNewOption||(0,E.Kz)(e.value,Z))),n=e?[e,...t]:t;ge(n)}te(r),null==P||P(r)}),f.jW);(0,c.useEffect)((()=>()=>Ie.cancel()),[Ie]),(0,c.useEffect)((()=>{ge(fe)}),[fe]),(0,c.useEffect)((()=>{void 0!==C&&C!==re&&ne(C)}),[re,C]),(0,c.useEffect)((()=>{J(H)}),[H]),(0,c.useEffect)((()=>{Ae&&(0,p.A)(H).length===be.length&&J(I?[...(0,p.A)(H),E.fF]:[...(0,p.A)(H),E.RB])}),[I,be.length,Ae,H]),(0,c.useEffect)((()=>{if((0,p.A)(Z).some((e=>(0,E._W)(e)===E.RB))&&!Se){const e=be.map((e=>I?e:e.value));e.push(I?E.fF:E.RB),J(e),ue()}}),[Z,Se,I,be,ue]);const Ce=(0,c.useMemo)((()=>()=>`${E.RB} (${(0,m.ZV)(h.A.INTEGER,be.length)})`),[be]),Oe=(0,c.useCallback)(((e,t)=>{let r=e,n=t;if(!K)if((0,p.A)(r).some((e=>(0,E._W)(e)===E.RB)))Se?r=(0,p.A)(e).filter((e=>(0,E._W)(e)!==E.RB)):(r=(0,E.LG)(be,I),n=(0,E.tS)(be));else if((0,p.A)(e).length===be.length&&Se){const e=be.filter((e=>(0,E.Kz)(e.value,Z)&&e.disabled));r=(0,E.LG)(e,I),n=(0,E.tS)(e)}null==L||L(r,n)}),[K,I,L,be,Se,Z]);(0,c.useEffect)((()=>{if(le!==de){const e=(0,p.A)(Z),t=new Set(e.map(E._W)),r=(0,E.tS)(ve.filter((e=>t.has(e.value))));K?Oe(Z,Z?r[0]:void 0):Oe(e,r)}}),[ve,Oe,K,L,le,de,Z]);const De=(0,c.useMemo)((()=>Ae||(0,E.nC)(k)),[Ae,k]),we=(0,c.useMemo)((()=>(0,p.A)(Z).length-se-(Se?1:0)),[se,Se,Z]);let Ne=se;"responsive"!==Ne&&0===we&&Se&&(Ne-=1);const Le=(0,c.useCallback)((e=>{const r=(0,E.om)(e,ve,!0);if(r||t){if(I){const t={label:e,value:e};return r&&(t.label=(0,E.Gv)(r)?r.label:r,t.value=(0,E.Gv)(r)?r.value:r),t}return r?(0,E.Gv)(r)?r.value:r:e}}),[t,ve,I]);return(0,T.FD)(y.rf,{headerPosition:A,children:[b&&(0,T.Y)(y.h9,{headerPosition:A,children:b}),(0,T.FD)(y.Iu,{allowClear:!re&&e,"aria-label":n||D,autoClearSearchValue:o,dropdownRender:e=>(0,E.gd)(e,ae,re,ve.length,S),filterOption:(e,t)=>(0,E.qY)(e,t,M,i),filterSort:_e,getPopupContainer:$||(e=>e.parentNode),headerPosition:A,labelInValue:I,maxTagCount:Ne,maxTagPlaceholder:()=>`+ ${we>0?we:1} ...`,mode:pe,notFoundContent:re?(0,d.t)("Loading..."):w,onBlur:e=>{te(""),null==N||N(e)},onDeselect:(e,t)=>{if(Array.isArray(Z))if((0,E._W)(e)===(0,E._W)(E.RB))Re();else{let r=Z;r=r.filter((t=>(0,E._W)(t)!==(0,E._W)(e))),Se&&!t.isNewOption&&(r=r.filter((e=>(0,E._W)(e)!==E.RB))),J(r),t.isNewOption&&ge(ve.filter((t=>(0,E._W)(t.value)!==(0,E._W)(e))))}ue(),null==U||U(e,t)},onDropdownVisibleChange:e=>{oe(e),e&&!ee&&ye.length>1&&(s()(Ee,ye)||ge(Ee)),x&&x(e)},onPaste:e=>{const t=e.clipboardData.getData("text");if(K){const e=Le(t);e&&J(e)}else{const e=B.find((e=>t.includes(e))),r=(e?a()(t.split(e)):[t]).map((e=>Le(e))).filter((e=>void 0!==e));J((e=>[...e||[],...r]))}ue()},onPopupScroll:void 0,onSearch:X?Ie:void 0,onSelect:(e,t)=>{if(K){const t=!(0,E.n4)(e,Z,"value");J(e),t&&ue()}else J((t=>{const r=(0,p.A)(t),n=(0,E._W)(e);if(n===(0,E._W)(E.RB))return(0,E.pK)(e)?[...be,E.fF]:[E.RB,...be.map((e=>e.value))];if(!(0,E.Kz)(n,r)){const t=[...r,e];return t.length===be.length&&Ae?(0,E.pK)(e)?[...t,E.fF]:[...t,E.RB]:t}return t})),ue();null==F||F(e,t)},onClear:()=>{Re(),q&&q()},placeholder:Y,showSearch:X,showArrow:!0,tokenSeparators:B,value:Z,suffixIcon:(0,E.Jp)(re,X,ae),menuItemSelectedIcon:R?(0,T.Y)(y.UX,{iconSize:"m","aria-label":"stop"}):(0,T.Y)(y.EL,{iconSize:"m","aria-label":"check"}),options:De?void 0:ve,oneLine:G,tagRender:v.S,...W,ref:z,children:[Ae&&(0,T.Y)(me,{id:"select-all",className:"select-all",value:E.RB,children:Ce()},E.RB),De&&(0,E.Bo)(ve)]})]})}))},14120:(e,t,r)=>{"use strict";r.d(t,{yQ:()=>s,Ou:()=>i,X_:()=>o,GB:()=>n,hR:()=>a});const n=4,a=[",","\r\n","\n","\t",";"],o=[],s=100,i=(e,t,r)=>{let n,a;return"string"==typeof e.label&&"string"==typeof t.label?(n=e.label,a=t.label):"string"==typeof e.value&&"string"==typeof t.value&&(n=e.value,a=t.value),"string"==typeof n&&"string"==typeof a?r?function(e,t,r){const n=e.toLowerCase()||"",a=t.toLowerCase()||"",o=r.toLowerCase()||"";return r&&(Number(t===r)-Number(e===r)||Number(t.startsWith(r))-Number(e.startsWith(r))||Number(a===o)-Number(n===o)||Number(a.startsWith(o))-Number(n.startsWith(o))||Number(t.includes(r))-Number(e.includes(r))||Number(a.includes(o))-Number(e.includes(o)))||e.localeCompare(t)}(n,a,r):n.localeCompare(a):e.value-t.value}},6308:(e,t,r)=>{"use strict";r.d(t,{EL:()=>m,IO:()=>h,Iu:()=>d,Q6:()=>u,UX:()=>p,Vg:()=>_,_A:()=>E,h9:()=>l,jQ:()=>y,rf:()=>c,tK:()=>f});var n=r(96453),a=r(12249),o=r(66270),s=r(428),i=r(83307);const l=n.I4.span`
  ${({theme:e,headerPosition:t})=>`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    margin-right: ${"left"===t?2*e.gridUnit:0}px;\n  `}
`,c=n.I4.div`
  ${({headerPosition:e})=>`\n    display: flex;\n    flex-direction: ${"top"===e?"column":"row"};\n    align-items: ${"left"===e?"center":void 0};\n    width: 100%;\n  `}
`,d=(0,n.I4)(i.default,{shouldForwardProp:e=>"headerPosition"!==e&&"oneLine"!==e})`
  ${({theme:e,headerPosition:t,oneLine:r})=>`\n    flex: ${"left"===t?1:0};\n    && .ant-select-selector {\n      border-radius: ${e.gridUnit}px;\n    }\n    // Open the dropdown when clicking on the suffix\n    // This is fixed in version 4.16\n    .ant-select-arrow .anticon:not(.ant-select-suffix) {\n      pointer-events: none;\n    }\n    .select-all {\n      border-bottom: 1px solid ${e.colors.grayscale.light3};\n    }\n    ${r&&`\n        .ant-select-selection-overflow {\n          flex-wrap: nowrap;\n        }\n\n        .ant-select-selection-overflow-item:not(.ant-select-selection-overflow-item-rest):not(.ant-select-selection-overflow-item-suffix) {\n          flex-shrink: 1;\n          min-width: ${13*e.gridUnit}px;\n        }\n\n        .ant-select-selection-overflow-item-suffix {\n          flex: unset;\n          min-width: 0px;\n        }\n      `};\n `}
`,u=n.I4.span`
  display: none;
`,p=((0,n.I4)(o.A)`
  ${({theme:e})=>`\n    background: ${e.colors.grayscale.light3};\n    font-size: ${e.typography.sizes.m}px;\n    border: none;\n  `}
`,(0,n.I4)(a.A.StopOutlined)`
  vertical-align: 0;
`),m=(0,n.I4)(a.A.CheckOutlined)`
  vertical-align: 0;
`,h=(0,n.I4)(s.A)`
  margin-top: ${({theme:e})=>-e.gridUnit}px;
`,_=n.I4.div`
  ${({theme:e})=>`\n   margin-left: ${3*e.gridUnit}px;\n   line-height: ${8*e.gridUnit}px;\n   color: ${e.colors.grayscale.light1};\n `}
`,f=n.I4.div`
  ${({theme:e})=>`\n   padding: ${2*e.gridUnit}px ${3*e.gridUnit}px;\n   color: ${e.colors.grayscale.base};\n   font-size: ${e.typography.sizes.s}px;\n   cursor: default;\n   border-bottom: 1px solid ${e.colors.grayscale.light2};\n `}
`,E=n.I4.div`
  ${({theme:e})=>`\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n    width: 100%;\n    padding: ${2*e.gridUnit}px;\n    color: ${e.colors.error.base};\n    & svg {\n      margin-right: ${2*e.gridUnit}px;\n    }\n  `}
`,y=n.I4.div`
  overflow: hidden;
  text-overflow: ellipsis;
`},3175:(e,t,r)=>{"use strict";r.d(t,{Bo:()=>C,Gv:()=>m,Jp:()=>A,Kz:()=>y,LG:()=>O,N3:()=>b,P9:()=>T,RB:()=>u,SZ:()=>v,_W:()=>_,fF:()=>p,gd:()=>S,n4:()=>f,nC:()=>I,om:()=>E,pK:()=>h,qY:()=>R,qw:()=>g,tS:()=>D});var n=r(62952),a=r(95579),o=r(83307),s=r(12249),i=r(6308),l=r(2445),c=r(17437);const{Option:d}=o.default,u="Select All",p={value:u,label:String(u)};function m(e){return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}function h(e){return m(e)&&"value"in e&&"label"in e}function _(e){return h(e)?e.value:e}function f(e,t,r){return(m(e)&&r in e?e[r]:e)==(m(t)&&r in t?t[r]:t)}function E(e,t,r=!1){return(0,n.A)(t).find((t=>f(t,e,"value")||r&&f(t,e,"label")))}function y(e,t,r=!1){return void 0!==E(e,t,r)}const g=e=>(t,r)=>"string"==typeof t[e]&&"string"==typeof r[e]?t[e].localeCompare(r[e]):t[e]-r[e],v=(e,t,r)=>r&&void 0!==e.value&&void 0!==t.value?Number(y(t.value,r))-Number(y(e.value,r)):0,T=(e,t,r,n,a)=>n(e,t)||a(e,t,r),b=(e,t,r,n)=>r(e,t)||n(e,t,""),A=(e,t,r)=>e?(0,l.Y)(i.IO,{size:"small"}):t&&r?(0,l.Y)(s.A.SearchOutlined,{iconSize:"s"}):(0,l.Y)(s.A.DownOutlined,{iconSize:"s"}),S=(e,t,r,n,o,s)=>{var c,d;return t||null==(c=e.ref)||null==(d=c.current)||d.scrollTo({top:0}),r&&0===n?(0,l.Y)(i.Vg,{children:(0,a.t)("Loading...")}):s||(0,l.FD)(l.FK,{children:[o&&(0,l.Y)(i.tK,{role:"note",children:o}),e]})},R=(e,t,r,n)=>{if("function"==typeof n)return n(e,t);if(n){const n=e.trim().toLowerCase();if(null!=r&&r.length)return r.some((e=>(null!=t&&t[e]?String(t[e]).trim().toLowerCase():"").includes(n)))}return!1},I=e=>null==e?void 0:e.some((e=>!(null==e||!e.customLabel))),C=e=>e.map((e=>{const t="object"==typeof e,r=t?(null==e?void 0:e.label)||e.value:e,n=t?e.value:e,{customLabel:a,...o}=e;return(0,c.n)(d,{...o,key:n,label:r,value:n},t&&a?a:r)})),O=(e,t)=>t?e.map((e=>({key:e.value,value:e.value,label:e.label}))):e.map((e=>e.value)),D=e=>e.map((e=>({children:e.label,key:e.value,...e})))},16707:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,v:()=>d});var n=r(96453),a=r(79521),o=r(96540),s=r(19129),i=r(55886),l=r(2445);const c=(0,n.I4)(a.A)`
  ${({theme:e})=>`\n  margin-top: ${e.gridUnit}px;\n  margin-bottom: ${e.gridUnit}px;\n  `};
`,d=(0,l.Y)(i.A,{role:"button"}),u=({name:e,id:t,index:r,onDelete:n,editable:a=!1,onClick:i,toolTipTitle:u=e})=>{const p=(0,o.useMemo)((()=>e.length>20),[e])?`${e.slice(0,20)}...`:e,m=i?t?"link":"button":void 0;return(0,l.Y)(l.FK,{children:a?(0,l.Y)(s.m,{title:u,children:(0,l.Y)(c,{closable:a,onClose:()=>r?null==n?void 0:n(r):null,color:"blue",closeIcon:a?d:void 0,children:p},t)},u):(0,l.Y)(s.m,{title:u,children:(0,l.Y)(c,{onClick:i,role:m,children:t?(0,l.Y)("a",{href:`/superset/all_entities/?id=${t}`,target:"_blank",rel:"noreferrer",children:p}):p},t)},u)})}},19129:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(96453),a=r(17437),o=r(27236),s=r(2445);const i=e=>{const t=(0,n.DP)();return(0,s.FD)(s.FK,{children:[(0,s.Y)(a.mL,{styles:a.AH`
          .ant-tooltip-open {
            display: inline-block;
            &::after {
              content: '';
              display: block;
            }
          }
          .ant-tooltip-inner > p {
            margin: 0;
          }
        `}),(0,s.Y)(o.A,{overlayStyle:{fontSize:t.typography.sizes.s,lineHeight:"1.6"},overlayInnerStyle:{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:40,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},color:`${t.colors.grayscale.dark2}e6`,...e})]})}},35837:(e,t,r)=>{"use strict";r.d(t,{Q1:()=>l,_v:()=>c});var n=r(96540),a=r(27023),o=r(32132),s=r(2445);const i=(0,n.createContext)({hideTitle:!1,hideTab:!1,hideNav:!1,hideChartControls:!1}),l=()=>(0,n.useContext)(i),c=({children:e})=>{const t=(0,o.P3)(a.vX.uiConfig)||0,[r]=(0,n.useState)({hideTitle:0!=(1&t),hideTab:0!=(2&t),hideNav:0!=(4&t),hideChartControls:0!=(8&t)});return(0,s.Y)(i.Provider,{value:r,children:e})}},15595:(e,t,r)=>{"use strict";r.d(t,{$B:()=>L.A,$n:()=>o.A,$x:()=>h.A,B8:()=>u.Ay,BD:()=>T.A,DW:()=>a.A,EA:()=>m.A,Ku:()=>b.A,PH:()=>E.A,Sv:()=>c.A,Wq:()=>I.A,Z9:()=>w.A,_O:()=>v.A,_P:()=>D.A,_b:()=>N.A,cG:()=>l.A,eu:()=>s.A,f5:()=>S.A,f7:()=>y.A,fI:()=>p.A,fv:()=>i.A,gj:()=>_.A,k2:()=>C.A,l6:()=>n.A,nC:()=>O.A,o5:()=>g.A,rM:()=>R.A,vo:()=>A.A,vw:()=>f.A,xA:()=>d.Ay});var n=r(28990),a=r(49756),o=r(46920),s=r(10964),i=r(16370),l=r(52741),c=r(16951),d=r(40372),u=r(20562),p=r(47152),m=r(97440),h=r(40570),_=r(69211),f=r(66270),E=r(76360),y=r(53098),g=r(13928),v=r(88582),T=r(40080),b=r(53871),A=r(940),S=r(38510),R=r(11721),I=r(19317),C=r(36255),O=r(14163),D=r(36492),w=r(85929),N=r(43960),L=r(27236)},48285:(e,t,r)=>{"use strict";r.d(t,{Iw:()=>u,KP:()=>m,PD:()=>c,_M:()=>l,iI:()=>d,ll:()=>h,rP:()=>p,tS:()=>_});var n=r(93505),a=r(95579),o=r(51436),s=r(95272),i=r(72173);const l="DASHBOARD_INFO_UPDATED";function c(e){return{type:l,newInfo:e}}const d="SAVE_CHART_CONFIG_COMPLETE",u=({chartConfiguration:e,globalChartConfiguration:t})=>async(r,o)=>{r({type:"SAVE_CHART_CONFIG_BEGIN",chartConfiguration:e,globalChartConfiguration:t});const{id:i,metadata:l}=o().dashboardInfo,u=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${i}`});try{const n=await u({json_metadata:JSON.stringify({...l,chart_configuration:null!=e?e:l.chart_configuration,global_chart_configuration:null!=t?t:l.global_chart_configuration})});r(c({metadata:JSON.parse(n.result.json_metadata)})),r({type:d,chartConfiguration:e,globalChartConfiguration:t})}catch(n){r({type:"SAVE_CHART_CONFIG_FAIL",chartConfiguration:e,globalChartConfiguration:t}),r((0,s.iB)((0,a.t)("Failed to save cross-filter scoping")))}},p="SET_FILTER_BAR_ORIENTATION",m="SET_CROSS_FILTERS_ENABLED";function h(e){return async(t,r)=>{const{id:a,metadata:l}=r().dashboardInfo,c=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${a}`});try{const r=await c({json_metadata:JSON.stringify({...l,filter_bar_orientation:e})}),n=r.result,a=r.last_modified_time;if(n.json_metadata){const e=JSON.parse(n.json_metadata);e.filter_bar_orientation&&t((d=e.filter_bar_orientation,{type:p,filterBarOrientation:d}))}a&&t((0,i.t_)(a))}catch(e){const r=await(0,o.ER)(e,"dashboard");throw t((0,s.iB)(r)),e}var d}}function _(e){return async(t,r)=>{const{id:a,metadata:l}=r().dashboardInfo,c=(0,n.A)({method:"PUT",endpoint:`/api/v1/dashboard/${a}`});try{const r=await c({json_metadata:JSON.stringify({...l,cross_filters_enabled:e})}),n=r.result,a=r.last_modified_time;n.json_metadata&&t(function(e){return{type:m,crossFiltersEnabled:e}}(JSON.parse(n.json_metadata).cross_filters_enabled)),a&&t((0,i.t_)(a))}catch(e){const r=await(0,o.ER)(e,"dashboard");throw t((0,s.iB)(r)),e}}}},34975:(e,t,r)=>{"use strict";r.d(t,{VZ:()=>i,nC:()=>o,p3:()=>n});var n,a=r(35742);function o(e){return{type:n.SetDatasources,datasources:e}}function s(e,t){return{type:n.SetDatasource,key:t,datasource:e}}function i(e){return(t,r)=>{const{datasources:n}=r(),o=n[e];return o?t(s(o,e)):a.A.get({endpoint:`/superset/fetch_datasource_metadata?datasourceKey=${e}`}).then((({json:r})=>t(s(r,e))))}}!function(e){e.SetDatasources="SET_DATASOURCES",e.SetDatasource="SET_DATASOURCE"}(n||(n={}))},26415:(e,t,r)=>{"use strict";r.d(t,{Od:()=>u,R4:()=>m,S9:()=>_,TH:()=>h,X6:()=>y,XN:()=>l,Xf:()=>c,Y$:()=>p,cd:()=>g,dO:()=>d,oB:()=>T,ow:()=>f,tX:()=>v,zE:()=>E});var n=r(88055),a=r.n(n),o=r(93505),s=r(95004),i=r(48285);const l="SET_FILTER_CONFIG_COMPLETE",c="SET_IN_SCOPE_STATUS_OF_FILTERS",d=e=>async(t,r)=>{var n;t({type:"SET_FILTER_CONFIG_BEGIN",filterConfig:e});const{id:a,metadata:c}=r().dashboardInfo,d=null==(n=r().nativeFilters)?void 0:n.filters,u=(0,o.A)({method:"PUT",endpoint:`/api/v1/dashboard/${a}`}),p=e.map((e=>{const t=d[e.id];return t?{...t,...e}:e}));try{const e=await u({json_metadata:JSON.stringify({...c,native_filter_configuration:p})});t((0,i.PD)({metadata:JSON.parse(e.result.json_metadata)})),t({type:l,filterConfig:p}),t((0,s.$P)(p,d))}catch(e){t({type:"SET_FILTER_CONFIG_FAIL",filterConfig:p}),t({type:s.wT,filterConfig:p})}},u=e=>async(t,r)=>{var n;const o=null==(n=r().nativeFilters)?void 0:n.filters,s=e.map((e=>({...o[e.filterId],chartsInScope:e.chartsInScope,tabsInScope:e.tabsInScope})));t({type:c,filterConfig:s});const l=a()(r().dashboardInfo.metadata),d=l.native_filter_configuration.map((e=>{const t=s.find((t=>t.id===e.id));return t?{...t,...e}:e}));l.native_filter_configuration=d,t((0,i.PD)({metadata:l}))},p="SET_FOCUSED_NATIVE_FILTER",m="UNSET_FOCUSED_NATIVE_FILTER";function h(e){return{type:p,id:e}}function _(){return{type:m}}const f="SET_HOVERED_NATIVE_FILTER",E="UNSET_HOVERED_NATIVE_FILTER";function y(e){return{type:f,id:e}}function g(){return{type:E}}const v="UPDATE_CASCADE_PARENT_IDS";function T(e,t){return{type:v,id:e,parentIds:t}}},80464:(e,t,r)=>{"use strict";r.d(t,{$G:()=>u,Lj:()=>m,Nv:()=>_,T1:()=>p,sH:()=>f,ut:()=>d});var n=r(58561),a=r.n(n),o=r(35742),s=r(51436),i=r(95579),l=r(95272);const c=200,d="ADD_SLICES",u="SET_SLICES",p="FETCH_ALL_SLICES_STARTED",m="FETCH_ALL_SLICES_FAILED",h=e=>e.reduce(((e,t)=>{let r=JSON.parse(t.params);var n,a;return r={...r,datasource:(n=t.datasource_id,a=t.datasource_type,`${n}__${a}`||r.datasource)},{...e,[t.id]:{slice_id:t.id,slice_url:t.url,slice_name:t.slice_name,form_data:r,datasource_name:t.datasource_name_text,datasource_url:t.datasource_url,datasource_id:t.datasource_id,datasource_type:t.datasource_type,changed_on:new Date(t.changed_on_utc).getTime(),description:t.description,description_markdown:t.description_markeddown,viz_type:t.viz_type,modified:t.changed_on_delta_humanized,changed_on_humanized:t.changed_on_delta_humanized,thumbnail_url:t.thumbnail_url,owners:t.owners,created_by:t.created_by}}}),{});function _(e){return t=>{t(function(e){return{type:u,payload:{slices:e}}}(e))}}function f(e,t,r="changed_on"){return n=>{n({type:p});const u=t?[{col:"slice_name",opr:"chart_all_text",value:t}]:[];return e&&u.push({col:"owners",opr:"rel_m_m",value:e}),o.A.get({endpoint:`/api/v1/chart/?q=${a().encode({columns:["changed_on_delta_humanized","changed_on_utc","datasource_id","datasource_type","datasource_url","datasource_name_text","description_markeddown","description","id","params","slice_name","thumbnail_url","url","viz_type","owners.id","created_by.id"],filters:u,page_size:c,order_column:"changed_on"===r?"changed_on_delta_humanized":r,order_direction:"changed_on"===r?"desc":"asc"})}`}).then((({json:e})=>{const{result:t}=e,r=h(t);return n(function(e){return{type:d,payload:{slices:e}}}(r))})).catch((e=>(0,s.h4)(e).then((({error:e})=>{n(function(e){return{type:m,payload:{error:e}}}(e||(0,i.t)("Could not fetch all saved charts"))),n((0,l.iB)((0,i.t)("Sorry there was an error fetching saved charts: ")+e))}))))}}},58919:(e,t,r)=>{"use strict";r.d(t,{E9:()=>m,K1:()=>d,Vp:()=>l,Z4:()=>h,_L:()=>p,_k:()=>u,fN:()=>_,l:()=>c});var n=r(43561),a=r(56091),o=r(5362),s=r(73992),i=r(81151);const l=(e,t,r=[])=>{if(r.includes(t))return!0;const n=e.get(t);return!!n&&n.some((n=>l(e,n,[...r,t])))},c=async(e,t,r)=>{try{let t;try{t=await e.validateFields()}catch(e){var n;if(null!=e&&null!=(n=e.errorFields)&&n.length||null==e||!e.outOfDate)throw e;t=e.values}return t}catch(e){var a;if(o.A.warn("Filter configuration failed:",e),null==(a=e.errorFields)||!a.length)return null;const n=e.errorFields;if(!n.some((e=>e.name[1]===t))){const e=n.find((e=>"filters"===e.name[0]));e&&r(e.name[1])}return null}},d=(e,t,r,n,o)=>async()=>{const l=t.filter((e=>!r[e])).map((t=>{var r,n,l,c;const d=null==(r=o.filters)?void 0:r[t];if(!d)return e[t];if(d.type===s.EH.Divider)return{id:t,type:s.EH.Divider,scope:{rootPath:[i.wv],excluded:[]},title:d.title,description:d.description};const u={};return d.dataset&&(u.datasetId=d.dataset.value),d.dataset&&d.column&&(u.column={name:d.column}),{id:t,adhoc_filters:d.adhoc_filters,time_range:d.time_range,controlValues:null!=(n=d.controlValues)?n:{},granularity_sqla:d.granularity_sqla,requiredFirst:Object.values(null!=(l=d.requiredFirst)?l:{}).find((e=>e)),name:d.name,filterType:d.filterType,targets:[u],defaultDataMask:null!=(c=d.defaultDataMask)?c:(0,a.Z)(),cascadeParentIds:d.dependencies||[],scope:d.scope,sortMetric:d.sortMetric,type:d.type,description:(d.description||"").trim()}}));await n(l)},u=(e,t,r)=>n=>{const a=window.setTimeout((()=>{(r=>{e((e=>({...e,[r]:{isPending:!1}}))),t((e=>e.filter((e=>e!==r))))})(n)}),5e3);e((e=>({...e,[n]:{isPending:!0,timerId:a}}))),r(!1)},p="NATIVE_FILTER-",m="NATIVE_FILTER_DIVIDER-",h=e=>`${e===s.EH.NativeFilter?p:m}${(0,n.Ak)()}`,_=e=>e.map((e=>e.id))},73212:(e,t,r)=>{"use strict";r.d(t,{As:()=>o,Xy:()=>u,Zd:()=>p,_3:()=>s,_s:()=>c,e2:()=>h,jO:()=>d,l6:()=>l,p_:()=>i,qe:()=>m});var n=r(5795),a=r(81151);const o={id:0,type:n.cT.Table,uid:"_placeholder_",datasource_name:"",table_name:"",columns:[],column_types:[],metrics:[],column_formats:{},currency_formats:{},verbose_map:{},main_dttm_col:"",description:""},s=53,i=32,l=260,c=550,d=80,u=374,p=["css","json_metadata.filter_scopes"],m=10,h={rootPath:[a.wv],excluded:[]}},45881:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,C:()=>o});var n=r(26415),a=r(52123);function o({filterConfig:e,state:t}){const r={},n={};var a;return e?(e.forEach((e=>{const{id:t}=e;n[t]=e})),r.filters=n):r.filters=null!=(a=null==t?void 0:t.filters)?a:{},r.focusedFilterId=void 0,r}function s(e={filters:{}},t){switch(t.type){case a.n:return{filters:t.data.nativeFilters.filters};case n.XN:case n.Xf:return o({filterConfig:t.filterConfig,state:e});case n.Y$:return{...e,focusedFilterId:t.id};case n.R4:return{...e,focusedFilterId:void 0};case n.ow:return{...e,hoveredFilterId:t.id};case n.zE:return{...e,hoveredFilterId:void 0};case n.tX:return{...e,filters:{...e.filters,[t.id]:{...e.filters[t.id],cascadeParentIds:t.parentIds}}};default:return e}}},10504:(e,t,r)=>{"use strict";var n;r.d(t,{IG:()=>s,QI:()=>n,TY:()=>a,YD:()=>o}),function(e){e.Vertical="VERTICAL",e.Horizontal="HORIZONTAL"}(n||(n={}));const a="global",o=e=>e===a;var s;!function(e){e.DownloadAsImage="download_as_image",e.ExploreChart="explore_chart",e.ExportCsv="export_csv",e.ExportPivotCsv="export_pivot_csv",e.ExportFullCsv="export_full_csv",e.ExportXlsx="export_xlsx",e.ExportFullXlsx="export_full_xlsx",e.ForceRefresh="force_refresh",e.Fullscreen="fullscreen",e.ToggleChartDescription="toggle_chart_description",e.ViewQuery="view_query",e.ViewResults="view_results",e.DrillToDetail="drill_to_detail",e.CrossFilterScoping="cross_filter_scoping",e.Share="share",e.ShareByEmail="share_by_email",e.CopyLink="copy_link",e.Download="download",e.SaveModal="save_modal",e.RefreshDashboard="refresh_dashboard",e.AutorefreshModal="autorefresh_modal",e.SetFilterMapping="set_filter_mapping",e.EditProperties="edit_properties",e.EditCss="edit_css",e.ToggleFullscreen="toggle_fullscreen",e.ManageEmbedded="manage_embedded",e.ManageEmailReports="manage_email_reports"}(s||(s={}))},49588:(e,t,r)=>{"use strict";r.d(t,{$9:()=>s,Ay:()=>f,B8:()=>h,KR:()=>o,PP:()=>c,QP:()=>a,_8:()=>p,cP:()=>u,n6:()=>l,oT:()=>n,rG:()=>_,tq:()=>i,wc:()=>m,xY:()=>d});const n="CHART",a="COLUMN",o="HEADER",s="GRID",i="ROOT",l="DIVIDER",c="HEADER",d="MARKDOWN",u="NEW_COMPONENT_SOURCE",p="ROW",m="TABS",h="TAB",_="DYNAMIC",f={CHART_TYPE:n,COLUMN_TYPE:a,DASHBOARD_HEADER_TYPE:o,DASHBOARD_GRID_TYPE:s,DASHBOARD_ROOT_TYPE:i,DIVIDER_TYPE:l,HEADER_TYPE:c,MARKDOWN_TYPE:d,NEW_COMPONENT_SOURCE_TYPE:u,ROW_TYPE:p,TABS_TYPE:m,TAB_TYPE:h,DYNAMIC_TYPE:_}},81151:(e,t,r)=>{"use strict";r.d(t,{BD:()=>g,B_:()=>b,CW:()=>s,Fq:()=>N,GY:()=>I,Gc:()=>q,IS:()=>_,Ie:()=>l,It:()=>S,KD:()=>m,LA:()=>w,LH:()=>u,RY:()=>p,W3:()=>E,W9:()=>R,X0:()=>C,XY:()=>a,cV:()=>v,fB:()=>d,gb:()=>L,hL:()=>P,iF:()=>y,k0:()=>i,kn:()=>O,mK:()=>n,nO:()=>h,nS:()=>f,nc:()=>D,nm:()=>A,pX:()=>x,tK:()=>T,wN:()=>c,wv:()=>o,zf:()=>U});const n="GRID_ID",a="HEADER_ID",o="ROOT_ID",s="DASHBOARD_VERSION_KEY",i="NEW_COMPONENTS_SOURCE_ID",l="NEW_CHART_ID",c="NEW_COLUMN_ID",d="NEW_DIVIDER_ID",u="NEW_HEADER_ID",p="NEW_MARKDOWN_ID",m="NEW_ROW_ID",h="NEW_TAB_ID",_="NEW_TABS_ID",f="NEW_DYNAMIC_COMPONENT",E=0,y=8,g=2*y,v=12,T=1,b=5,A=4,S="SMALL_HEADER",R="MEDIUM_HEADER",I="LARGE_HEADER",C="BACKGROUND_WHITE",O="BACKGROUND_TRANSPARENT",D=50,w="overwrite",N="overwriteConfirmed",L="newDashboard",q=65535,x=["LABEL"],U="ALL_FILTERS_ROOT";var P;!function(e){e[e.None=0]="None",e[e.HideNav=1]="HideNav",e[e.HideNavAndTitle=2]="HideNavAndTitle",e[e.Report=3]="Report"}(P||(P={}))},83255:(e,t,r)=>{"use strict";r.d(t,{b:()=>p,k:()=>m});var n=r(88055),a=r.n(n),o=r(27366),s=r(13270),i=r(80145),l=r(58863),c=r(12817),d=r(10504),u=r(73212);const p=e=>(0,o.G7)(o.TO.DashboardCrossFilters)&&(void 0===e||e),m=(e,t,r)=>{var n;if(!(0,o.G7)(o.TO.DashboardCrossFilters))return;const p=Object.values(r).reduce(((e,t)=>{if(!t.form_data)return e;const{datasource:r}=t.form_data;return e[r]||(e[r]=new Set),e[r].add(t.id),e}),{}),m=null!=(n=t.global_chart_configuration)&&n.scope?{scope:t.global_chart_configuration.scope,chartsInScope:(0,c._)(t.global_chart_configuration.scope,Object.values(r).map((e=>e.id)),e)}:{scope:u.e2,chartsInScope:Object.values(r).map((e=>e.id))},h={};return Object.values(e).forEach((n=>{var o,u,_,f,E,y;const g=null==(o=n.meta)?void 0:o.chartId;if((0,s.A)(g)&&(null!=(u=null==(_=null!=(f=(0,i.A)().get(null==(E=r[g])||null==(y=E.form_data)?void 0:y.viz_type))?f:{})?void 0:_.behaviors)?u:[]).includes(l.nS.InteractiveChart)){var v;null!=(v=t.chart_configuration)&&v[g]&&(h[g]=a()(t.chart_configuration[g])),h[g]||(h[g]={id:g,crossFilters:{scope:d.TY}});const n=r[g].form_data.datasource;h[g].crossFilters.chartsInScope=(0,d.YD)(h[g].crossFilters.scope)?m.chartsInScope.filter((e=>{var t;return e!==Number(g)&&(null==(t=p[n])?void 0:t.has(e))})):(0,c._)(h[g].crossFilters.scope,Object.values(r).map((e=>e.id)),e)}})),{chartConfiguration:h,globalChartConfiguration:m}}},88488:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(86663);const a=new Set(["standalone","edit"]);function o(e){const t=n.parse(window.location.search);return Object.entries(t).reduce(((t,[r,n])=>"regular"===e&&a.has(r)||"reserved"===e&&!a.has(r)?t:Array.isArray(n)?{...t,[r]:n[0]}:{...t,[r]:n}),{})}},578:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});const n={};function a(e){let t=null;if(e){const{childId:a,layout:o={}}=e;if(n[a]){var r;const e=(null==o?void 0:o[n[a]])||{};if(null!=e&&e.children&&null!=e&&null!=(r=e.children)&&null!=r.includes&&r.includes(a))return e.id}t=function(e){let t=null;if(e){const{childId:n,layout:a={}}=e;if(a){const e=Object.keys(a);for(let o=0;o<=e.length-1;o+=1){var r;const s=e[o],i=a[s]||{};if(s!==n&&null!=i&&null!=(r=i.children)&&null!=r.includes&&r.includes(n)){t=s;break}}}}return t}({childId:a,layout:o}),n[a]=t}return t}},12817:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var n=r(49588);function a(e,t,r){const a=Object.values(r);return t.filter((t=>{var r,o;return!e.excluded.includes(t)&&(null==(r=a.find((e=>{var r;return(null==e?void 0:e.type)===n.oT&&(null==(r=e.meta)?void 0:r.chartId)===t})))||null==(o=r.parents)?void 0:o.some((t=>e.rootPath.includes(t))))}))}},24647:(e,t,r)=>{"use strict";function n({chartId:e,column:t}){return`${e}_${t}`}r.d(t,{s:()=>n,w:()=>o});const a=/^([0-9]+)_(.*)$/;function o(e){const t=a.exec(e);if(!t)throw new Error("Cannot parse invalid filter key");return{chartId:parseInt(t[1],10),column:t[2]}}},37725:(e,t,r)=>{"use strict";function n(){return(window.location.hash||"#").substring(1)}r.d(t,{A:()=>n})},65256:(e,t,r)=>{"use strict";r.d(t,{m9:()=>d,bD:()=>p,N6:()=>l,ZU:()=>u});var n=r(27366),a=r(11331),o=r.n(a);function s(e){return function(e){return o()(e)&&"username"in e}(e)&&"permissions"in e&&"roles"in e}var i=r(84666);const l=e=>s(e)&&Object.keys(e.roles||{}).some((e=>"admin"===e.toLowerCase())),c=(e,t)=>s(t)&&e.owners.some((e=>e.id===t.userId)),d=(e,t)=>s(t)&&(l(t)||c(e,t))&&(0,i.L)("can_write","Dashboard",null==t?void 0:t.roles);function u(e,t,r){return l(e)||s(e)&&Object.values(e.roles||{}).flat().some((e=>e[0]===r&&e[1]===t))}const p=(e,t)=>s(t)&&(0,i.L)("can_write","Dashboard",null==t?void 0:t.roles)&&(!(0,n.G7)(n.TO.DashboardRbac)||l(t)||c(e,t))},95004:(e,t,r)=>{"use strict";r.d(t,{$P:()=>l,Ak:()=>o,Mv:()=>c,V9:()=>u,aJ:()=>a,bc:()=>s,ml:()=>d,wT:()=>i});var n=r(56091);const a="CLEAR_DATA_MASK_STATE",o="UPDATE_DATA_MASK",s="SET_DATA_MASK_FOR_FILTER_CONFIG_COMPLETE",i="SET_DATA_MASK_FOR_FILTER_CONFIG_FAIL";function l(e,t){return{type:s,filterConfig:e,filters:t}}function c(e,t){return{type:o,filterId:e,dataMask:t}}function d(e){return c(e,(0,n.Z)(e))}function u(){return{type:a}}},56091:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,Z:()=>c});var n=r(1932),a=r(27366),o=r(58919),s=r(52123),i=r(95004),l=r(35839);function c(e,t={}){let r={};return e&&(r={id:e}),{...r,extraFormData:{},filterState:{},ownState:{},...t}}function d(e,t,r,n,a){e.forEach((e=>{var r;const o=n||{};t[e.id]={...c(e.id),...e.defaultDataMask,...o[e.id]},a&&!(0,l.r$)(e.defaultDataMask,null==(r=a[e.id])?void 0:r.defaultDataMask,{ignoreUndefined:!0})&&(t[e.id]={...t[e.id],...e.defaultDataMask})})),Object.values(r).forEach((e=>{String(null==e?void 0:e.id).startsWith(o._L)||(t[null==e?void 0:e.id]=e)}))}const u=(0,n.jM)(((e,t)=>{var r,n,o,l;const u={};switch(t.type){case i.aJ:return u;case i.Ak:return e[t.filterId]={...c(t.filterId),...e[t.filterId],...t.dataMask},e;case s.n:var p,m;return(0,a.G7)(a.TO.DashboardCrossFilters)&&Object.keys(null==(p=t.data.dashboardInfo)||null==(m=p.metadata)?void 0:m.chart_configuration).forEach((e=>{u[e]={...c(e)}})),d(null!=(r=null==(n=t.data.dashboardInfo)||null==(o=n.metadata)?void 0:o.native_filter_configuration)?r:[],u,e,t.data.dataMask),u;case i.bc:return d(null!=(l=t.filterConfig)?l:[],u,e,t.filters),u;default:return e}}),{})},64349:(e,t,r)=>{"use strict";r.d(t,{O0:()=>d,ZS:()=>i});var n=r(35742),a=r(51436),o=r(95272),s=r(60130);const i="SET_DATASOURCE";function l(e){return{type:i,datasource:e}}function c(e){return function(t,r){const{explore:{datasource:n}}=r();t(l(e)),t((0,s.updateFormDataByDatasource)(n,e))}}const d={setDatasource:l,changeDatasource:c,saveDataset:function({schema:e,sql:t,database:r,templateParams:s,datasourceName:i,columns:l}){return async function(d){try{const{json:{data:a}}=await n.A.post({endpoint:"/api/v1/dataset/",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:null==r?void 0:r.id,table_name:i,schema:e,sql:t,template_params:s,columns:l})});return d(c(a)),a}catch(e){throw(0,a.h4)(e).then((e=>{d((0,o.iB)(e.error))})),e}}}}},60130:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CREATE_NEW_SLICE:()=>q,FETCH_DATASOURCES_STARTED:()=>m,FETCH_DATASOURCES_SUCCEEDED:()=>_,FETCH_DATASOURCE_SUCCEEDED:()=>u,FETCH_FAVE_STAR:()=>g,POST_DATASOURCE_STARTED:()=>d,SAVE_FAVE_STAR:()=>T,SET_EXPLORE_CONTROLS:()=>R,SET_FIELD_VALUE:()=>A,SET_FORCE_QUERY:()=>F,SET_FORM_DATA:()=>C,SET_SAVE_ACTION:()=>N,SET_STASH_FORM_DATA:()=>k,SLICE_UPDATED:()=>U,TOGGLE_FAVE_STAR:()=>E,UPDATE_CHART_TITLE:()=>D,UPDATE_FORM_DATA_BY_DATASOURCE:()=>l,createNewSlice:()=>x,exploreActions:()=>Q,fetchDatasourceSucceeded:()=>p,fetchDatasourcesStarted:()=>h,fetchDatasourcesSucceeded:()=>f,fetchFaveStar:()=>v,saveFaveStar:()=>b,setControlValue:()=>S,setExploreControls:()=>I,setForceQuery:()=>M,setFormData:()=>O,setSaveAction:()=>L,setStashFormData:()=>Y,sliceUpdated:()=>P,toggleFaveStar:()=>y,updateChartTitle:()=>w,updateFormDataByDatasource:()=>c});var n=r(58561),a=r.n(n),o=r(35742),s=r(95579),i=r(95272);const l="UPDATE_FORM_DATA_BY_DATASOURCE";function c(e,t){return{type:l,prevDatasource:e,newDatasource:t}}const d="POST_DATASOURCE_STARTED",u="FETCH_DATASOURCE_SUCCEEDED";function p(){return{type:u}}const m="FETCH_DATASOURCES_STARTED";function h(){return{type:m}}const _="FETCH_DATASOURCES_SUCCEEDED";function f(){return{type:_}}const E="TOGGLE_FAVE_STAR";function y(e){return{type:E,isStarred:e}}const g="FETCH_FAVE_STAR";function v(e){return function(t){o.A.get({endpoint:`/api/v1/chart/favorite_status/?q=${a().encode([e])}`}).then((({json:e})=>{var r,n;t(y(!(null==e||null==(r=e.result)||null==(n=r[0])||!n.value)))}))}}const T="SAVE_FAVE_STAR";function b(e,t){return function(r){const n=`/api/v1/chart/${e}/favorites/`;(t?o.A.delete({endpoint:n}):o.A.post({endpoint:n})).then((()=>r(y(!t)))).catch((()=>{r((0,i.iB)((0,s.t)("An error occurred while starring this chart")))}))}}const A="SET_FIELD_VALUE";function S(e,t,r){return{type:A,controlName:e,value:t,validationErrors:r}}const R="UPDATE_EXPLORE_CONTROLS";function I(e){return{type:R,formData:e}}const C="UPDATE_FORM_DATA";function O(e){return{type:C,formData:e}}const D="UPDATE_CHART_TITLE";function w(e){return{type:D,sliceName:e}}const N="SET_SAVE_ACTION";function L(e){return{type:N,saveAction:e}}const q="CREATE_NEW_SLICE";function x(e,t,r,n,a){return{type:q,can_add:e,can_download:t,can_overwrite:r,slice:n,form_data:a}}const U="SLICE_UPDATED";function P(e){return{type:U,slice:e}}const F="SET_FORCE_QUERY";function M(e){return{type:F,force:e}}const k="SET_STASH_FORM_DATA";function Y(e,t){return{type:k,isHidden:e,fieldNames:t}}const Q={...i.h$,fetchDatasourcesStarted:h,fetchDatasourcesSucceeded:f,toggleFaveStar:y,fetchFaveStar:v,saveFaveStar:b,setControlValue:S,setExploreControls:I,setStashFormData:Y,updateChartTitle:w,createNewSlice:x,sliceUpdated:P,setForceQuery:M}},91522:(e,t,r)=>{"use strict";r.d(t,{B:()=>E,W:()=>f});var n,a=r(85183),o=r(91715),s=r(96627),i=r(86444),l=r(62952),c=r(76968),d=r(69161),u=r(17596),p=r(67295),m=r(32132),h=r(27023),_=r(84666);!function(e){e.CATEGORICAL="CATEGORICAL",e.SEQUENTIAL="SEQUENTIAL"}(n||(n={}));const f="HYDRATE_EXPLORE",E=({form_data:e,slice:t,dataset:r,metadata:E,saveAction:y=null})=>(g,v)=>{var T,b;const{user:A,datasources:S,charts:R,sliceEntities:I,common:C,explore:O}=v(),D=(0,m.P3)(h.vX.sliceId),w=(0,m.P3)(h.vX.dashboardId),N=D?null==I||null==(T=I.slices)?void 0:T[D]:null,L=null!=t?t:N,q=null!=e?e:null==L?void 0:L.form_data;if(!q.viz_type){const e=(null==C?void 0:C.conf.DEFAULT_VIZ_TYPE)||"table";q.viz_type=(0,m.P3)(h.vX.vizType)||e}var x;q.time_range||(q.time_range=(null==C||null==(x=C.conf)?void 0:x.DEFAULT_TIME_FILTER)||s.WC),!q.include_time||!q.granularity_sqla||null!=(b=q.groupby)&&b.some((e=>(0,i.A)(e)===(0,i.A)(q.granularity_sqla)))||(q.groupby=[q.granularity_sqla,...(0,l.A)(q.groupby)],q.granularity_sqla=void 0),w&&(q.dashboardId=w);const U=r,P={form_data:q,slice:L,datasource:U},F=(0,o.Eu)(P,q),M=F.color_scheme&&"color_scheme",k=F.linear_color_scheme&&"linear_color_scheme",Y=e=>{const t="CATEGORICAL"===e?(0,c.A)():(0,d.A)(),r="CATEGORICAL"===e?M:k,n=t.defaultKey,a="CATEGORICAL"===e?"supersetColors":"superset_seq_1",o=q[r],s=!!t.get(o,!0);o&&!s&&(F[r].value=n||a)};M&&Y(n.CATEGORICAL),k&&Y(n.SEQUENTIAL);const Q={can_add:(0,_.L)("can_write","Chart",null==A?void 0:A.roles),can_download:(0,_.L)("can_csv","Superset",null==A?void 0:A.roles),can_overwrite:(0,l.A)(null==t?void 0:t.owners).includes(null==A?void 0:A.userId),isDatasourceMetaLoading:!1,isStarred:!1,triggerRender:!1,datasource:U,controls:F,form_data:q,slice:L,controlsTransferred:O.controlsTransferred,standalone:(0,m.P3)(h.vX.standalone),force:(0,m.P3)(h.vX.force),metadata:E,saveAction:y,common:C};Object.entries(Q.controls).forEach((([e,t])=>{Q.controls[e]=(0,u.jX)(t,Q)}));const j=L?(0,u.LK)(F):null,B=(0,a.kD)(P),H={id:B,chartAlert:null,chartStatus:null,chartStackTrace:null,chartUpdateEndTime:null,chartUpdateStartTime:0,latestQueryFormData:(0,u.LK)(Q.controls),sliceFormData:j,queryController:null,queriesResponse:null,triggerQuery:!1,lastRendered:0};return g({type:f,data:{charts:{...R,[B]:H},datasources:{...S,[(0,p.S)(U)]:U},saveModal:{dashboards:[],saveModalAlert:null,isVisible:!1},explore:Q}})}},92037:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FETCH_DASHBOARDS_FAILED:()=>f,FETCH_DASHBOARDS_SUCCEEDED:()=>h,SAVE_SLICE_FAILED:()=>v,SAVE_SLICE_SUCCESS:()=>b,SET_SAVE_CHART_MODAL_VISIBILITY:()=>y,createDashboard:()=>O,createSlice:()=>C,fetchDashboardsFailed:()=>E,fetchDashboardsSucceeded:()=>_,getSliceDashboards:()=>D,getSlicePayload:()=>S,saveSliceFailed:()=>T,saveSliceSuccess:()=>A,setSaveChartModalVisibility:()=>g,updateSlice:()=>I});var n=r(62193),a=r.n(n),o=r(58561),s=r.n(o),i=r(5795),l=r(95579),c=r(35742),d=r(95272),u=r(95483),p=r(85183);const m=/^adhoc_filters/,h="FETCH_DASHBOARDS_SUCCEEDED";function _(e){return{type:h,choices:e}}const f="FETCH_DASHBOARDS_FAILED";function E(e){return{type:f,userId:e}}const y="SET_SAVE_CHART_MODAL_VISIBILITY";function g(e){return{type:y,isVisible:e}}const v="SAVE_SLICE_FAILED";function T(){return{type:v}}const b="SAVE_SLICE_SUCCESS";function A(e){return{type:b,data:e}}const S=(e,t={},r,n,o={})=>{const s=function(e){const t={};return Object.entries(e).forEach((([e,r])=>{m.test(e)&&Array.isArray(r)&&(t[e]=r.filter((e=>!e.isExtra)))})),t}(t);var l;!a()(o)&&t.adhoc_filters&&t.adhoc_filters.length>0&&Object.keys(s).forEach((e=>{if(a()(s[e])){const t=o[e];if(Array.isArray(t)){const r=s[e]||[];t.forEach((e=>{e.operator===u.ux.TemporalRange&&r.push({...e,comparator:e.comparator||"No filter"})})),s[e]=r}}})),(e=>((null==e?void 0:e.adhoc_filters)||[]).some((e=>e.operator===u.ux.TemporalRange)))(s)||null==(l=t.adhoc_filters)||l.forEach((e=>{e.operator===u.ux.TemporalRange&&e.isExtra&&(s.adhoc_filters||(s.adhoc_filters=[]),s.adhoc_filters.push({...e,comparator:"No filter"}))}));const c={...t,...s,dashboards:r};let d=0,h=i.cT.Table;if(c.datasource){const[e,t]=c.datasource.split("__");d=parseInt(e,10);const r=t.charAt(0).toUpperCase()+t.slice(1);r in i.cT&&(h=i.cT[r])}return{params:JSON.stringify(c),slice_name:e,viz_type:c.viz_type,datasource_id:d,datasource_type:h,dashboards:r,owners:n,query_context:JSON.stringify((0,p.sx)({formData:c,force:!1,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null}))}},R=(e,t,r)=>{const n=[];return e?n.push((0,d.WR)((0,l.t)("Chart [%s] has been saved",t))):n.push((0,d.WR)((0,l.t)("Chart [%s] has been overwritten",t))),r&&(r.new?n.push((0,d.WR)((0,l.t)("Dashboard [%s] just got created and chart [%s] was added to it",r.title,t))):n.push((0,d.WR)((0,l.t)("Chart [%s] was added to dashboard [%s]",t,r.title)))),n},I=(e,t,r,n)=>async(a,o)=>{var s;const{slice_id:i,owners:l,form_data:d}=e,u=null==(s=o().explore)?void 0:s.form_data;try{const e=await c.A.put({endpoint:`/api/v1/chart/${i}`,jsonPayload:S(t,u,r,l,d)});return a(A(e.json)),R(!1,t,n).map(a),e.json}catch(e){throw a(T()),e}},C=(e,t,r)=>async(n,a)=>{var o;const s=null==(o=a().explore)?void 0:o.form_data;try{const a=await c.A.post({endpoint:"/api/v1/chart/",jsonPayload:S(e,s,t,[],{})});return n(A(a.json)),R(!0,e,r).map(n),a.json}catch(e){throw n(T()),e}},O=e=>async t=>{try{return(await c.A.post({endpoint:"/api/v1/dashboard/",jsonPayload:{dashboard_title:e}})).json}catch(e){throw t(T()),e}},D=e=>async t=>{try{return(await c.A.get({endpoint:`/api/v1/chart/${e.slice_id}?q=${s().encode({columns:["dashboards.id"]})}`})).json.result.dashboards.map((({id:e})=>e))}catch(e){throw t(T()),e}}},84080:(e,t,r)=>{"use strict";r.d(t,{V:()=>c,b:()=>l});var n=r(96453),a=r(82097),o=r(75827),s=r(2445);const i=n.I4.div`
  width: 100%;
  > span {
    display: flex;
    align-items: center;
  }

  .option-label {
    display: inline-block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    & ~ i {
      margin-left: ${({theme:e})=>e.gridUnit}px;
    }
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,l=e=>(0,s.Y)(i,{children:(0,s.Y)(a.S,{...e})}),c=e=>(0,s.Y)(i,{children:(0,s.Y)(o.K,{...e})})},95483:(e,t,r)=>{"use strict";r.d(t,{Fp:()=>h,II:()=>_,K8:()=>o,RX:()=>l,Sd:()=>p,Vw:()=>m,Wy:()=>u,Z_:()=>f,_R:()=>E,_T:()=>c,dq:()=>a,nS:()=>i,sJ:()=>d,sO:()=>y,ux:()=>s,y3:()=>g});var n=r(95579);const a={AVG:"AVG",COUNT:"COUNT",COUNT_DISTINCT:"COUNT_DISTINCT",MAX:"MAX",MIN:"MIN",SUM:"SUM"},o=Object.values(a);var s;!function(e){e.Equals="EQUALS",e.NotEquals="NOT_EQUALS",e.LessThan="LESS_THAN",e.LessThanOrEqual="LESS_THAN_OR_EQUAL",e.GreaterThan="GREATER_THAN",e.GreaterThanOrEqual="GREATER_THAN_OR_EQUAL",e.In="IN",e.NotIn="NOT_IN",e.Like="LIKE",e.CaseInsensitiveLike="ILIKE",e.IsNotNull="IS_NOT_NULL",e.IsNull="IS_NULL",e.LatestPartition="LATEST_PARTITION",e.IsTrue="IS_TRUE",e.IsFalse="IS_FALSE",e.TemporalRange="TEMPORAL_RANGE"}(s||(s={}));const i={[s.Equals]:{display:(0,n.t)("Equal to (=)"),operation:"=="},[s.NotEquals]:{display:(0,n.t)("Not equal to ()"),operation:"!="},[s.LessThan]:{display:(0,n.t)("Less than (<)"),operation:"<"},[s.LessThanOrEqual]:{display:(0,n.t)("Less or equal (<=)"),operation:"<="},[s.GreaterThan]:{display:(0,n.t)("Greater than (>)"),operation:">"},[s.GreaterThanOrEqual]:{display:(0,n.t)("Greater or equal (>=)"),operation:">="},[s.In]:{display:(0,n.t)("In"),operation:"IN"},[s.NotIn]:{display:(0,n.t)("Not in"),operation:"NOT IN"},[s.Like]:{display:(0,n.t)("Like"),operation:"LIKE"},[s.CaseInsensitiveLike]:{display:(0,n.t)("Like (case insensitive)"),operation:"ILIKE"},[s.IsNotNull]:{display:(0,n.t)("Is not null"),operation:"IS NOT NULL"},[s.IsNull]:{display:(0,n.t)("Is null"),operation:"IS NULL"},[s.LatestPartition]:{display:(0,n.t)("use latest_partition template"),operation:"LATEST PARTITION"},[s.IsTrue]:{display:(0,n.t)("Is true"),operation:"=="},[s.IsFalse]:{display:(0,n.t)("Is false"),operation:"=="},[s.TemporalRange]:{display:(0,n.t)("TEMPORAL_RANGE"),operation:"TEMPORAL_RANGE"}},l=Object.values(s),c=(s.Like,s.CaseInsensitiveLike,[s.Equals,s.NotEquals,s.LessThan,s.LessThanOrEqual,s.GreaterThan,s.GreaterThanOrEqual]),d=new Set([s.In,s.NotIn]),u=new Set([s.LatestPartition,s.TemporalRange]),p=[s.IsNotNull,s.IsNull,s.LatestPartition,s.IsTrue,s.IsFalse],m=/^(LONG|DOUBLE|FLOAT)?(SUM|AVG|MAX|MIN|COUNT)\([A-Z0-9_."]*\)$/i,h={time_range:(0,n.t)("Time range"),granularity_sqla:(0,n.t)("Time column"),time_grain_sqla:(0,n.t)("Time grain"),granularity:(0,n.t)("Time granularity")},_={time_range:"__time_range",granularity_sqla:"__time_col",time_grain_sqla:"__time_grain",granularity:"__granularity"},f=240,E=320,y=0,g=new Set(["all_columns","groupby","metrics","percent_metrics","order_by_cols"])},17596:(e,t,r)=>{"use strict";r.d(t,{a6:()=>k,jX:()=>b,Tb:()=>S,QC:()=>v,GW:()=>A,dI:()=>N,LK:()=>R,QQ:()=>y});var n={};r.r(n),r.d(n,{NVD3TimeSeries:()=>f,annotations:()=>_,colorScheme:()=>m,datasourceAndVizType:()=>p,sqlaTimeSeries:()=>h});var a=r(41811),o=r(5795),s=r(18253),i=r(36818),l=r(7858),c=r(95579),d=r(93327),u=r(2445);const p={controlSetRows:[["datasource"],["viz_type"],[{name:"slice_id",config:{type:"HiddenControl",label:(0,c.t)("Chart ID"),hidden:!0,description:(0,c.t)("The id of the active chart")}},{name:"cache_timeout",config:{type:"HiddenControl",label:(0,c.t)("Cache Timeout (seconds)"),hidden:!0,description:(0,c.t)("The number of seconds before expiring the cache")}},{name:"url_params",config:{type:"HiddenControl",label:(0,c.t)("URL parameters"),hidden:!0,description:(0,c.t)("Extra parameters for use in jinja templated queries")}}]]},m={label:(0,c.t)("Color scheme"),controlSetRows:[["color_scheme"]]},h={label:(0,c.t)("Time"),description:(0,c.t)("Time related form attributes"),expanded:!0,controlSetRows:[["granularity_sqla"],["time_range"]]},_={label:(0,c.t)("Annotations and layers"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:[],description:(0,c.t)("Annotation layers"),renderTrigger:!0,tabOverride:"data"}}]]},f=[{label:(0,c.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,c.t)("Contribution"),default:!1,description:(0,c.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,c.t)("Advanced analytics"),tabOverride:"data",description:(0,c.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,u.Y)(d.y,{children:(0,c.t)("Rolling window")})],[{name:"rolling_type",config:{type:"SelectControl",label:(0,c.t)("Rolling function"),default:"None",choices:[["None",(0,c.t)("None")],["mean",(0,c.t)("mean")],["sum",(0,c.t)("sum")],["std",(0,c.t)("std")],["cumsum",(0,c.t)("cumsum")]],description:(0,c.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}},{name:"rolling_periods",config:{type:"TextControl",label:(0,c.t)("Periods"),isInt:!0,description:(0,c.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,c.t)("Min periods"),isInt:!0,description:(0,c.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,u.Y)(d.y,{children:(0,c.t)("Time comparison")})],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,c.t)("Time shift"),choices:[["1 day",(0,c.t)("1 day")],["1 week",(0,c.t)("1 week")],["28 days",(0,c.t)("28 days")],["30 days",(0,c.t)("30 days")],["52 weeks",(0,c.t)("52 weeks")],["1 year",(0,c.t)("1 year")],["104 weeks",(0,c.t)("104 weeks")],["2 years",(0,c.t)("2 years")],["156 weeks",(0,c.t)("156 weeks")],["3 years",(0,c.t)("3 years")]],description:(0,c.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,c.t)("Calculation type"),default:"values",choices:[["values",(0,c.t)("Actual values")],["absolute",(0,c.t)("Difference")],["percentage",(0,c.t)("Percentage change")],["ratio",(0,c.t)("Ratio")]],description:(0,c.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,u.Y)(d.y,{children:(0,c.t)("Resample")})],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,c.t)("Rule"),default:null,choices:[["1T",(0,c.t)("1T")],["1H",(0,c.t)("1H")],["1D",(0,c.t)("1D")],["7D",(0,c.t)("7D")],["1M",(0,c.t)("1M")],["1AS",(0,c.t)("1AS")]],description:(0,c.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,c.t)("Method"),default:null,choices:[["asfreq",(0,c.t)("asfreq")],["bfill",(0,c.t)("bfill")],["ffill",(0,c.t)("ffill")],["median",(0,c.t)("median")],["mean",(0,c.t)("mean")],["sum",(0,c.t)("sum")]],description:(0,c.t)("Pandas resample method")}}]]}],E=(0,a.A)(((e,t)=>{const{sectionOverrides:r={},controlOverrides:a,controlPanelSections:s=[]}=t,c={...n};Object.entries(r).forEach((([e,t])=>{"object"==typeof t&&t.constructor===Object?c[e]={...c[e],...t}:c[e]=t}));const{datasourceAndVizType:d}=c,u=[o.cT.Query,o.cT.Table].includes(e)?["granularity"]:["granularity_sqla","time_grain_sqla"];return[d].concat(s.filter(i.lW)).map((e=>{const{controlSetRows:t}=e;return{...e,controlSetRows:(null==t?void 0:t.map((e=>e.filter((e=>"string"!=typeof e||!u.includes(e))).map((e=>(0,l.s)(e,a))))))||[]}}))}));function y(e,t){const r=(0,s.A)().get(e)||{};return E(t,r)}const g=(0,a.A)(((e,t)=>{const{controlOverrides:r={},controlPanelSections:n=[]}=t,a=(0,l.s)(function(e,t){var r;return null!=(r=e.filter(i.lW).map((e=>e.controlSetRows)).flat(2).find((e=>t===e||null!==e&&"object"==typeof e&&"name"in e&&e.name===t)))?r:null}(n,e),r);return a&&"config"in a?a.config:a})),v=function(e,t){const r=(0,s.A)().get(t)||{};return g(e,r)};var T=r(62952);function b(e,t){const{mapStateToProps:r}=e;let n={...e},{value:a}=n;return r&&t&&(n={...e,...r.call(e,t,e)},a=a||n.value),"function"==typeof n.initialValue&&(n.initialValue=n.initialValue(n,t),"function"==typeof n.initialValue&&delete n.initialValue),n.initialValue&&(a=n.initialValue,delete n.initialValue),"function"==typeof n.default&&(n.default=n.default(n,t),"function"==typeof n.default&&delete n.default),n.default&&void 0===a&&(a=n.default),a&&n.multi&&!Array.isArray(a)&&(a=[a]),n.value=a,function(e,t){const r=e.validators,{externalValidationErrors:n=[]}=e,a=[];r&&r.length>0&&r.forEach((r=>{const n=r.call(e,e.value,t);n&&a.push(n)}));const o=[...a,...n];return{...e,validationErrors:o}}(function(e){if("SelectControl"===e.type&&!e.freeForm&&e.choices&&e.value){const t={...e},r=e.choices,n=(0,T.A)(e.value),a=r.map((e=>e[0]));if(e.multi&&n.length>0)return t.value=n.filter((e=>a.includes(e))),t;if(!e.multi&&!a.includes(n[0]))return t.value=null,t}return e}(n),n)}function A(e,t,r){if(!e)return null;const n={...e,value:r};return null!=t&&t.controls||null===t?b(n,t):n}function S(e,t,r,n){const a={};return y(e,t).forEach((e=>e.controlSetRows.forEach((e=>e.forEach((e=>{if(null!=e&&e.config&&e.name){const{config:t,name:o}=e;a[o]=A(t,r,n[o])}})))))),a}function R(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];t[r]=n.value})),t}var I=r(62193),C=r.n(I),O=r(91778),D=r(808);const w=(e,t,r)=>t.options&&"string"==typeof r&&(!C()(t.options)&&t.options.some((e=>Array.isArray(e)?e[0]===r:e.column_name===r))||!C()(null==e?void 0:e.columns))?e.columns.some((e=>e.column_name===r)):t.savedMetrics&&(0,O.S_)(r)&&(t.savedMetrics.some((e=>e.metric_name===r))||!C()(null==e?void 0:e.metrics))?e.metrics.some((e=>e.metric_name===r)):t.columns&&((0,O.IN)(r)||(0,D.md)(r))&&(!C()(t.columns)&&t.columns.some((e=>{var t;return e.column_name===(null==(t=r.column)?void 0:t.column_name)||e.column_name===r.subject}))||!C()(null==e?void 0:e.columns))?e.columns.some((e=>{var t;return e.column_name===(null==(t=r.column)?void 0:t.column_name)||e.column_name===r.subject})):!!(0,O.WL)(r)&&(Object.assign(r,{datasourceWarning:!0}),!0),N=(e,t,r)=>{if(null!=r){if(Array.isArray(r)){const n=r.filter((r=>w(e,t,r)));return n.length>0?n:t.default}return w(e,t,r)?r:t.default}};var L=r(90179),q=r.n(L),x=r(24928),U=r(91715);const P=["metric","metrics","metric_2","size","x","y","secondary_metric"],F=["groupby","columns","groupbyColumns","groupbyRows","entity","series","series_columns"],M=["granularity_sqla","time_grain_sqla","time_range","adhoc_filters","limit","timeseries_limit_metric","series_limit_metric","order_desc","row_limit","x_axis","rolling_type","rolling_periods","min_periods","time_compare","comparison_type","resample_rule","resample_method"];class k{constructor(e){var t,r;this.sfd=void 0;const n=Object.freeze(e),a=null==n||null==(t=n.standardizedFormData)?void 0:t.memorizedFormData,o=n.viz_type;let s,i=new Map;if(Array.isArray(a)&&a.length>0&&n.datasource===(null==(r=a.slice(-1)[0][1])?void 0:r.datasource))i=new Map(n.standardizedFormData.memorizedFormData),i.has(o)&&i.delete(o),i.set(o,n),s=k.getStandardizedControls(n);else{const e=q()(n,"standardizedFormData");i.set(o,e),s=k.getStandardizedControls(e)}this.sfd={controls:s,memorizedFormData:i}}static getStandardizedControls(e){const t={metrics:[],columns:[]};if(Object.entries(e).forEach((([e,r])=>{P.includes(e)&&t.metrics.push(...(0,T.A)(r)),F.includes(e)&&t.columns.push(...(0,T.A)(r))})),(0,i.Wk)(e)){const{metrics:r,columns:n}=e.standardizedFormData.controls;t.metrics.push(...r),t.columns.push(...n)}return t}getLatestFormData(e){return this.has(e)?this.get(e):this.memorizedFormData.slice(-1)[0][1]}get standardizedControls(){return this.sfd.controls}get memorizedFormData(){return Array.from(this.sfd.memorizedFormData.entries())}serialize(){return{controls:this.standardizedControls,memorizedFormData:this.memorizedFormData}}has(e){return this.sfd.memorizedFormData.has(e)}get(e){return this.sfd.memorizedFormData.get(e)}transform(e,t){const r=this.getLatestFormData(e),n={};M.forEach((e=>{e in t.form_data&&(n[e]=t.form_data[e])}));const a=(0,U.Eu)(t,{...r,...n,viz_type:e}),o={...R(a),standardizedFormData:this.serialize()};let i={formData:o,controlsState:a};const l=(0,s.A)().get(e);if(null!=l&&l.formDataOverrides){(0,x.a)().setStandardizedControls(o);const e={...l.formDataOverrides(o),standardizedFormData:{controls:{...(0,x.a)().controls},memorizedFormData:this.memorizedFormData}};(0,x.a)().clear(),i={formData:e,controlsState:(0,U.Eu)(t,e)}}return i.controlsState=(0,U.Eu)({...t,controls:i.controlsState},i.formData),i}}},86274:(e,t,r)=>{"use strict";r.d(t,{b5:()=>c,bk:()=>n,vL:()=>i});var n,a=r(93505),o=r(96540);!function(e){e.Loading="loading",e.Complete="complete",e.Error="error"}(n||(n={}));const s={status:n.Loading,result:null,error:null};function i(e,t){return(0,o.useMemo)((()=>{if(e.status!==n.Complete)return e;try{return{...e,result:t(e.result)}}catch(e){return{status:n.Error,result:null,error:e}}}),[e,t])}const l=e=>e.result;function c(e){return i(function(e){const[t,r]=(0,o.useState)(s),i=(0,o.useRef)((()=>{}));return(0,o.useEffect)((()=>{r(s),i.current();let t=!1;return i.current=()=>{t=!0},(0,a.A)({method:"GET",endpoint:e})({}).then((e=>{t||r({status:n.Complete,result:e,error:null})})).catch((e=>{t||r({status:n.Error,result:null,error:e})})),()=>{t=!0}}),[e]),t}(e),l)}},43031:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var n=r(58561),a=r.n(n),o=r(93020),s=r(35742),i=r(51436);const l=(0,o.xP)({reducerPath:"queryApi",tagTypes:["Catalogs","Schemas","Tables","DatabaseFunctions","QueryValidations","TableMetadatas","SqlLabInitialState","EditorQueries"],endpoints:()=>({}),baseQuery:({endpoint:e,urlParams:t,transformResponse:r,method:n="GET",parseMethod:o="json",...l},c)=>s.A.request({...l,endpoint:`${e}${t?`?q=${a().encode(t)}`:""}`,method:n,parseMethod:o,signal:c.signal}).then((e=>{var t;return{data:null!=(t=null==r?void 0:r(e))?t:e}})).catch((e=>(0,i.h4)(e).then((t=>({error:{error:(null==t?void 0:t.message)||(null==t?void 0:t.error)||e.statusText,errors:(null==t?void 0:t.errors)||[],status:e.status}})))))})},3247:(e,t,r)=>{"use strict";r.d(t,{IX:()=>l,Ip:()=>u});var n=r(96540),a=r(86963);const o=r(43031).F.injectEndpoints({endpoints:e=>({schemas:e.query({providesTags:[{type:"Schemas",id:"LIST"}],query:({dbId:e,catalog:t,forceRefresh:r})=>({endpoint:`/api/v1/database/${e}/schemas/`,urlParams:{force:r,...void 0!==t&&{catalog:t}},transformResponse:({json:e})=>e.result.sort().map((e=>({value:e,label:e,title:e})))}),serializeQueryArgs:({queryArgs:{dbId:e,catalog:t}})=>({dbId:e,catalog:t})})})}),{useLazySchemasQuery:s,useSchemasQuery:i,endpoints:l,util:c}=o,d=[];function u(e){const{dbId:t,catalog:r,onSuccess:o,onError:l}=e||{},[c]=s(),u=i({dbId:t,catalog:r||void 0,forceRefresh:!1},{skip:!t});(0,n.useEffect)((()=>{u.isError&&(null==l||l(u.error))}),[u.isError,u.error,l]);const p=(0,a.A)(((e,t,r=!1)=>{!e||u.currentData&&!r||c({dbId:e,catalog:t,forceRefresh:r}).then((({isSuccess:e,isError:t,data:n})=>{e&&(null==o||o(n||d,r)),t&&(null==l||l(u.error))}))}));(0,n.useEffect)((()=>{p(t,r,!1)}),[t,r,p]);const m=(0,n.useCallback)((()=>{p(t,r,!0)}),[t,r,p]);return{...u,refetch:m}}},42242:(e,t,r)=>{"use strict";r.d(t,{PG:()=>m,ii:()=>p,rq:()=>u,ty:()=>_,z7:()=>h});var n=r(96540),a=r(86963),o=r(32132),s=r(43031),i=r(3247);const l=s.F.injectEndpoints({endpoints:e=>({tables:e.query({providesTags:["Tables"],query:({dbId:e,catalog:t,schema:r,forceRefresh:n})=>({endpoint:`/api/v1/database/${null!=e?e:"undefined"}/tables/`,urlParams:{force:n,schema_name:r?encodeURIComponent(r):"",...t&&{catalog_name:t}},transformResponse:({json:e})=>({options:e.result,hasMore:e.count>e.result.length})}),serializeQueryArgs:({queryArgs:{dbId:e,schema:t}})=>({dbId:e,schema:t})}),tableMetadata:e.query({providesTags:e=>e?[{type:"TableMetadatas",id:e.name},{type:"TableMetadatas",id:"LIST"}]:[{type:"TableMetadatas",id:"LIST"}],query:({dbId:e,catalog:t,schema:r,table:n})=>({endpoint:`/api/v1/database/${e}/table_metadata/${(0,o.zJ)({name:n,catalog:t,schema:r})}`,transformResponse:({json:e})=>e})}),tableExtendedMetadata:e.query({query:({dbId:e,catalog:t,schema:r,table:n})=>({endpoint:`/api/v1/database/${e}/table_metadata/extra/${(0,o.zJ)({name:n,catalog:t,schema:r})}`,transformResponse:({json:e})=>e})})})}),{useLazyTablesQuery:c,useTablesQuery:d,useTableMetadataQuery:u,useTableExtendedMetadataQuery:p,endpoints:m,util:h}=l;function _(e){const{dbId:t,catalog:r,schema:o,onSuccess:s,onError:l}=e||{},u=(0,n.useRef)(!1),{currentData:p,isFetching:m}=(0,i.Ip)({dbId:t,catalog:r||void 0}),h=(0,n.useMemo)((()=>new Set(null==p?void 0:p.map((({value:e})=>e)))),[p]),_=Boolean(t&&o&&!m&&h.has(o)),f=d({dbId:t,catalog:r,schema:o,forceRefresh:!1},{skip:!_}),[E]=c(),y=(0,a.A)(((e,t)=>{null==s||s(e,t)})),g=(0,a.A)((e=>{null==l||l(e)})),v=(0,n.useCallback)((()=>{_&&E({dbId:t,catalog:r,schema:o,forceRefresh:!0}).then((({isSuccess:e,isError:t,data:r,error:n})=>{e&&r&&y(r,!0),t&&g(n)}))}),[t,r,o,_,y,g,E]);return(0,n.useEffect)((()=>{if(u.current){const{requestId:e,isSuccess:t,isError:r,isFetching:n,currentData:a,error:o,originalArgs:s}=f;null!=s&&s.forceRefresh||!e||n||(t&&a&&y(a,!1),r&&g(o))}else u.current=!0}),[f,y,g]),{...f,refetch:v}}},84248:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o});var n=r(96540),a=r(27023);function o(e,t=a.jW){const[r,o]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const r=setTimeout((()=>{o(e)}),t);return()=>{clearTimeout(r)}}),[e,t]),r}},86963:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(14811);function a(e){return(0,n.A)(e)}},35700:(e,t,r)=>{"use strict";r.d(t,{AI:()=>W,AP:()=>H,A_:()=>M,C7:()=>C,CY:()=>K,Ek:()=>k,FA:()=>l,FO:()=>d,GM:()=>$,HH:()=>S,HK:()=>i,Lb:()=>B,Mr:()=>Q,Ob:()=>G,PN:()=>I,PV:()=>z,R2:()=>T,Ro:()=>P,U7:()=>u,Vy:()=>Z,XC:()=>Y,Xj:()=>o,YC:()=>X,ar:()=>v,bD:()=>x,c1:()=>E,ci:()=>y,cm:()=>R,es:()=>s,fL:()=>j,ft:()=>V,g$:()=>F,gi:()=>U,hK:()=>L,hl:()=>m,k8:()=>w,ky:()=>c,oA:()=>b,oW:()=>p,pi:()=>q,q0:()=>g,r2:()=>_,tE:()=>a,tO:()=>n,tw:()=>h,v2:()=>N,v6:()=>A,vp:()=>D,wc:()=>f,xb:()=>O});const n="load_chart",a="render_chart",o="hide_browser_tab",s="mount_dashboard",i="mount_explorer",l="select_dashboard_tab",c="force_refresh_chart",d="change_explore_controls",u="toggle_edit_dashboard",p="force_refresh_dashboard",m="periodic_render_dashboard",h="explore_dashboard_chart",_="export_csv_dashboard_chart",f="export_xlsx_dashboard_chart",E="change_dashboard_filter",y="dataset_creation_empty_cancellation",g="dataset_creation_database_cancellation",v="dataset_creation_schema_cancellation",T="dataset_creation_table_cancellation",b="dataset_creation_success",A="spa_navigation",S="confirm_overwrite_dashboard_metadata",R="dashboard_download_as_image",I="dashboard_download_as_pdf",C="chart_download_as_image",O="chart_download_as_csv",D="chart_download_as_csv_pivoted",w="chart_download_as_xls",N="chart_download_as_json",L="sqllab_warn_local_storage_usage",q="sqllab_fetch_failed_query",x="drill_by_modal_opened",U="further_drill_by",P="drill_by_edit_chart",F="drill_by_breadcrumb_clicked",M="sqllab_monitor_local_storage_usage",k="sqllab_create_table_as",Y="sqllab_create_view_as",Q="sqllab_run_query",j="sqllab_stop_query",B="sqllab_estimate_query_cost",H="sqllab_save_query",$="sqllab_copy_link",G="sqllab_format_sql",V="sqllab_download_csv",W="sqllab_copy_result_to_clipboard",z="sqllab_create_chart",K="sqllab_load_tab_state",X=new Set([n,a,o,q,K]),Z=(new Set([s,l,h,c,_,E,d,u,p,m,i,S,R,I,C]),{timeOriginOffset:0,markTimeOrigin(){this.timeOriginOffset=window.performance.now()},getTimestamp(){return Math.round(window.performance.now()-this.timeOriginOffset)}})},7735:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LOG_EVENT:()=>n,logEvent:()=>a});const n="LOG_EVENT";function a(e,t){return r=>r({type:n,payload:{eventName:e,eventData:t}})}},355:(e,t,r)=>{"use strict";r.d(t,{fv:()=>g});var n=r(35742),a=r(51436),o=r(62952),s=r(5362),i=r(93505),l=r(27366),c=r(38708);const d="polling",u="last_async_event_id";let p,m,h,_,f,E,y;const g=async e=>new Promise(((t,r)=>{const i=e.job_id;var l;l=async e=>{switch(e.status){case"done":{let{data:s,status:i}=await(async e=>{let t,r="success";try{const{json:r}=await n.A.get({endpoint:String(e.result_url)});t="result"in r?r.result:r}catch(e){r="error",t=await(0,a.h4)(e)}return{status:r,data:t}})(e);s=(0,o.A)(s),"success"===i?t(s):r(s);break}case"error":{const t=(0,a.io)(e);r(t);break}default:s.A.warn("received event with status",e.status)}var l;f[l=i]&&delete f[l]},f[i]=l})),v=(0,i.A)({method:"GET",endpoint:"/api/v1/async_event/"}),T=async e=>{e.forEach((e=>{const t=e.job_id,r=f[t];r?(r(e),delete E[t]):(E[t]||(E[t]=0),E[t]+=1,E[t]<=6?setTimeout((()=>{T([e])}),100*E[t]):(delete E[t],s.A.warn("listener not found for job_id",e.job_id))),(e=>{y=e.id;try{localStorage.setItem(u,y)}catch(e){s.A.warn("Error saving event Id to localStorage",e)}})(e)}))},b=async()=>{const e=y?{last_id:y}:{};if(Object.keys(f).length)try{const{result:t}=await v(e);null!=t&&t.length&&await T(t)}catch(e){s.A.warn(e)}m===d&&(_=window.setTimeout(b,h))};let A,S,R=0;const I=()=>{let e=p.GLOBAL_ASYNC_QUERIES_WEBSOCKET_URL;y&&(e+=`?last_id=${y}`),S=new WebSocket(e),S.addEventListener("open",(()=>{s.A.log("WebSocket connected"),clearTimeout(A),R=0})),S.addEventListener("close",(()=>{A=setTimeout((()=>{R+=1,R<=6?I():(s.A.warn("WebSocket not available, falling back to async polling"),b())}),2500)})),S.addEventListener("error",(()=>{S.readyState<2&&S.close()})),S.addEventListener("message",(async e=>{let t=[];try{t=[JSON.parse(e.data)],await T(t)}catch(e){s.A.warn(e)}}))};(e=>{if((0,l.G7)(l.TO.GlobalAsyncQueries)){_&&clearTimeout(_),f={},E={},y=null,p=(0,c.A)().common.conf,m=p.GLOBAL_ASYNC_QUERIES_TRANSPORT||d,h=p.GLOBAL_ASYNC_QUERIES_POLLING_DELAY||500;try{y=localStorage.getItem(u)}catch(e){s.A.warn("Failed to fetch last event Id from localStorage")}m===d&&b(),"ws"===m&&I()}})()},35839:(e,t,r)=>{"use strict";r.d(t,{As:()=>E,CE:()=>b,OL:()=>T,ZT:()=>g,j2:()=>y,r$:()=>S,sF:()=>A,uI:()=>v});var n=r(29132),a=r.n(n),o=r(5187),s=r.n(o),i=r(62216),l=r.n(i),c=r(90179),d=r.n(c),u=r(42194),p=r.n(u),m=r(2404),h=r.n(m),_=r(43561),f=(r(97211),r(62952));function E(e,t,r){const n={...e[t]},a={...r};return a.id||(a.id=(0,_.Ak)()),n[a.id]=a,{...e,[t]:n}}function y(e,t,r,n){const a={...e[t]};return a[r.id]={...a[r.id],...n},{...e,[t]:a}}function g(e,t,r,n,a="id"){const o=[];return e[t].forEach((e=>{r[a]===e[a]?o.push({...e,...n}):o.push(e)})),{...e,[t]:o}}function v(e,t,r,n="id"){const a=[];return e[t].forEach((e=>{r[n]!==e[n]&&a.push(e)})),{...e,[t]:a}}function T(e,t){let r;return e.forEach((e=>{e.id===t&&(r=e)})),r}function b(e,t,r,n=!1){const a={...r};a.id||(a.id=(0,_.Ak)());const o={};return o[t]=n?[a,...e[t]]:[...e[t],a],{...e,...o}}function A(e,t,r,n=!1){const a=[...r];a.forEach((e=>{e.id||(e.id=(0,_.Ak)())}));const o={};return o[t]=n?[...a,...e[t]]:[...e[t],...a],{...e,...o}}function S(e,t,r={ignoreUndefined:!1,ignoreNull:!1,ignoreFields:[]}){var n;let o=e,i=t;if(r.ignoreUndefined&&(o=p()(o,l()),i=p()(i,l())),r.ignoreNull&&(o=p()(o,s()),i=p()(i,s())),null!=(n=r.ignoreFields)&&n.length){const e=(0,f.A)(r.ignoreFields);return a()(o,i,((t,r)=>h()((0,f.A)(t).map((t=>d()(t,e))),(0,f.A)(r).map((t=>d()(t,e))))))}return h()(o,i)}},55556:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>i,D2:()=>u,Ky:()=>d,Z6:()=>s,bp:()=>l,pb:()=>c});var n=r(7148),a=r(76968),o=r(94963);const s=e=>e||void 0,i=()=>{const e=(0,n.Ay)();return Object.fromEntries(e.getColorMap())},l=e=>{var t;return(null==(t=(0,a.A)().get(e))?void 0:t.colors)||[]},c=e=>{const t=(null==e?void 0:e.shared_label_colors)||{},r=(null==e?void 0:e.label_colors)||{},a=(0,n.Ay)().getColorMap();return Array.from(a.entries()).every((([e,n])=>t.hasOwnProperty(e)&&(t[e]===n||void 0!==r[e])))},d=e=>{const t=(0,n.Ay)();o.getNamespace(s(e)).resetColors(),t.clear()},u=(e,t=!1)=>{const r=s(null==e?void 0:e.color_namespace),a=o.getNamespace(r),l=null==e?void 0:e.color_scheme,c=(null==e?void 0:e.label_colors)||{},d=(null==e?void 0:e.shared_label_colors)||{};a.resetColors(),Object.keys(c).forEach((e=>{a.setColor(e,c[e])})),((e,t)=>{const r=s(e),a=o.getNamespace(r);(0,n.Ay)().updateColorMap(a,t)})(null==e?void 0:e.color_namespace,l);const u=t?i():d;Object.keys(u).forEach((e=>{a.setColor(e,u[e])}))}},73135:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(15151);const a=e=>(async e=>{if((0,n.nr)())try{const t=new ClipboardItem({"text/plain":e()});await navigator.clipboard.write([t])}catch{const t=await e();await navigator.clipboard.writeText(t)}else{const t=await e();await navigator.clipboard.writeText(t)}})(e).catch((()=>e().then((e=>new Promise(((t,r)=>{const n=document.getSelection();if(n){n.removeAllRanges();const t=document.createRange(),a=document.createElement("span");a.textContent=e,a.style.position="fixed",a.style.top="0",a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",document.body.appendChild(a),t.selectNode(a),n.addRange(t);try{document.execCommand("copy")||r()}catch(e){r()}document.body.removeChild(a),n.removeRange?n.removeRange(t):n.removeAllRanges()}t()}))))))},84666:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});const n=(0,r(41811).A)(((e,t,r)=>!!r&&Object.values(r).some((r=>r.some((([r,n])=>r===e&&n===t))))))},67295:(e,t,r)=>{"use strict";r.d(t,{S:()=>n});const n=e=>{var t,r;return null!=(t=e.uid)?t:`${null!=(r=e.id)?r:"None"}__${e.type}`}},92201:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});const n=()=>{var e,t;return null==(e=window)||null==(t=e.navigator)?void 0:t.webdriver}},12066:(e,t,r)=>{"use strict";function n(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}t.add(r)}return r}))}r.d(t,{J:()=>n})},32132:(e,t,r)=>{"use strict";r.d(t,{Dl:()=>b,JE:()=>T,Kx:()=>y,P3:()=>p,oq:()=>g,zJ:()=>A});var n=r(62193),a=r.n(n),o=r(35742),s=r(13270),i=r(58561),l=r.n(i),c=r(27023),d=r(68921),u=r(36878);function p({name:e,type:t}){const r=new URLSearchParams(window.location.search).get(e);switch(t){case"number":return r?"true"===r.toLowerCase()?1:"false"===r.toLowerCase()?0:Number.isNaN(Number(r))?null:Number(r):null;case"object":return r?JSON.parse(r):null;case"boolean":return r?"false"!==r.toLowerCase()&&"0"!==r:null;case"rison":if(!r)return null;try{return l().decode(r)}catch{return r}default:return r}}function m(e){const t=new URLSearchParams;return new URLSearchParams(window.location.search).forEach(((r,n)=>{e.includes(n)||t.append(n,r)})),t}function h(e){const t=[];return e.forEach(((e,r)=>t.push([r,e]))),t}function _(e){const t=e||c.v2,r=m(t),n=(0,d.ug)();return a()(n)||t.includes(c.vX.preselectFilters.name)||r.append(c.vX.preselectFilters.name,JSON.stringify((0,u.A)((0,d.ug)()))),h(r)}function f(){const e=m(c.Xs),t=(0,d.ug)();return a()(t)||e.append(c.vX.preselectFilters.name,JSON.stringify((0,u.A)((0,d.ug)()))),h(e)}function E(e,t){return o.A.post({endpoint:e,jsonPayload:t}).then((e=>e.json.url))}function y(e,t){return E("/api/v1/explore/permalink",{formData:e,urlParams:_(t)})}function g({dashboardId:e,dataMask:t,activeTabs:r,anchor:n}){return E(`/api/v1/dashboard/${e}/permalink`,{urlParams:f(),dataMask:t,activeTabs:r,anchor:n})}const v=/^([^:/?#]+:)?(?:(\/\/)?([^/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/;function T(e){const t=e.match(v)||[];return"string"==typeof t[1]&&t[1].length>0||"//"===t[2]||"string"==typeof t[3]&&t[3].length>0}function b(e){const t=e.match(v)||[];return!T(e)||(0,s.A)(t[1])||e.startsWith("//")?e:`//${e}`}function A(e){const t=[];return Object.keys(e).forEach((r=>{const n=e[r];null!=n&&t.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)})),t.length>0?`?${t.join("&")}`:""}},69070:(e,t,r)=>{"use strict";r.d(t,{sm:()=>Oe,vq:()=>Ne,M_:()=>Le});var n=r(60258),a=r(1265),o=r(43031),s=r(95272),i=r(68458),l=r(56091),c=r(90179),d=r.n(c),u=r(93491),p=r(48285),m=r(52123),h=r(72173),_=r(20824),f=r(45881),E=r(38970),y=r.n(E),g=r(34975),v=r(46074),T=r(3618),b=r(81151),A=r(92475),S=r(49588);function R(e){return[S.QP,S.oT,S.xY,S.rG].indexOf(e.type)>-1}var I=r(578),C=r(67054),O=r(54193),D=r(72619);const w={[S.$9]:{[S.oT]:!0,[S.QP]:!0,[S.xY]:!0},[S.B8]:{[S.oT]:!0,[S.QP]:!0,[S.xY]:!0}};function N({parentType:e,childType:t}){if(!e||!t)return!1;const r=w[e];return!!r&&Boolean(r[t])}function L({dropResult:e,layout:t}){const{dragging:r,destination:n}=e,a=r.type,o=t[n.id],s=o.type;let i=(0,D.A)(a,r.meta);i.parents=(o.parents||[]).concat(o.id),R(r)&&(i.meta.width=(0,C.A)({dropResult:e,layout:t})||void 0);const l=N({parentType:s,childType:a}),c={[i.id]:i};if(l){const e=(0,D.A)(S._8);e.children=[i.id],e.parents=(o.parents||[]).concat(o.id),c[e.id]=e,i.parents=e.parents.concat(e.id),i=e}else if(a===S.wc){const e=(0,D.A)(S.B8);e.parents=(o.parents||[]).concat(o.id),i.children=[e.id],c[e.id]=e}const d=[...o.children];return d.splice(n.index,0,i.id),c[n.id]={...o,children:d},c}var q=r(35043);function x(e,t,r){const n=null==r?void 0:r[e];if(n){delete r[e];const{children:a=[]}=n;null==a||null==a.forEach||a.forEach((t=>{x(t,e,r)}));const o=null==r?void 0:r[t];if(Array.isArray(null==o?void 0:o.children)){const n=o.children.indexOf(e);if(n>-1){const e=[...o.children];e.splice(n,1),r[t]={...o,children:e}}}}}const U={[m.n]:(e,t)=>({...t.data.dashboardLayout.present}),[A.NW](e,t){const{payload:{nextComponents:r}}=t;return{...e,...r}},[A.Cl](e,t){var r;const{payload:{id:n,parentId:a}}=t;if(!(a&&n&&e[n]&&e[a]))return e;const o={...e};x(n,a,o);const s=o[a];return(null==s?void 0:s.type)===S._8&&0===(null==s||null==(r=s.children)?void 0:r.length)&&x(a,(0,I.A)({childId:a,layout:o}),o),o},[A.PX](e,t){const{payload:{dropResult:r}}=t,n=L({dropResult:r,layout:e});return{...e,...n}},[A.Yd](e,t){const{payload:{dropResult:r}}=t,{source:n,destination:a,dragging:o,position:s}=r;if(!n||!a||!o)return e;const i=function({entitiesMap:e,source:t,destination:r,position:n}){const a=[...e[t.id].children],o=[...e[r.id].children],s=a[t.index],i=t.id===r.id,l=t.type&&r.type===S.wc;let c=r.index;if(i){if(l){n===q.S4?c=Math.max(c,0):n===q.Db&&(c+=1);const a=n===q.Db&&t.index===r.index+1,o=n===q.S4&&t.index===r.index-1;if(a||o)return e;c>t.index&&(c-=1)}const o=function(e,t,r){const n=[...e],[a]=n.splice(t,1);return n.splice(r,0,a),n}(a,t.index,c);return{...e,[t.id]:{...e[t.id],children:o}}}return l&&(n===q.S4?c=Math.max(c,0):n===q.Db&&(c=Math.min(c+1,a.length-1))),a.splice(t.index,1),o.splice(c,0,s),{...e,[t.id]:{...e[t.id],children:a},[r.id]:{...e[r.id],children:o}}}({entitiesMap:e,source:n,destination:a,position:s});if(R(i[o.id])){const t=(0,C.A)({dropResult:r,layout:e})||void 0;(i[o.id].meta||{}).width!==t&&(i[o.id]={...i[o.id],meta:{...i[o.id].meta,width:t}})}if(N({parentType:a.type,childType:o.type})){const e=i[a.id],t=e.children,r=(0,D.A)(S._8);r.children=[t[a.index]],r.parents=(e.parents||[]).concat(a.id),t[a.index]=r.id,i[r.id]=r}return{...e,...i}},[A.Rc](e,t){const{payload:{dropResult:r}}=t,{source:n,dragging:a}=r,o=e[b.wv],s=o.children[0],i=e[s];if(n.id!==b.k0){const t=e[a.id].children[0],r=e[t],n=[...i.children].filter((e=>e!==a.id));return{...e,[b.wv]:{...o,children:[a.id]},[s]:{...i,children:[]},[t]:{...r,children:[...r.children,...n]}}}const l=L({dropResult:r,layout:e}),c=Object.values(l),d=c.find((e=>e.type===S.B8)),u=c.find((e=>e.type===S.wc));return d.children=[...i.children],l[s]={...i,children:[]},l[b.wv]={...o,children:[u.id]},{...e,...l}},[A.cL](e){const t=e[b.wv],r=t.children[0],n=e[r];if(n.type!==S.wc)return e;let a=[];const o={...e};return n.children.forEach((t=>{const r=e[t];a=[...a,...r.children],delete o[t]})),delete o[r],o[b.wv]={...t,children:[b.mK]},o[b.mK]={...e[b.mK],children:a},o},[A.YX](e){const t={...e};return(0,O.A)({currentComponent:t[b.wv],layout:t}),{...t}},[A.D3]:(e,t)=>({...e,[b.XY]:{...e[b.XY],meta:{...e[b.XY].meta,text:t.text}}})},P=(0,T.Ay)((function(e={},t){return t.type in U?(0,U[t.type])(e,t):e}),{limit:b.nc+2,ignoreInitialState:!0,filter:(0,T.F0)([m.n,A.NW,A.Cl,A.PX,A.Rc,A.cL,A.jd,A.Yd,A.fD])});var F=r(43561),M=r(35742),k=r(12066),Y=r(7735),Q=r(35700),j=r(38221),B=r.n(j);const H=new class{constructor({callback:e=(()=>{}),sizeThreshold:t=1e3,delayThreshold:r=1e3}){this.queue=[],this.sizeThreshold=t,this.delayThreshold=r,this.trigger=B()(this.trigger.bind(this),this.delayThreshold),this.callback=e}append(e){this.queue.push(e),this.trigger()}trigger(){if(this.queue.length>0){const e=this.queue.splice(0,this.sizeThreshold);this.callback.call(null,e),this.queue.length>0&&this.trigger()}}}({callback:e=>{if(e.length<=0)return;let t="/superset/log/?explode=events";const{source:r,source_id:n}=e[0];if("dashboard"===r?t+=`&dashboard_id=${n}`:"slice"===r&&(t+=`&slice_id=${n}`),navigator.sendBeacon){const r=new FormData;r.append("events",(0,k.J)(e)),M.A.getGuestToken()&&r.append("guest_token",M.A.getGuestToken()),navigator.sendBeacon(t,r)}else M.A.post({endpoint:t,postPayload:{events:e},parseMethod:null})},sizeThreshold:1024,delayThreshold:1e3});let $=0;const G=e=>t=>r=>{var n;if(r.type!==Y.LOG_EVENT)return t(r);const{dashboardInfo:a,explore:o,impressionId:s,dashboardLayout:i,sqlLab:l}=e.getState();let c={impression_id:s,version:"v2"};if(null!=a&&a.id)c={source:"dashboard",source_id:a.id,...c};else if(null!=o&&o.slice)c={source:"explore",source_id:o.slice?o.slice.slice_id:0,...c};else if(l){const e=l.queryEditors.find((({id:e})=>e===l.tabHistory.slice(-1)[0]));c={source:"sqlLab",source_id:null==e?void 0:e.id,db_id:null==e?void 0:e.dbId,schema:null==e?void 0:e.schema}}const{eventName:d}=r.payload;let{eventData:u={}}=r.payload;if(u={...c,ts:(new Date).getTime(),event_name:d,...u},Q.YC.has(d)?u={...u,event_type:"timing",trigger_event:$}:($=(0,F.Ak)(),u={...u,event_type:"user",event_id:$,visibility:document.visibilityState}),u.target_id&&null!=i&&null!=(n=i.present)&&n[u.target_id]){const{meta:e}=i.present[u.target_id];u.target_name=e.chartId?e.sliceName:e.text}return H.append(u),u};var V=r(92037),W=r(91522),z=r(44383),K=r.n(z),X=r(62952),Z=r(2514),J=r(91715),ee=r(17596),te=r(60130),re=r(67295),ne=r(64349),ae=r(71086),oe=r.n(ae),se=r(97211),ie=r.n(se),le=r(27366),ce=r(94500),de=r(85278),ue=r(67553);const pe={tables:de.ib,queries:de.eM,queryEditors:de.wX,unsavedQueryEditor:e=>(0,de.wX)([e])[0]},me={paths:["sqlLab"],config:{slicer:e=>t=>{const r={};e.forEach((e=>{if((0,le.G7)(le.TO.SqllabBackendPersistence)){const{queryEditors:e,editorTabLastUpdatedAt:n,unsavedQueryEditor:a,tables:o,queries:s,tabHistory:i,lastUpdatedActiveTab:l,destroyedQueryEditors:c}=t.sqlLab,d=(0,ce.qM)(e,a,n),u=i.slice(-1)[0]!==l,p=Object.keys(c).length>0;if(d.length>0||u||p){const e=d.every((({inLocalStorage:e})=>!e));r.sqlLab={queryEditors:d,...!e&&{tabHistory:i,tables:o.filter((e=>e.inLocalStorage)),queries:oe()(s,(e=>e.inLocalStorage&&!e.isDataPreview))},...u&&{tabHistory:i},destroyedQueryEditors:c}}}else delete t[e].common,"sqlLab"===e&&(r[e]=Object.fromEntries(Object.entries(t[e]).map((([e,t])=>{var r,n;return[e,null!=(r=null==(n=pe[e])?void 0:n.call(pe,t))?r:t]}))))}));const n=JSON.stringify(r),a=Math.round(n.length*ue.pO/ue.wc*100)/100;return t.localStorageUsageInKilobytes!==a&&(t.localStorageUsageInKilobytes=a),r},merge:(e,t={})=>({...e,...t,sqlLab:{...(null==t?void 0:t.sqlLab)||{},...e.sqlLab}})}},he=ie()(me.paths,me.config);var _e=r(2404),fe=r.n(_e),Ee=r(95579),ye=r(69108),ge=r(81550),ve=r(61225),Te=r(74680),be=r(49501),Ae=r(35839);function Se(e,t,r,n=!1){if(e.tabHistory[e.tabHistory.length-1]!==r){const{queryEditors:n}=(0,Ae.ZT)(e,"queryEditors",{id:r},t);return{queryEditors:n}}return{unsavedQueryEditor:{...e.unsavedQueryEditor.id===r&&e.unsavedQueryEditor,...r?{id:r,...t}:e.unsavedQueryEditor,...!n&&{updatedAt:(new Date).getTime()}}}}var Re=r(55045);const Ie=e=>(t=e)=>t,Ce=(0,r(38708).A)(),Oe="USER_LOADED",De=e=>[a.A,G,o.F.middleware],we={sqlLab:function e(t={},r){const n={[Te.ADD_QUERY_EDITOR](){const e={...(0,Ae.ZT)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor}),tabHistory:[...t.tabHistory,r.queryEditor.id]};return(0,Ae.CE)(e,"queryEditors",{...r.queryEditor,updatedAt:(new Date).getTime()})},[Te.QUERY_EDITOR_SAVED](){const{query:e,result:n,clientId:a}=r,o=t.queryEditors.find((e=>e.id===a));return(0,Ae.ZT)(t,"queryEditors",o,{remoteId:n.remoteId,name:e.name},"id")},[Te.UPDATE_QUERY_EDITOR](){const e=r.alterations.remoteId,n=t.queryEditors.find((t=>t.remoteId===e));return null==n?t:(0,Ae.ZT)(t,"queryEditors",n,r.alterations,"remoteId")},[Te.CLONE_QUERY_TO_NEW_TAB](){const n=t.queryEditors.find((e=>e.id===t.tabHistory[t.tabHistory.length-1])),a={...n,...t.unsavedQueryEditor.id===n.id&&t.unsavedQueryEditor},o={remoteId:a.remoteId,name:(0,Ee.t)("Copy of %s",a.name),dbId:r.query.dbId?r.query.dbId:null,catalog:r.query.catalog?r.query.catalog:null,schema:r.query.schema?r.query.schema:null,autorun:!0,sql:r.query.sql,queryLimit:r.query.queryLimit,maxRow:r.query.maxRow};return e({...t,unsavedQueryEditor:{}},Te.addQueryEditor(o))},[Te.REMOVE_QUERY_EDITOR](){const e={...r.queryEditor,...r.queryEditor.id===t.unsavedQueryEditor.id&&t.unsavedQueryEditor};let n=(0,Ae.uI)(t,"queryEditors",e);const a=n.queryEditors.map((e=>e.id)),o={};Object.keys(t.queries).forEach((e=>{const r=t.queries[e];a.indexOf(r.sqlEditorId)>-1&&(o[e]=r)}));let s=t.tabHistory.slice();s=s.filter((e=>a.indexOf(e)>-1));const i=t.tables.filter((t=>t.queryEditorId!==e.id));return n={...n,tabHistory:0===s.length&&n.queryEditors.length>0?n.queryEditors.slice(-1).map((e=>e.id)):s,tables:i,queries:o,unsavedQueryEditor:{...r.queryEditor.id!==t.unsavedQueryEditor.id&&t.unsavedQueryEditor},destroyedQueryEditors:{...n.destroyedQueryEditors,[e.id]:Date.now()}},n},[Te.CLEAR_DESTROYED_QUERY_EDITOR](){const e={...t.destroyedQueryEditors};return delete e[r.queryEditorId],{...t,destroyedQueryEditors:e}},[Te.REMOVE_QUERY](){const e={...t.queries};return delete e[r.query.id],{...t,queries:e}},[Te.RESET_STATE]:()=>({...r.sqlLabInitialState}),[Te.MERGE_TABLE](){const e={...r.table};let n;if(t.tables.forEach((t=>{t.dbId===e.dbId&&t.queryEditorId===e.queryEditorId&&t.catalog===e.catalog&&t.schema===e.schema&&t.name===e.name&&(n=t)})),n)return r.query&&(e.dataPreviewQueryId=r.query.id),n.initialized&&(e.id=n.id),(0,Ae.ZT)(t,"tables",n,e);e.dataPreviewQueryId=null;let a=(0,Ae.CE)(t,"tables",e,Boolean(r.prepend));return r.query&&(a=(0,Ae.ZT)(a,"tables",e,{dataPreviewQueryId:r.query.id})),a},[Te.EXPAND_TABLE]:()=>(0,Ae.ZT)(t,"tables",r.table,{expanded:!0}),[Te.REMOVE_DATA_PREVIEW](){const e={...t.queries};return delete e[r.table.dataPreviewQueryId],{...(0,Ae.ZT)(t,"tables",r.table,{dataPreviewQueryId:null}),queries:e}},[Te.CHANGE_DATA_PREVIEW_ID](){const e={...t.queries};delete e[r.oldQueryId];const n=[];return t.tables.forEach((e=>{e.dataPreviewQueryId===r.oldQueryId?n.push({...e,dataPreviewQueryId:r.newQuery.id}):n.push(e)})),{...t,queries:e,tables:n,activeSouthPaneTab:r.newQuery.id}},[Te.COLLAPSE_TABLE]:()=>(0,Ae.ZT)(t,"tables",r.table,{expanded:!1}),[Te.REMOVE_TABLES](){const e=r.tables.map((e=>e.id));return{...t,tables:t.tables.filter((t=>!e.includes(t.id)))}},[Te.COST_ESTIMATE_STARTED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!1,cost:null,error:null}}}),[Te.COST_ESTIMATE_RETURNED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!0,cost:r.json.result,error:null}}}),[Te.COST_ESTIMATE_FAILED]:()=>({...t,queryCostEstimates:{...t.queryCostEstimates,[r.query.id]:{completed:!1,cost:null,error:r.error}}}),[Te.START_QUERY](){let e={...t};if(r.query.sqlEditorId){const n={...(0,Ae.OL)(t.queryEditors,r.query.sqlEditorId),...r.query.sqlEditorId===t.unsavedQueryEditor.id&&t.unsavedQueryEditor};if(n.latestQueryId&&t.queries[n.latestQueryId]){const r={...t.queries[n.latestQueryId].results,data:[],query:null},a={...t.queries[n.latestQueryId],results:r},o={...t.queries,[a.id]:a};e={...t,queries:o}}}else e.activeSouthPaneTab=r.query.id;return e=(0,Ae.As)(e,"queries",r.query),{...e,...Se(t,{latestQueryId:r.query.id},r.query.sqlEditorId,r.query.isDataPreview)}},[Te.STOP_QUERY]:()=>(0,Ae.j2)(t,"queries",r.query,{state:ye.kZ.Stopped,results:[]}),[Te.CLEAR_QUERY_RESULTS](){const e={...r.query.results};return e.data=[],(0,Ae.j2)(t,"queries",r.query,{results:e,cached:!0})},[Te.REQUEST_QUERY_RESULTS]:()=>(0,Ae.j2)(t,"queries",r.query,{state:ye.kZ.Fetching}),[Te.QUERY_SUCCESS](){var e,n,a,o,s,i,l,c,d,u;if(r.query.state===ye.kZ.STOPPED||r.results.status!==ye.kZ.Success)return t;const p={endDttm:(0,be.tB)(),progress:100,results:r.results,rows:(null==r||null==(e=r.results)||null==(n=e.query)?void 0:n.rows)||0,state:ye.kZ.Success,limitingFactor:null==r||null==(a=r.results)||null==(o=a.query)?void 0:o.limitingFactor,tempSchema:null==r||null==(s=r.results)||null==(i=s.query)?void 0:i.tempSchema,tempTable:null==r||null==(l=r.results)||null==(c=l.query)?void 0:c.tempTable,errorMessage:null,cached:!1},m=null==r||null==(d=r.results)||null==(u=d.query)?void 0:u.resultsKey;return m&&(p.resultsKey=m),(0,Ae.j2)(t,"queries",r.query,p)},[Te.QUERY_FAILED](){if(r.query.state===ye.kZ.Stopped)return t;const e={state:ye.kZ.Failed,errors:r.errors,errorMessage:r.msg,endDttm:(0,be.tB)(),link:r.link};return(0,Ae.j2)(t,"queries",r.query,e)},[Te.SET_ACTIVE_QUERY_EDITOR](){var e;if(t.queryEditors.map((e=>e.id)).indexOf(null==(e=r.queryEditor)?void 0:e.id)>-1&&t.tabHistory[t.tabHistory.length-1]!==r.queryEditor.id){const e={...(0,Ae.ZT)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor}),unsavedQueryEditor:{}};return{...r.queryEditor.id===t.unsavedQueryEditor.id?(0,Ae.ZT)(e,"queryEditors",r.queryEditor,{...r.queryEditor,...t.unsavedQueryEditor}):e,tabHistory:[...t.tabHistory,r.queryEditor.id]}}return t},[Te.LOAD_QUERY_EDITOR](){const e=(0,Ae.ZT)(t,"queryEditors",t.unsavedQueryEditor,{...t.unsavedQueryEditor});return(0,Ae.ZT)(e,"queryEditors",r.queryEditor,{...r.queryEditor})},[Te.SET_TABLES]:()=>(0,Ae.sF)(t,"tables",r.tables),[Te.SET_ACTIVE_SOUTHPANE_TAB]:()=>({...t,activeSouthPaneTab:r.tabId}),[Te.MIGRATE_QUERY_EDITOR](){try{const{sqlLab:e}=JSON.parse(localStorage.getItem("redux"));e.queryEditors=e.queryEditors.filter((e=>e.id!==r.oldQueryEditor.id)),localStorage.setItem("redux",JSON.stringify({sqlLab:e}))}catch(e){}return(0,Ae.ZT)(t,"queryEditors",r.oldQueryEditor,r.newQueryEditor)},[Te.MIGRATE_TABLE](){try{const{sqlLab:e}=JSON.parse(localStorage.getItem("redux"));e.tables=e.tables.filter((e=>e.id!==r.oldTable.id)),localStorage.setItem("redux",JSON.stringify({sqlLab:e}))}catch(e){}return(0,Ae.CE)((0,Ae.uI)(t,"tables",r.oldTable),"tables",r.newTable)},[Te.MIGRATE_TAB_HISTORY](){const e=t.tabHistory.map((e=>e===r.oldId?r.newId:e));return{...t,tabHistory:e}},[Te.MIGRATE_QUERY](){const e={...t.queries[r.queryId],sqlEditorId:r.queryEditorId},n={...t.queries,[e.id]:e};return{...t,queries:n}},[Te.QUERY_EDITOR_SETDB]:()=>({...t,...Se(t,{dbId:r.dbId},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_CATALOG]:()=>({...t,...Se(t,{catalog:r.catalog},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_SCHEMA]:()=>({...t,...Se(t,{schema:r.schema},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_TITLE]:()=>({...t,...Se(t,{name:r.name},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_SQL](){const{unsavedQueryEditor:e}=t;return(null==e?void 0:e.id)===r.queryEditor.id&&e.sql===r.sql?t:{...t,...Se(t,{sql:r.sql,...r.queryId&&{latestQueryId:r.queryId}},r.queryEditor.id)}},[Te.QUERY_EDITOR_SET_CURSOR_POSITION]:()=>({...t,...Se(t,{cursorPosition:r.position},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_QUERY_LIMIT]:()=>({...t,...Se(t,{queryLimit:r.queryLimit},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_TEMPLATE_PARAMS]:()=>({...t,...Se(t,{templateParams:r.templateParams},r.queryEditor.id)}),[Te.QUERY_EDITOR_SET_SELECTED_TEXT]:()=>({...t,...Se(t,{selectedText:r.sql},r.queryEditor.id,!0)}),[Te.QUERY_EDITOR_SET_AUTORUN]:()=>({...t,...Se(t,{autorun:r.autorun},r.queryEditor.id)}),[Te.QUERY_EDITOR_PERSIST_HEIGHT]:()=>({...t,...Se(t,{northPercent:r.northPercent,southPercent:r.southPercent},r.queryEditor.id)}),[Te.QUERY_EDITOR_TOGGLE_LEFT_BAR]:()=>({...t,...Se(t,{hideLeftBar:r.hideLeftBar},r.queryEditor.id)}),[Te.SET_DATABASES](){const e={};return r.databases.forEach((t=>{e[t.id]={...t,extra_json:JSON.parse(t.extra||"")}})),{...t,databases:e}},[Te.REFRESH_QUERIES](){let e={...t.queries},n=!1,{queriesLastUpdate:a}=t;return Object.entries(r.alteredQueries).forEach((([r,o])=>{if(!t.queries.hasOwnProperty(r)||t.queries[r].state!==ye.kZ.Stopped&&t.queries[r].state!==ye.kZ.Failed){var s;const i=(0,ge.A)(o.changed_on),l=Date.parse(i);l>a&&(a=l);const c=null==(s=t.queries[r])?void 0:s.state,u=o.state;e[r]={...t.queries[r],...o,...o.startDttm&&{startDttm:Number(o.startDttm)},...o.endDttm&&{endDttm:Number(o.endDttm)},state:u===ye.kZ.Success&&[ye.kZ.Fetching,ye.kZ.Success,ye.kZ.Running].includes(c)?c:u},(0,ve.bN)(d()(e[r],["extra"]),d()(t.queries[r],["extra"]))&&fe()(e[r].extra,t.queries[r].extra)?e[r]=t.queries[r]:n=!0}})),n||(e=t.queries),{...t,queries:e,queriesLastUpdate:a}},[Te.CLEAR_INACTIVE_QUERIES](){const{queries:e}=t,n=Object.fromEntries(Object.entries(e).filter((([,e])=>!(["running","pending"].includes(e.state)&&Date.now()-e.startDttm>r.interval&&0===e.progress))).map((([e,t])=>{var r;return[e,{...t,state:t.resultsKey&&null!=(r=t.results)&&r.status?t.results.status:t.state}]})));return{...t,queries:n}},[Te.SET_USER_OFFLINE]:()=>({...t,offline:r.offline}),[Te.CREATE_DATASOURCE_STARTED]:()=>({...t,isDatasourceLoading:!0,errorMessage:null}),[Te.CREATE_DATASOURCE_SUCCESS]:()=>({...t,isDatasourceLoading:!1,errorMessage:null,datasource:r.datasource}),[Te.CREATE_DATASOURCE_FAILED]:()=>({...t,isDatasourceLoading:!1,errorMessage:r.err}),[Te.SET_EDITOR_TAB_LAST_UPDATE]:()=>({...t,editorTabLastUpdatedAt:r.timestamp}),[Te.SET_LAST_UPDATED_ACTIVE_TAB]:()=>({...t,lastUpdatedActiveTab:r.queryEditorId})};return r.type in n?n[r.type]():t},localStorageUsageInKilobytes:Ie(0),messageToasts:function(e=[],t){switch(t.type){case s.Q$:{const{payload:r}=t,n=e.slice();return r.noDuplicate&&n.find((e=>e.text===r.text))?e:[r,...e]}case s.l4:{const{payload:{id:r}}=t;return[...e].filter((e=>e.id!==r))}default:return e}},common:Ie(Ce.common),user:(e=Ce.user||{},t)=>t.type===Oe?t.user:e,impressionId:Ie((0,F.Ak)()),charts:i.A,datasources:(e,t)=>t.type===g.p3.SetDatasources?function(e,t){return t.type===g.p3.SetDatasources?{...e,...y()(t.datasources,"uid")}:t.type===g.p3.SetDatasource?{...e,[t.key]:t.datasource}:e||{}}(e,t):function(e,t){return t.type===ne.ZS?{...e,[(0,re.S)(t.datasource)]:t.datasource}:t.type===W.W?{...t.data.datasources}:e||{}}(e,t),dashboardInfo:function(e={},t){switch(t.type){case p._M:return{...e,...t.newInfo,last_modified_time:Math.round((new Date).getTime()/1e3)};case m.n:return{...e,...t.data.dashboardInfo};case p.rP:return{...e,filterBarOrientation:t.filterBarOrientation};case p.KP:return{...e,crossFiltersEnabled:t.crossFiltersEnabled};default:return e}},dashboardFilters:_.Ay,dataMask:l.A,nativeFilters:f.A,dashboardState:function(e={},t){const r={[m.n]:()=>({...e,...t.data.dashboardState}),[h.eK]:()=>({...e,css:t.css}),[h.r9](){const r=new Set(e.sliceIds);return r.add(t.slice.slice_id),{...e,sliceIds:Array.from(r)}},[h.m4](){const{sliceId:r}=t,n=new Set(e.sliceIds);return n.delete(r),{...e,sliceIds:Array.from(n)}},[h.hL]:()=>({...e,isStarred:t.isStarred}),[h.gH]:()=>({...e,isPublished:t.isPublished}),[h.kw]:()=>({...e,editMode:t.editMode}),[h.eZ](){const{maxUndoHistoryExceeded:r=!0}=t.payload;return{...e,maxUndoHistoryExceeded:r}},[h.zU]:()=>({...e}),[h.n2]:()=>({...e,colorScheme:t.colorScheme,updatedColorScheme:!0}),[h.bY](){const r={...e.expandedSlices},{sliceId:n}=t;return r[n]?delete r[n]:r[n]=!0,{...e,expandedSlices:r}},[h.pO]:()=>({...e,hasUnsavedChanges:!0}),[h.ff]:()=>({...e,dashboardIsSaving:!0}),[h.Mm]:()=>({...e,dashboardIsSaving:!1}),[h.sn]:()=>({...e,hasUnsavedChanges:!1,maxUndoHistoryExceeded:!1,editMode:!1,updatedColorScheme:!1,lastModifiedTime:t.lastModifiedTime}),[h.Cw](){const{hasUnsavedChanges:r}=t.payload;return{...e,hasUnsavedChanges:r}},[h.EI]:()=>({...e,refreshFrequency:t.refreshFrequency,shouldPersistRefreshFrequency:t.isPersistent,hasUnsavedChanges:t.isPersistent}),[h._q]:()=>({...e,isRefreshing:!0}),[h.im]:()=>({...e,isFiltersRefreshing:!0}),[h.mk]:()=>({...e,isFiltersRefreshing:!1}),[h.u4]:()=>({...e,isRefreshing:!1}),[h.TF]:()=>({...e,directPathToChild:t.path,directPathLastUpdated:Date.now()}),[h.aj](){const r=new Set(e.activeTabs);return r.delete(t.prevTabId),r.add(t.tabId),{...e,activeTabs:Array.from(r)}},[h.Nl]:()=>({...e,activeTabs:t.activeTabs}),[h.dv]:()=>({...e,overwriteConfirmMetadata:t.overwriteConfirmMetadata}),[h.Zh]:()=>({...e,focusedFilterField:{chartId:t.chartId,column:t.column}}),[h.Yx]:()=>e.focusedFilterField&&t.chartId===e.focusedFilterField.chartId&&t.column===e.focusedFilterField.column?{...e,focusedFilterField:null}:e,[h.S4]:()=>({...e,fullSizeChartId:t.chartId}),[h.qO]:()=>({...e,datasetsStatus:t.status})};return t.type in r?r[t.type]():e},dashboardLayout:P,sliceEntities:v.A,reports:function(e={},t){const r={[u.qJ](){var r,n;const{report:a,resourceId:o,creationMethod:s,filterField:i}=t,l=null==(r=a.result)?void 0:r.find((e=>e[i]===o));if(l)return{...e,[s]:{...e[s],[o]:l}};if(null!=e&&null!=(n=e[s])&&n[o]){const t={...e};return delete t[s][o],t}return{...e}},[u.hH](){const{result:r,id:n}=t.json,a={...r,id:n},o=a.dashboard||a.chart;return{...e,[a.creation_method]:{...e[a.creation_method],[o]:a}}},[u.CM](){const r={...t.json.result,id:t.json.id},n=r.dashboard||r.chart;return{...e,[r.creation_method]:{...e[r.creation_method],[n]:r}}},[u.HR](){const{report:r}=t,n=r.dashboard||r.chart;return{...e,[r.creation_method]:{...d()(e[r.creation_method],n)}}}};return t.type in r?r[t.type]():e},saveModal:function(e={},t){const r={[V.SET_SAVE_CHART_MODAL_VISIBILITY]:()=>({...e,isVisible:t.isVisible}),[V.FETCH_DASHBOARDS_SUCCEEDED]:()=>({...e,dashboards:t.choices}),[V.FETCH_DASHBOARDS_FAILED]:()=>({...e,saveModalAlert:`fetching dashboards failed for ${t.userId}`}),[V.SAVE_SLICE_FAILED]:()=>({...e,saveModalAlert:"Failed to save slice"}),[V.SAVE_SLICE_SUCCESS]:t=>({...e,data:t}),[W.W]:()=>({...t.data.saveModal})};return t.type in r?r[t.type]():e},explore:function(e={},t){const r={[Z.DYNAMIC_PLUGIN_CONTROLS_READY]:()=>({...e,controls:t.controlsState}),[te.TOGGLE_FAVE_STAR]:()=>({...e,isStarred:t.isStarred}),[te.POST_DATASOURCE_STARTED]:()=>({...e,isDatasourceMetaLoading:!0}),[te.UPDATE_FORM_DATA_BY_DATASOURCE](){const r={...e.form_data},{prevDatasource:n,newDatasource:a}=t,o={...e.controls},s=[];n.id===a.id&&n.type===a.type||(r.datasource=a.uid),Object.entries(o).forEach((([e,t])=>{("column_name"===t.valueKey||"savedMetrics"in t||"columns"in t||"options"in t&&!Array.isArray(t.options))&&(r[e]=(0,ee.dI)(a,t,t.value),(0,X.A)(r[e]).length>0&&r[e]!==o[e].default&&s.push(e))}));const i={...e,controls:o,datasource:t.newDatasource};return{...i,form_data:r,controls:(0,J.Eu)(i,r),controlsTransferred:s}},[te.FETCH_DATASOURCES_STARTED]:()=>({...e,isDatasourcesLoading:!0}),[te.SET_FIELD_VALUE](){const{controlName:r,value:n,validationErrors:a}=t;let o={...e.form_data,[r]:n};const s=e.form_data.metrics,i=e.form_data.column_config,l=o.viz_type;"metrics"===r&&s&&i&&(n.forEach(((e,t)=>{var r,n;!s.some((t=>(null==t?void 0:t.label)===(null==e?void 0:e.label)))&&(null==e?void 0:e.label)!==(null==(r=s[t])?void 0:r.label)&&i[null==(n=s[t])?void 0:n.label]&&(i[e.label]=i[s[t].label],delete i[s[t].label])})),o.column_config=i);const c=e.controls[t.controlName]||(0,ee.QC)(t.controlName,l)||null,d={...(0,ee.GW)(c,e,t.value)},u={...e.controls.column_config,...i&&{value:i}},p={...e,controls:{...e.controls,...c&&{[r]:d},..."metrics"===r&&{column_config:u}}},m={};Array.isArray(d.rerender)&&d.rerender.forEach((e=>{m[e]={...(0,ee.GW)(p.controls[e],p,p.controls[e].value)}}));const h=d.validationErrors||[];(a||[]).forEach((e=>{h.includes(e)||h.push(e)}));const _=h&&h.length>0,f="viz_type"===t.controlName&&t.value!==e.controls.viz_type.value;let E=e.controls;if(f){const r=new ee.a6(e.form_data).transform(t.value,e);o=r.formData,E=r.controlsState}return{...e,form_data:o,triggerRender:d.renderTrigger&&!_,controls:{...E,...c&&{[t.controlName]:{...d,validationErrors:h}},...m}}},[te.SET_EXPLORE_CONTROLS]:()=>({...e,controls:(0,J.Eu)(e,t.formData)}),[te.SET_FORM_DATA]:()=>({...e,form_data:t.formData}),[te.UPDATE_CHART_TITLE]:()=>({...e,sliceName:t.sliceName}),[te.SET_SAVE_ACTION]:()=>({...e,saveAction:t.saveAction}),[te.CREATE_NEW_SLICE]:()=>({...e,slice:t.slice,controls:(0,J.Eu)(e,t.form_data),can_add:t.can_add,can_download:t.can_download,can_overwrite:t.can_overwrite}),[te.SET_STASH_FORM_DATA](){const{form_data:r,hiddenFormData:n}=e,{fieldNames:a,isHidden:o}=t;if(o)return{...e,hiddenFormData:{...n,...K()(r,a)},form_data:d()(r,a)};const s=K()(n,a);return 0===Object.keys(s).length?e:{...e,form_data:{...r,...s},hiddenFormData:d()(n,a)}},[te.SLICE_UPDATED](){var r;return{...e,slice:{...e.slice,...t.slice,owners:t.slice.owners?t.slice.owners.map((e=>e.value)):null},sliceName:null!=(r=t.slice.slice_name)?r:e.sliceName,metadata:{...e.metadata,owners:t.slice.owners?t.slice.owners.map((e=>e.label)):null}}},[te.SET_FORCE_QUERY]:()=>({...e,force:t.force}),[W.W]:()=>({...t.data.explore})};return t.type in r?r[t.type]():e}};function Ne({disableDebugger:e=!1,initialState:t=(0,Re.A)(Ce),rootReducers:r=we,...a}={}){return(0,n.U1)({preloadedState:t,reducer:{[o.F.reducerPath]:o.F.reducer,...r},middleware:De,devTools:!1,enhancers:[he],...a})}const Le=Ne()},27724:(e,t,r)=>{var n={"./alert.svg":[67335,7335],"./alert_solid.svg":[68051,8051],"./alert_solid_small.svg":[19771,9771],"./area-chart-tile.svg":[17872,7872],"./ballot.svg":[65665,5665],"./bar-chart-tile.svg":[7286,7286],"./big-number-chart-tile.svg":[6421,6421],"./binoculars.svg":[23577,3577],"./bolt.svg":[52094,2094],"./bolt_small.svg":[35058,5058],"./bolt_small_run.svg":[16332,6332],"./calendar.svg":[36977,6977],"./cancel-x.svg":[27489,9870],"./cancel.svg":[39317,9317],"./cancel_solid.svg":[83213,3213],"./card_view.svg":[65951,5951],"./cards.svg":[69544,9544],"./cards_locked.svg":[55617,5617],"./caret_down.svg":[23416,1035],"./caret_left.svg":[13228,3228],"./caret_right.svg":[31987,1987],"./caret_up.svg":[10116,116],"./category.svg":[61087,1087],"./certified.svg":[75794,5794],"./check.svg":[93529,3529],"./checkbox-half.svg":[94466,4466],"./checkbox-off.svg":[26480,6480],"./checkbox-on.svg":[36682,6682],"./circle.svg":[64103,4103],"./circle_check.svg":[24773,7154],"./circle_check_solid.svg":[77506,7506],"./clock.svg":[82899,2899],"./close.svg":[36149,6149],"./code.svg":[47968,7968],"./cog.svg":[2956,2956],"./collapse.svg":[67278,7278],"./color_palette.svg":[32628,2628],"./components.svg":[18607,8607],"./copy.svg":[58704,8704],"./cross-filter-badge.svg":[97266,7266],"./current-rendered-tile.svg":[36897,6897],"./cursor_target.svg":[82423,2423],"./database.svg":[66468,6468],"./dataset_physical.svg":[43599,3599],"./dataset_virtual.svg":[89,89],"./dataset_virtual_greyscale.svg":[19909,9909],"./default_db_image.svg":[88581,8581],"./download.svg":[87759,7759],"./drag.svg":[17557,7557],"./edit.svg":[84647,4647],"./edit_alt.svg":[53111,3111],"./email.svg":[73113,3113],"./error.svg":[38247,8247],"./error_solid.svg":[36019,6019],"./error_solid_small.svg":[10011,11],"./error_solid_small_red.svg":[16979,6979],"./exclamation.svg":[26750,6750],"./expand.svg":[91079,1079],"./eye.svg":[34530,4530],"./eye_slash.svg":[75228,5228],"./favorite-selected.svg":[18127,8127],"./favorite-unselected.svg":[21322,1322],"./favorite_small_selected.svg":[10513,513],"./field_abc.svg":[33980,3980],"./field_boolean.svg":[30352,352],"./field_date.svg":[89456,9456],"./field_derived.svg":[30975,975],"./field_num.svg":[41156,1156],"./field_struct.svg":[43839,3839],"./file.svg":[19389,9389],"./filter.svg":[61753,1753],"./filter_small.svg":[90225,225],"./folder.svg":[5667,5667],"./full.svg":[42192,2192],"./function_x.svg":[12646,2646],"./gear.svg":[77006,7006],"./grid.svg":[29903,9903],"./image.svg":[38890,8890],"./import.svg":[80816,816],"./info-solid.svg":[34857,4857],"./info.svg":[78891,8891],"./info_solid_small.svg":[83919,3919],"./join.svg":[45351,5351],"./keyboard.svg":[18240,8240],"./layers.svg":[93425,3425],"./lightbulb.svg":[45624,5624],"./line-chart-tile.svg":[6991,6991],"./link.svg":[84663,4663],"./list.svg":[46671,6671],"./list_view.svg":[40237,237],"./location.svg":[34798,4798],"./lock_locked.svg":[47007,7007],"./lock_unlocked.svg":[11454,1454],"./map.svg":[63423,3423],"./message.svg":[74944,4944],"./minus.svg":[54497,4497],"./minus_solid.svg":[24649,4649],"./more_horiz.svg":[8395,8395],"./more_vert.svg":[48234,8234],"./move.svg":[47464,7464],"./nav_charts.svg":[97782,7782],"./nav_dashboard.svg":[37879,7879],"./nav_data.svg":[93353,3353],"./nav_explore.svg":[23866,3866],"./nav_home.svg":[55440,5440],"./nav_lab.svg":[67646,7646],"./note.svg":[63739,3739],"./offline.svg":[8868,8868],"./paperclip.svg":[22625,2625],"./pie-chart-tile.svg":[56509,6509],"./placeholder.svg":[40962,962],"./plus.svg":[29443,9443],"./plus_large.svg":[99271,9271],"./plus_small.svg":[75371,5371],"./plus_solid.svg":[81215,1215],"./queued.svg":[66656,6656],"./redo.svg":[6479,6479],"./refresh.svg":[49752,9752],"./running.svg":[43232,3232],"./save.svg":[97020,7020],"./search.svg":[3535,3535],"./server.svg":[32874,2874],"./share.svg":[4236,4236],"./slack.svg":[29785,9785],"./sort.svg":[54879,4879],"./sort_asc.svg":[84041,4041],"./sort_desc.svg":[42013,2013],"./sql.svg":[6641,6641],"./table-chart-tile.svg":[63967,3967],"./table.svg":[12833,2833],"./tag.svg":[42845,2845],"./tags.svg":[13780,3780],"./transparent.svg":[63388,1007],"./trash.svg":[93891,3891],"./triangle_change.svg":[89610,9610],"./triangle_down.svg":[91329,3710],"./triangle_up.svg":[61413,1413],"./undo.svg":[31809,1809],"./up-level.svg":[40321,321],"./user.svg":[25042,5042],"./warning.svg":[3609,3609],"./warning_solid.svg":[47553,7553],"./x-large.svg":[91151,1151],"./x-small.svg":[93459,3459]};function a(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return r.e(t[1]).then((()=>r(a)))}a.keys=()=>Object.keys(n),a.id=27724,e.exports=a},39197:(e,t,r)=>{"use strict";e.exports=r.p+"loading.cff8a5da.gif"}}]);
//# sourceMappingURL=8769.c1e83456b2de61442e89.entry.js.map